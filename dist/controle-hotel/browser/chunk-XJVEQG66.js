import{$ as Mi,$a as ti,$b as sn,Ab as ae,Ac as Sn,Ad as li,Be as Je,Ca as Gi,Cb as Ki,Cc as xn,Db as Xi,Dd as Vn,Ea as Bi,Eb as en,Ec as En,Ee as Qn,Fb as tn,Ga as Ri,Gb as nn,Ge as Yn,H as q,Hb as X,I as E,Ib as ee,J as Z,Ja as $e,Jb as J,Jd as St,Kb as H,Kc as wn,Ma as zi,Mb as ht,Mc as In,Nb as ce,Oa as Li,Ob as he,Oc as Pn,Pb as on,Pd as Dn,Qb as rn,Qd as kn,Rb as te,Rc as ni,Sa as Kt,Sb as an,Tb as me,Tc as Tn,Td as Mn,Ua as Xt,Ub as gt,Vb as bt,Vc as _t,W as Vi,X as Re,Xb as vt,Ya as Wi,Z as Di,Zd as xt,_ as ki,_a as ei,_b as ln,ad as oi,cb as ft,cc as mn,cd as ri,dc as ie,de as An,ec as pn,ee as Nn,fa as Ai,fb as $i,fc as ge,gb as Ji,he as qn,ib as Hi,ic as cn,id as jn,ie as Un,j as ji,jb as M,je as Gn,ka as ze,kc as un,kd as Fn,ke as Bn,la as je,lb as K,lc as dn,le as Rn,m as Zt,mc as fn,n as Fi,nb as Qi,nc as hn,ne as zn,oc as gn,oe as Ln,p as B,pb as R,pc as bn,pd as On,pe as Wn,q as N,qa as ut,qb as P,qe as Et,r as Oi,ra as Ni,rb as G,rc as vn,rd as yt,sa as Le,sb as z,sc as Cn,se as $n,tb as Ae,tc as _n,te as Jn,ua as We,ub as re,uc as Ct,v as oe,va as dt,vb as Yi,vc as ot,wa as qi,wb as L,wc as yn,xb as W,yb as $,yc as ii,yd as ai,ye as Hn,za as Ui,zb as Zi}from"./chunk-WUQUE4LB.js";import{$b as p,Bc as v,D as gi,Db as b,I as bi,Ia as Me,Lc as Ei,Mc as wi,Pb as m,Pc as S,Qa as yi,Sb as Q,Tb as st,Tc as Ii,Ub as le,Vb as mt,Wb as Si,Xb as Xe,Yb as et,Zb as t,_b as i,ac as w,ba as vi,bc as I,ca as Ce,da as Ci,dc as y,f as A,fb as _e,fc as g,gc as h,ja as Ue,jb as l,jc as Y,k as fi,kb as _,kc as xi,mc as tt,nc as it,nd as pt,oa as _i,oc as nt,od as k,rc as T,sc as a,sd as Pi,t as hi,tc as C,td as Ti,uc as Be,vd as ct,wb as F,wc as O,xb as Ge,xc as V,xd as Yt,y as Qt,ya as d,yc as D,za as f}from"./chunk-MOFHRSEW.js";import{h as Ht}from"./chunk-WWX6BADO.js";var Ne=Z("panne"),Zn=E(Ne,o=>o.pannesByStateAndOther),Kn=E(Ne,o=>o.countByMarque),is=E(Ne,o=>o.panne),wt=E(Ne,o=>o.globalPannes),Xn=E(Ne,o=>o.pannesByDay),eo=E(Ne,o=>o.pannesByDates),to=E(Ne,o=>o.globalPanneInRoom);var rt=Z("chambre"),io=Z("chambreChoisie"),rs=E(rt,o=>o.chambre),It=E(rt,o=>o.result),as=E(rt,o=>o.chambresByState),no=E(rt,o=>o.chambresPropres),oo=E(rt,o=>o.chambresEnCoursDeNettoyage),Pt=E(io,o=>o.chambreChoisie),ls=E(io,o=>o.result);var at=Z("salle"),ro=Z("salleChoisie"),ps=E(at,o=>o.salle),Tt=E(at,o=>o.result),cs=E(at,o=>o.sallesByState),ao=E(at,o=>o.sallesPropres),lo=E(at,o=>o.sallesEnCoursDeNettoyage),us=E(ro,o=>o.salleChoisie),ds=E(ro,o=>o.result);var qe=Z("passe"),so=E(qe,o=>o.globalPasses),gs=E(qe,o=>o.userPassesDay),bs=E(qe,o=>o.userPasses),He=E(qe,o=>o.passe),mo=E(qe,o=>o.newsPassesActifs),po=E(qe,o=>o.newsPasses),co=E(qe,o=>o.currentPasses);var Bo=["chatcontainer"],fo=()=>({"min-width":"50rem"}),Ro=()=>[5,10,20];function zo(o,n){o&1&&(t(0,"div",38),p(1,"img",50),t(2,"h3",51),a(3,"Aucune panne inscrite pour le moment"),i()())}function Lo(o,n){if(o&1&&(t(0,"div"),p(1,"p-chart",52),i()),o&2){let e=h();l(),m("data",e.panneChart)("options",e.pannesOptions)}}function Wo(o,n){o&1&&(t(0,"tr")(1,"th"),a(2,"Photo"),i(),t(3,"th"),a(4,"Nom"),i(),t(5,"th"),a(6,"Email"),i(),t(7,"th"),a(8,"Role"),i()())}function $o(o,n){if(o&1&&p(0,"div",58),o&2){let e=h().$implicit;xi("pTooltip","",e.nom," est connect\xE9(e)")}}function Jo(o,n){o&1&&(t(0,"div",59),p(1,"i",60),i())}function Ho(o,n){if(o&1&&p(0,"img",61),o&2){let e=h().$implicit;m("src",e.photo,_e)}}function Qo(o,n){if(o&1&&(t(0,"tr")(1,"td",53),b(2,$o,1,2,"div",54)(3,Jo,2,0,"div",55)(4,Ho,1,1,"img",56),i(),t(5,"td"),a(6),i(),t(7,"td"),a(8),i(),t(9,"td"),p(10,"p-tag",57),i()()),o&2){let e=n.$implicit;l(2),m("ngIf",e.connected),l(),m("ngIf",!e.photo),l(),m("ngIf",e.photo),l(2),C(e.nom),l(2),C(e.email),l(2),m("rounded",!0)("value",e.role=="Agent"?"Femme de chambre":e.role)}}function Yo(o,n){o&1&&(t(0,"tr")(1,"th"),a(2,"Nom de l'\xE9quipement"),i(),t(3,"th"),a(4,"Marque de l'\xE9quipement"),i(),t(5,"th"),a(6,"Description de la panne"),i(),t(7,"th"),a(8,"Etat de la panne"),i(),t(9,"th"),a(10,"Num\xE9ro de la chambre"),i(),t(11,"th"),a(12,"Date d'enr\xE9gistrement de la panne"),i()())}function Zo(o,n){if(o&1&&p(0,"p-tag",66),o&2){let e=h().$implicit;m("value",e.marqueEquipement.nom)}}function Ko(o,n){if(o&1&&(t(0,"tr")(1,"td"),a(2),i(),t(3,"td"),b(4,Zo,1,1,"p-tag",63),i(),t(5,"td"),a(6),i(),t(7,"td"),p(8,"p-tag",64),i(),t(9,"td",65),a(10),i(),t(11,"td"),a(12),i()()),o&2){let e=n.$implicit;l(2),C(e.nomEquipement),l(2),m("ngIf",e.marqueEquipement),l(2),C(e.description),l(2),m("value",e.statut.nom),l(2),C(e.chambreChoisie.chambre.numero),l(2),C(e.creationDate)}}function Xo(o,n){if(o&1&&(t(0,"p-table",62),b(1,Yo,13,0,"ng-template",null,0,S)(3,Ko,13,6,"ng-template",null,1,S),i()),o&2){let e=h();m("value",e.toutesLesPannesFiltre)("paginator",!0)("rows",10)("tableStyle",v(5,fo))("rowsPerPageOptions",v(6,Ro))}}function er(o,n){o&1&&(t(0,"div",67),p(1,"img",68),t(2,"h3"),a(3,"Aucun probl\xE8me technique enr\xE9gistr\xE9."),i()())}var jt=class o{constructor(n,e,r,s,c,u){this.layoutService=n;this.store=e;this.messageService=r;this.confirmationService=s;this.router=c;this.cd=u;this.subscription=this.layoutService.configUpdate$.pipe(bi(25)).subscribe(x=>{this.panneChartInit(),this.panneMarqueChart()})}platformId=_i(yi);chatContainerViewChild;unsubscribe$=new A;pannesParDates;rangeDates;panneChart;pannesOptions;noResult=!1;panneMarqueData;panneMarqueOptions;overviewChartData1;overviewChartData2;overviewChartData3;overviewChartData4;overviewChartOptions1;overviewChartOptions2;overviewChartOptions3;overviewChartOptions4;subscription;nosChambresPropres;nosChambresEnNettoyages;nosSallesPropres;nosSallesEnNettoyages;nouveauxPasses;passesEnCours;pannesByDay;toutesLesPannes;toutesLesPannesFiltre;toutesLesPannesParNombre=[];toutesLesPannesParChambre=[];dateDuJour;dateDuJourConvertie;countedByMarque;countedByNumber;nosAgents;tokens;userConnected;ngOnInit(){this.loadUserData(),this.setupCharts(),this.store.select(je).pipe(Ce(this.unsubscribe$)).subscribe(n=>{this.userConnected=n,n?.role==="Agent"?this.router.navigate(["/dashboard/agent"]):this.handleNonAgentRole()})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}loadUserData(){let n=localStorage.getItem("userdata");n&&(this.tokens=JSON.parse(n),this.store.dispatch(Ai({nom:this.tokens.nom})))}handleNonAgentRole(){this.store.dispatch(En()),this.store.select(Kn).pipe(Ce(this.unsubscribe$)).subscribe({next:n=>{this.countedByMarque=n.map(e=>e.marque),this.countedByNumber=n.map(e=>e.total),this.updatePanneMarqueChart()}}),this.initializeDates(),this.fetchData(),this.fetchAdditionalData()}initializeDates(){this.dateDuJour=We(),this.dateDuJourConvertie=dt(new Date)}fetchData(){let n="1970-01-02 04:00:00",e=this.dateDuJourConvertie||new Date().toISOString().replace("T"," ").substring(0,19);if(e)this.store.dispatch(xn({dateDebut:n,dateFin:e}));else return;this.store.select(to).pipe(Ce(this.unsubscribe$)).subscribe({next:r=>{r&&r.length>0&&(this.toutesLesPannesParNombre=[],this.toutesLesPannesParChambre=[],r.forEach(s=>{this.toutesLesPannesParNombre.push(s[1]),this.toutesLesPannesParChambre.push(s[0])}),this.panneChartInit())}})}fetchAdditionalData(){this.store.dispatch(oi({etat:"Propre"})),this.store.select(no).pipe(Ce(this.unsubscribe$)).subscribe(n=>this.nosChambresPropres=n),this.store.dispatch(ri({etat:"En cours"})),this.store.select(oo).pipe(Ce(this.unsubscribe$)).subscribe(n=>this.nosChambresEnNettoyages=n),this.store.dispatch(ai({etat:"Propre"})),this.store.select(ao).pipe(Ce(this.unsubscribe$)).subscribe(n=>this.nosSallesPropres=n),this.store.dispatch(li({etat:"En cours"})),this.store.select(lo).pipe(Ce(this.unsubscribe$)).subscribe(n=>this.nosSallesEnNettoyages=n),this.store.dispatch(Kt({nom:"Nouveau"})),this.store.select(po).pipe(Ce(this.unsubscribe$)).subscribe(n=>this.nouveauxPasses=n),this.store.dispatch(Xt({nom:"En cours"})),this.store.select(co).pipe(Ce(this.unsubscribe$)).subscribe(n=>this.passesEnCours=n),this.store.dispatch(ii({date:this.dateDuJour})),this.store.select(Xn).pipe(Ce(this.unsubscribe$)).subscribe(n=>this.pannesByDay=n),this.store.dispatch(ot()),this.store.select(wt).pipe(Ce(this.unsubscribe$)).subscribe({next:n=>{this.toutesLesPannes=n,this.toutesLesPannesFiltre=n,this.noResult=!1}}),this.store.dispatch(Re()),this.store.select(ze).pipe(Ce(this.unsubscribe$)).subscribe(n=>this.nosAgents=n)}setupCharts(){this.overviewChartData1=this.createOverviewChartData([50,64,32,24,18,27,20,36,30]),this.overviewChartOptions1=this.createOverviewChartOptions()}createOverviewChartData(n){return{labels:["January","February","March","April","May","June","July","August","September"],datasets:[{data:n,borderColor:["#4DD0E1"],backgroundColor:["rgba(77, 208, 225, 0.8)"],borderWidth:2,fill:!0,tension:.4}]}}createOverviewChartOptions(){return{plugins:{legend:{display:!1}},scales:{y:{display:!1},x:{display:!1}},tooltips:{enabled:!1},elements:{point:{radius:0}}}}onChatKeydown(n){if(n.key==="Enter"){let e=n.currentTarget.value;n.currentTarget.value="";let r=this.chatContainerViewChild.nativeElement;setTimeout(()=>{r.scroll({top:r.scrollHeight,behavior:"smooth"})},1)}}panneMarqueChart(){if(Yt(this.platformId)){let n=getComputedStyle(document.documentElement),e=n.getPropertyValue("--p-text-color"),r=n.getPropertyValue("--p-text-muted-color"),s=n.getPropertyValue("--p-content-border-color");this.panneMarqueData={labels:this.countedByMarque,datasets:[{label:"Nombre de pannes",backgroundColor:"rgba(128, 128, 128, 0.7)",hoverBackgroundColor:"rgba(128, 128, 128, 1)",hoverBorderColor:"rgba(128, 128, 128, 1)",borderWidth:0,borderRadius:5,barPercentage:.6,categoryPercentage:.5,data:this.countedByNumber}]},this.panneMarqueOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:e}}},scales:{x:{ticks:{color:r},grid:{display:!1}},y:{ticks:{color:r},grid:{color:s}}}},this.cd.markForCheck()}}updatePanneMarqueChart(){let n=getComputedStyle(document.documentElement),e=n.getPropertyValue("--p-text-color"),r=n.getPropertyValue("--p-text-muted-color"),s=n.getPropertyValue("--p-content-border-color");this.panneMarqueData={labels:this.countedByMarque,datasets:[{label:"Nombre de pannes",backgroundColor:"rgba(128, 128, 128, 0.7)",hoverBackgroundColor:"rgba(128, 128, 128, 1)",hoverBorderColor:"rgba(128, 128, 128, 1)",borderWidth:0,borderRadius:5,barPercentage:.6,categoryPercentage:.5,data:this.countedByNumber}]},this.panneMarqueOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:e}}},scales:{x:{ticks:{color:r},grid:{display:!1}},y:{ticks:{color:r},grid:{color:s}}}},this.cd.markForCheck()}panneChartInit(){if(Yt(this.platformId)){let n=getComputedStyle(document.documentElement),e=n.getPropertyValue("--p-text-color"),r=new Map;this.toutesLesPannesParChambre.map((x,ne)=>({chambre:x,nombre:this.toutesLesPannesParNombre[ne]||0})).filter(x=>x.chambre&&!isNaN(x.nombre)).forEach(x=>{r.has(x.chambre)?r.set(x.chambre,r.get(x.chambre)+x.nombre):r.set(x.chambre,x.nombre)});let c=Array.from(r.keys()),u=Array.from(r.values());this.panneChart={labels:c,datasets:[{data:u,backgroundColor:c.map((x,ne)=>n.getPropertyValue(["--p-cyan-500","--p-orange-500","--p-gray-500"][ne%3])),hoverBackgroundColor:c.map((x,ne)=>n.getPropertyValue(["--p-cyan-400","--p-orange-400","--p-gray-400"][ne%3]))}]},this.pannesOptions={cutout:"60%",plugins:{legend:{labels:{color:e}}}},this.cd.markForCheck()}}setOverviewColors(){let{pinkBorderColor:n,pinkBgColor:e,tealBorderColor:r,tealBgColor:s,orangeBgColor:c,orangeBorderColor:u,roseBorderColor:x,roseBgColor:ne,rougeBorderColor:j,rougeBgColor:U}=this.getOverviewColors();this.overviewChartData1.datasets[0].borderColor[0]=r,this.overviewChartData1.datasets[0].backgroundColor[0]=s,this.overviewChartData2.datasets[0].borderColor[0]=u,this.overviewChartData2.datasets[0].backgroundColor[0]=c,this.overviewChartData3.datasets[0].borderColor[0]=x,this.overviewChartData3.datasets[0].backgroundColor[0]=ne,this.overviewChartData4.datasets[0].borderColor[0]=j,this.overviewChartData4.datasets[0].backgroundColor[0]=U}getOverviewColors(){return{pinkBorderColor:"#E91E63",pinkBgColor:"#F48FB1",tealBorderColor:"#009688",tealBgColor:"#80CBC4",orangeBorderColor:"#dbcc23",orangeBgColor:"#ffed29",roseBorderColor:"#458018",roseBgColor:"#89f336",rougeBorderColor:"#9b1313",rougeBgColor:"#cd1c18"}}gtPannesOptions(){let n=getComputedStyle(document.body).getPropertyValue("--text-color")||"rgba(0, 0, 0, 0.87)",e=getComputedStyle(document.body).getPropertyValue("--surface-border")||"rgba(0, 46, 139, 1)",r=getComputedStyle(document.body).getPropertyValue("--font-family");return{plugins:{legend:{display:!0,labels:{fontFamily:r,color:n}}},responsive:!0,scales:{y:{ticks:{fontFamily:r,color:n},grid:{color:e}},x:{ticks:{fontFamily:r,color:n},grid:{color:e}}}}}actualiserChambresPropres(n){this.store.dispatch(oi({etat:"Propre"})),this.store.dispatch(ri({etat:"En cours"}))}actualiserSallesPropres(n){this.store.dispatch(ai({etat:"Propre"})),this.store.dispatch(li({etat:"En cours"}))}actualiserNouveauxPasses(n){this.store.dispatch(Kt({nom:"Nouveau"})),this.store.dispatch(Xt({nom:"En cours"}))}actualiserLesPannes(n){this.store.dispatch(ii({date:this.dateDuJour})),this.store.dispatch(ot())}searchPannes(){if(this.rangeDates==null)this.messageService.add({severity:"error",summary:"Oups !",detail:"Veuillez choisir 2 dates !"});else{let n=dt(this.rangeDates[0]),e=dt(this.rangeDates[1]);n=="1-01-1970 0:00"||e=="1-01-1970 0:00"?this.messageService.add({severity:"error",summary:"Oups !",detail:"Veuillez choisir 2 dates !"}):(this.store.dispatch(Sn({dateDebut:n,dateFin:e})),this.store.select(eo).subscribe({next:r=>{this.toutesLesPannesFiltre=r,r.length==0?this.noResult=!0:this.noResult=!1}}))}}static \u0275fac=function(e){return new(e||o)(_(Fi),_(q),_(N),_(B),_(ji),_(Ii))};static \u0275cmp=F({type:o,selectors:[["app-home"]],viewQuery:function(e,r){if(e&1&&tt(Bo,5),e&2){let s;it(s=nt())&&(r.chatContainerViewChild=s.first)}},standalone:!1,decls:134,vars:35,consts:[["header",""],["body",""],[1,"grid"],[1,"col-12","md:col-6","lg:col-3"],[1,"card","flex","flex-column","relati"],[1,"flex","align-items-center","text-gray-700"],[1,"pi","pi-building","text-gray-600","text-4xl","opacity-60"],[1,"flex","flex-column"],[1,"m-0","text-gray-600","pl-3","font-semibold"],[1,"pl-3"],[1,"ml-auto"],["pTooltip","Actualiser","tooltipPosition","bottom","pButton","","pRipple","","type","button","icon","pi pi-sync",1,"p-button-rounded","p-button-text",3,"click"],[1,"flex","justify-content-between","mt-3","flex-wrap","relative","w-full"],[1,"flex","flex-column","justify-content-center","text-left","w-full"],[1,"mb-2","pl-2","font-bold","text-6xl","text-teal-600"],[1,"font-medium","border-round-xs","text-black-alpha-60","p-1","text-sm"],[1,"font-bold","text-2xl","text-teal-900"],[1,"canvas-accueil-top"],["type","line","height","90px","width","100%",3,"data","options","responsive"],[1,"card","flex","flex-column"],[1,"pi","pi-home","text-gray-600","text-4xl","opacity-60"],[1,"mb-2","pl-2","font-bold","text-6xl","text-orange-600"],[1,"font-bold","text-2xl","text-orange-900"],[1,"pi","pi-credit-card","text-gray-600","text-4xl","opacity-60"],[1,"mb-2","pl-2","font-bold","text-6xl","text-green-600"],[1,"font-bold","text-2xl","text-green-900"],[1,"pi","pi-wrench","text-gray-600","text-4xl","opacity-60"],[1,"mb-2","pl-2","font-bold","text-6xl","text-red-500"],[1,"font-bold","text-2xl","text-red-900"],[1,"col-12","lg:col-6"],[1,"card","h-full"],[1,"flex","align-items-center","justify-content-between","mb-3"],[1,"m-0","text-gray-600","font-semibold"],["type","bar","height","400",3,"data","options"],[1,"flex","align-items-center","w-full","justify-content-between","mb-3"],[1,"flex","flex-column","w-full"],[1,"flex","justify-content-between","flex-mobile"],[1,""],[1,"flex","justify-content-between","align-content-center","contenu-empty"],[1,"col-12"],[3,"value","tableStyle","paginator","rows"],[1,"flex","align-items-center","justify-content-between","mb-3","w-full","flex-mobile"],[1,"w-1/3"],[1,"flex","input-date-accueil"],["icon","pi pi-search","pTooltip","Lancez une recherche","tooltipPosition","bottom","severity","info",3,"onClick","rounded"],["variant","in"],["inputId","in_label","styleClass","w-full","showIcon","","iconDisplay","input","selectionMode","range","dateFormat","dd-mm-yy",3,"ngModelChange","ngModel","showTime","readonlyInput","showButtonBar"],["for","in_label"],[3,"value","paginator","rows","tableStyle","rowsPerPageOptions",4,"ngIf"],["class","contenu-empty",4,"ngIf"],["src","../../../../assets/images/empty.svg","alt","Aucun objet pour le moment",1,"aucun-objet"],[1,"p-2","text-center"],["type","doughnut",3,"data","options"],[1,"relative"],["class","point-connexion","tooltipPosition","top",3,"pTooltip",4,"ngIf"],["class","icon-user",4,"ngIf"],["class","image-profil-adminAccueil",3,"src",4,"ngIf"],["icon","pi pi-check","severity","info",3,"rounded","value"],["tooltipPosition","top",1,"point-connexion",3,"pTooltip"],[1,"icon-user"],[1,"pi","pi-user",2,"font-size","1.2rem"],[1,"image-profil-adminAccueil",3,"src"],[3,"value","paginator","rows","tableStyle","rowsPerPageOptions"],["icon","pi pi-exclamation-triangle","severity","warn",3,"value",4,"ngIf"],["severity","info",3,"value"],[1,"font-bold","text-lg","color-blue"],["icon","pi pi-exclamation-triangle","severity","warn",3,"value"],[1,"contenu-empty"],["src","../../../../assets/images/empty.svg","alt","Aucun contnu pour le moment",1,"aucun-contenu"]],template:function(e,r){if(e&1){let s=y();t(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),p(4,"i",6),t(5,"div",7)(6,"h4",8),a(7,"Chambre Propres"),i(),t(8,"p",9),a(9,"Actuellement"),i()(),t(10,"div",10)(11,"button",11),g("click",function(u){return d(s),f(r.actualiserChambresPropres(u))}),i()()(),t(12,"div",12)(13,"div",13)(14,"span",14),a(15),i(),t(16,"span",15),a(17,"Actuellement en cours de nettoyage : "),t(18,"span",16),a(19),i()()(),t(20,"div",17),p(21,"p-chart",18),i()()()(),t(22,"div",3)(23,"div",19)(24,"div",5),p(25,"i",20),t(26,"div",7)(27,"h4",8),a(28,"Salles propres"),i(),t(29,"p",9),a(30,"Actuellement"),i()(),t(31,"div",10)(32,"button",11),g("click",function(u){return d(s),f(r.actualiserSallesPropres(u))}),i()()(),t(33,"div",12)(34,"div",13)(35,"span",21),a(36),i(),t(37,"span",15),a(38,"Actuellement en cours de nettoyage : "),t(39,"span",22),a(40),i()()(),t(41,"div",17),p(42,"p-chart",18),i()()()(),t(43,"div",3)(44,"div",19)(45,"div",5),p(46,"i",23),t(47,"div",7)(48,"h4",8),a(49,"Nouveaux Passes"),i(),t(50,"p",9),a(51,"Pr\xE9sentement"),i()(),t(52,"div",10)(53,"button",11),g("click",function(u){return d(s),f(r.actualiserNouveauxPasses(u))}),i()()(),t(54,"div",12)(55,"div",13)(56,"span",24),a(57),i(),t(58,"span",15),a(59,"Actuellement en cours : "),t(60,"span",25),a(61),i()()(),t(62,"div",17),p(63,"p-chart",18),i()()()(),t(64,"div",3)(65,"div",19)(66,"div",5),p(67,"i",26),t(68,"div",7)(69,"h4",8),a(70,"Probl\xE8mes enr\xE9gistr\xE9s"),i(),t(71,"p",9),a(72,"Aujourd'hui"),i()(),t(73,"div",10)(74,"button",11),g("click",function(u){return d(s),f(r.actualiserLesPannes(u))}),i()()(),t(75,"div",12)(76,"div",13)(77,"span",27),a(78),i(),t(79,"span",15),a(80,"Total des pannes \xE0 ce jour : "),t(81,"span",28),a(82),i()()(),t(83,"div",17),p(84,"p-chart",18),i()()()(),t(85,"div",29)(86,"div",30)(87,"div",31)(88,"h4",32),a(89,"Les marques avec le plus de probl\xE8mes technique"),i()(),p(90,"p-chart",33),i()(),t(91,"div",29)(92,"div",30)(93,"div",34)(94,"div",35)(95,"h4",32),a(96,"Analyse des probl\xE8mes techniques"),i(),t(97,"p"),a(98,"La chambre avec le plus grand nombre de probl\xE8mes techniques"),i()()(),t(99,"div",36)(100,"div",37),a(101," Ce graphique illuste la chambre qui poss\xE8de le plus grand nombre de probl\xE8me technique. "),p(102,"br"),a(103," Si vous avez deux ou plusieurs chambres avec le m\xEAme nombre de pannes, vous verrez ces chambres dans le graphique. "),p(104,"br"),t(105,"p"),a(106,"Mettez la souris sur une couleur pour avoir le num\xE9ro de chambre et le nombre de pannes"),i()(),b(107,zo,4,0,"div",38)(108,Lo,2,2,"div"),i()()(),t(109,"div",39)(110,"div",30)(111,"div",31)(112,"h4",32),a(113,"Nos agents"),i()(),t(114,"p-table",40),b(115,Wo,9,0,"ng-template",null,0,S)(117,Qo,11,7,"ng-template",null,1,S),i()()(),t(119,"div",39)(120,"div",30)(121,"div",41)(122,"div",42)(123,"h4",32),a(124,"Analyse des probl\xE8mes techniques et d\xE9tails"),i()(),t(125,"div",43)(126,"p-button",44),g("onClick",function(){return d(s),f(r.searchPannes())}),i(),t(127,"p-floatlabel",45)(128,"p-datepicker",46),D("ngModelChange",function(u){return d(s),V(r.rangeDates,u)||(r.rangeDates=u),f(u)}),i(),t(129,"label",47),a(130,"S\xE9lectionnez deux dates."),i()()()(),t(131,"div"),b(132,Xo,5,7,"p-table",48)(133,er,4,0,"div",49),i()()()()}e&2&&(l(15),C(r.nosChambresPropres.length),l(4),C(r.nosChambresEnNettoyages.length),l(2),m("data",r.overviewChartData1)("options",r.overviewChartOptions1)("responsive",!0),l(15),C(r.nosSallesPropres.length),l(4),C(r.nosSallesEnNettoyages.length),l(2),m("data",r.overviewChartData2)("options",r.overviewChartOptions2)("responsive",!0),l(15),C(r.nouveauxPasses.length),l(4),C(r.passesEnCours.length),l(2),m("data",r.overviewChartData3)("options",r.overviewChartOptions3)("responsive",!0),l(15),C(r.pannesByDay.length),l(4),C(r.toutesLesPannes.length),l(2),m("data",r.overviewChartData4)("options",r.overviewChartOptions4)("responsive",!0),l(6),m("data",r.panneMarqueData)("options",r.panneMarqueOptions),l(17),le(r.toutesLesPannesParChambre.length==0?107:108),l(7),m("value",r.nosAgents)("tableStyle",v(34,fo))("paginator",!0)("rows",5),l(12),m("rounded",!0),l(2),O("ngModel",r.rangeDates),m("showTime",!0)("readonlyInput",!0)("showButtonBar",!0),l(4),m("ngIf",!r.noResult),l(),m("ngIf",r.toutesLesPannesFiltre.length==0))},dependencies:[k,G,Yi,cn,Hi,M,on,Le,ie,ge,oe,gt],encapsulation:2})};var ho=Z("statut"),Oe=E(ho,o=>o.result),Hs=E(ho,o=>o.statut);var go=()=>({"min-width":"50rem"}),tr=()=>[5,10,20],ir=()=>["nom"],nr=()=>({width:"40rem"}),or=()=>({"1199px":"75vw","575px":"90vw"});function rr(o,n){if(o&1){let e=y();t(0,"div",18)(1,"p-button",19),g("onClick",function(){d(e);let s=h();return f(s.openSaveObjet())}),i(),t(2,"p-iconfield",20)(3,"p-inputicon"),p(4,"i",21),i(),t(5,"input",22,4),g("input",function(){d(e);let s=T(6);h();let c=T(10);return f(c.filterGlobal(s.value,"contains"))}),i()()()}}function ar(o,n){o&1&&(t(0,"tr")(1,"th"),a(2,"Nom des diff\xE9rents \xE9tats"),i(),t(3,"th"),a(4,"Actions"),i()())}function lr(o,n){if(o&1){let e=y();t(0,"tr")(1,"td"),a(2),i(),t(3,"td")(4,"div",23)(5,"p-button",24),g("onClick",function(){let s=d(e).$implicit,c=h();return f(c.openUpdateObjet(s))}),i(),t(6,"p-button",25),g("onClick",function(){let s=d(e).$implicit,c=h();return f(c.deleteObjet(s))}),i()()()()}if(o&2){let e=n.$implicit;l(2),C(e.nom),l(3),m("rounded",!0)("text",!0),l(),m("rounded",!0)("text",!0)}}function sr(o,n){o&1&&(t(0,"div",26),p(1,"img",27),t(2,"h3",28),a(3,"Aucun \xE9tat inscrit pour le moment"),i()())}var Ft=class o{constructor(n,e,r,s){this.fb=n;this.messageService=e;this.confirmationService=r;this.store=s;this.formGroup=this.fb.group({id:[null],nom:[null,P.required]})}unsubscribe$=new A;dataList;objetToUpdate;formGroup;openObjetDialog=!1;ngOnInit(){this.store.dispatch($e()),this.store.select(Oe).subscribe(n=>this.dataList=n)}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}openUpdateObjet(n){this.objetToUpdate=n,this.formGroup.patchValue({id:n.id,nom:n.nom}),this.openObjetDialog=!0}openSaveObjet(){this.formGroup.reset(),this.objetToUpdate=void 0,this.openObjetDialog=!0}onSave(){this.objetToUpdate?.id!=null?this.store.dispatch(zi({inputdata:this.formGroup.value})):this.store.dispatch(Ri({credential:this.formGroup.value})),this.openObjetDialog=!1,this.formGroup.reset()}deleteObjet(n){this.confirmationService.confirm({message:"Voulez-vous supprimer cet \xE9tat ?",header:"Confirmez la suppression",icon:"pi pi-info-circle",acceptButtonStyleClass:"p-button-danger p-button-text",rejectButtonStyleClass:"p-button-text p-button-text",acceptIcon:"none",rejectIcon:"none",accept:()=>{this.store.dispatch(Li({id:n.id}))},reject:()=>{this.messageService.add({severity:"error",summary:"Reject\xE9",detail:"Action annul\xE9e!"})}})}static \u0275fac=function(e){return new(e||o)(_(ae),_(N),_(B),_(q))};static \u0275cmp=F({type:o,selectors:[["app-etats"]],standalone:!1,decls:31,vars:23,consts:[["dt","","gFilter",""],["caption",""],["header",""],["body",""],["myInput",""],["header","Consignes"],[1,"m-0"],[1,"card"],["paginatorPosition","bottom","selectionMode","single",3,"value","tableStyle","paginator","rows","rowsPerPageOptions","globalFilterFields"],["class","flex justify-content-between align-content-center contenu-empty",4,"ngIf"],["id","dialogue-user",3,"visibleChange","header","modal","visible","breakpoints","maximizable"],["autocomplete","off","novalidate","","role","form",1,"w-full",3,"formGroup"],[1,"mb-1"],[1,"w-full"],["name","nom","id","nom","pInputText","","type","text","formControlName","nom","autocomplete","off",1,"w-full"],["htmlFor","nom",1,"form-label","font-bold"],[1,"button-submit","mt-3"],["pTooltip","Enr\xE9gistrer un \xE9tat","tooltipPosition","right","label","Enr\xE9gistrer","severity","info",3,"onClick","disabled"],[1,"flex","justify-content-between"],["icon","pi pi-plus","severity","info","label","Ajouter",3,"onClick"],["iconPosition","left",1,"ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Recherche",3,"input"],[1,"button_action"],["pTooltip","Modifier l'\xE9tat","tooltipPosition","left","icon","pi pi-user-edit","severity","primary",3,"onClick","rounded","text"],["pTooltip","Supprimer l'\xE9tat","tooltipPosition","right","icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],[1,"flex","justify-content-between","align-content-center","contenu-empty"],["src","../../../../assets/images/empty.svg","alt","Aucun objet pour le moment",1,"aucun-objet"],[1,"p-2","text-center"]],template:function(e,r){if(e&1){let s=y();p(0,"p-confirmDialog"),t(1,"p-card",5)(2,"p",6),a(3," Merci de d\xE9finir les diff\xE9rents statuts pour vos chambres, \xE9quipements, objets trouv\xE9s et pannes. Le statut doit \xEAtre renseign\xE9 de la mani\xE8re suivante : "),t(4,"b"),a(5," Enregistr\xE9, En cours, Nouveau, Termin\xE9, Propre, Recouche, D\xE9part, "),i(),a(6," etc. "),i()(),t(7,"div",7)(8,"p-table",8,0),b(11,rr,7,0,"ng-template",null,1,S)(13,ar,5,0,"ng-template",null,2,S)(15,lr,7,5,"ng-template",null,3,S),i(),b(17,sr,4,0,"div",9),i(),t(18,"p-dialog",10),D("visibleChange",function(u){return d(s),V(r.openObjetDialog,u)||(r.openObjetDialog=u),f(u)}),t(19,"form",11),w(20),t(21,"div",12)(22,"label"),a(23,"Nom de l'\xE9tat"),i()(),t(24,"div",13)(25,"p-iftalabel"),p(26,"input",14),t(27,"label",15),a(28,"Nom"),i()()(),I(),t(29,"div",16)(30,"p-button",17),g("onClick",function(){return d(s),f(r.onSave())}),i()()()()}e&2&&(l(8),m("value",r.dataList)("tableStyle",v(17,go))("paginator",!0)("rows",10)("tableStyle",v(18,go))("rowsPerPageOptions",v(19,tr))("globalFilterFields",v(20,ir)),l(9),m("ngIf",r.dataList.length==0),l(),Q(v(21,nr)),Y("header",r.objetToUpdate!=null&&r.objetToUpdate.id?"MISE A JOUR":"ENREGISTREMENT"),m("modal",!0),O("visible",r.openObjetDialog),m("breakpoints",v(22,or))("maximizable",!0),l(),m("formGroup",r.formGroup),l(11),m("disabled",!r.formGroup.valid&&(r.objetToUpdate==null?null:r.objetToUpdate.id)==null))},dependencies:[k,L,R,G,z,X,ee,J,M,he,te,K,H,ie,oe,W,$],encapsulation:2})};var bo=Z("categorie"),De=E(bo,o=>o.result),om=E(bo,o=>o.categorie);var vo=()=>({"min-width":"50rem"}),mr=()=>[5,10,20],pr=()=>["nom"],cr=()=>({width:"40rem"}),ur=()=>({"1199px":"75vw","575px":"90vw"});function dr(o,n){if(o&1){let e=y();t(0,"div",18)(1,"p-button",19),g("onClick",function(){d(e);let s=h();return f(s.openSaveObjet())}),i(),t(2,"p-iconfield",20)(3,"p-inputicon"),p(4,"i",21),i(),t(5,"input",22,4),g("input",function(){d(e);let s=T(6);h();let c=T(16);return f(c.filterGlobal(s.value,"contains"))}),i()()()}}function fr(o,n){o&1&&(t(0,"tr")(1,"th"),a(2,"Nom des cat\xE9gories"),i(),t(3,"th"),a(4,"Actions"),i()())}function hr(o,n){if(o&1){let e=y();t(0,"tr")(1,"td"),a(2),i(),t(3,"td")(4,"div",23)(5,"p-button",24),g("onClick",function(){let s=d(e).$implicit,c=h();return f(c.openUpdateObjet(s))}),i(),t(6,"p-button",25),g("onClick",function(){let s=d(e).$implicit,c=h();return f(c.deleteObjet(s))}),i()()()()}if(o&2){let e=n.$implicit;l(2),C(e.nom),l(3),m("rounded",!0)("text",!0),l(),m("rounded",!0)("text",!0)}}function gr(o,n){o&1&&(t(0,"div",26),p(1,"img",27),t(2,"h3",28),a(3,"Aucune cat\xE9gorie inscrite pour le moment"),i()())}var Ot=class o{constructor(n,e,r,s){this.fb=n;this.messageService=e;this.confirmationService=r;this.store=s;this.formGroup=this.fb.group({id:[null],nom:[null,P.required]})}unsubscribe$=new A;dataList;objetToUpdate;formGroup;openObjetDialog=!1;ngOnInit(){this.store.dispatch(Ui()),this.store.select(De).subscribe(n=>this.dataList=n)}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}openUpdateObjet(n){this.objetToUpdate=n,this.formGroup.patchValue({id:n.id,nom:n.nom}),this.openObjetDialog=!0}openSaveObjet(){this.formGroup.reset(),this.objetToUpdate=void 0,this.openObjetDialog=!0}onSave(){this.objetToUpdate?.id!=null?this.store.dispatch(Gi({inputdata:this.formGroup.value})):this.store.dispatch(qi({credential:this.formGroup.value})),this.openObjetDialog=!1,this.formGroup.reset()}deleteObjet(n){this.confirmationService.confirm({message:"Voulez-vous supprimer cette cat\xE9gorie ?",header:"Confirmez la suppression",icon:"pi pi-info-circle",acceptButtonStyleClass:"p-button-danger p-button-text",rejectButtonStyleClass:"p-button-text p-button-text",acceptIcon:"none",rejectIcon:"none",accept:()=>{this.store.dispatch(Bi({id:n.id}))},reject:()=>{this.messageService.add({severity:"error",summary:"Reject\xE9",detail:"Action annul\xE9e!"})}})}static \u0275fac=function(e){return new(e||o)(_(ae),_(N),_(B),_(q))};static \u0275cmp=F({type:o,selectors:[["app-categories"]],standalone:!1,decls:37,vars:23,consts:[["dt","","gFilter",""],["caption",""],["header",""],["body",""],["myInput",""],["header","Consignes"],[1,"m-0"],[1,"card"],["paginatorPosition","bottom","selectionMode","single",3,"value","tableStyle","paginator","rows","rowsPerPageOptions","globalFilterFields"],["class","flex justify-content-between align-content-center contenu-empty",4,"ngIf"],["id","dialogue-user",3,"visibleChange","header","modal","visible","breakpoints","maximizable"],["autocomplete","off","novalidate","","role","form",1,"w-full",3,"formGroup"],[1,"mb-1"],[1,"w-full"],["name","nom","id","nom","pInputText","","type","text","formControlName","nom","autocomplete","off",1,"w-full"],["htmlFor","nom",1,"form-label","font-bold"],[1,"button-submit","mt-3"],["pTooltip","Enr\xE9gistrer une cat\xE9gorie","tooltipPosition","right","label","Enr\xE9gistrer","severity","info",3,"onClick","disabled"],[1,"flex","justify-content-between"],["icon","pi pi-plus","severity","info","label","Ajouter",3,"onClick"],["iconPosition","left",1,"ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Recherche",3,"input"],[1,"button_action"],["pTooltip","Modifier la cat\xE9gorie","tooltipPosition","left","icon","pi pi-user-edit","severity","primary",3,"onClick","rounded","text"],["pTooltip","Supprimer la cat\xE9gorie","tooltipPosition","right","icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],[1,"flex","justify-content-between","align-content-center","contenu-empty"],["src","../../../../assets/images/empty.svg","alt","Aucun objet pour le moment",1,"aucun-objet"],[1,"p-2","text-center"]],template:function(e,r){if(e&1){let s=y();p(0,"p-confirmDialog"),t(1,"p-card",5)(2,"p",6),a(3," Merci de d\xE9finir les diff\xE9rentes cat\xE9gories pour vos chambres, les types de nettoyage, ainsi que les t\xE2ches. Les cat\xE9gories doivent \xEAtre renseign\xE9es comme suit : "),t(4,"b"),a(5," Standard, Twins, Double, Petit Ponctuel, Nettoyage P\xE9riodique, Auto Contr\xF4le, Travail Journalier, "),i(),a(6," etc. De plus, les t\xE2ches pourront \xEAtre attribu\xE9es \xE0 des sous-cat\xE9gories telles que "),t(7,"b"),a(8,"Chambre"),i(),a(9,", "),t(10,"b"),a(11,"Salle de bain"),i(),a(12,'." '),i()(),t(13,"div",7)(14,"p-table",8,0),b(17,dr,7,0,"ng-template",null,1,S)(19,fr,5,0,"ng-template",null,2,S)(21,hr,7,5,"ng-template",null,3,S),i(),b(23,gr,4,0,"div",9),i(),t(24,"p-dialog",10),D("visibleChange",function(u){return d(s),V(r.openObjetDialog,u)||(r.openObjetDialog=u),f(u)}),t(25,"form",11),w(26),t(27,"div",12)(28,"label"),a(29,"Nom de la cat\xE9gorie"),i()(),t(30,"div",13)(31,"p-iftalabel"),p(32,"input",14),t(33,"label",15),a(34,"Nom"),i()()(),I(),t(35,"div",16)(36,"p-button",17),g("onClick",function(){return d(s),f(r.onSave())}),i()()()()}e&2&&(l(14),m("value",r.dataList)("tableStyle",v(17,vo))("paginator",!0)("rows",10)("tableStyle",v(18,vo))("rowsPerPageOptions",v(19,mr))("globalFilterFields",v(20,pr)),l(9),m("ngIf",r.dataList.length==0),l(),Q(v(21,cr)),Y("header",r.objetToUpdate!=null&&r.objetToUpdate.id?"MISE A JOUR":"ENREGISTREMENT"),m("modal",!0),O("visible",r.openObjetDialog),m("breakpoints",v(22,ur))("maximizable",!0),l(),m("formGroup",r.formGroup),l(11),m("disabled",!r.formGroup.valid&&(r.objetToUpdate==null?null:r.objetToUpdate.id)==null))},dependencies:[k,L,R,G,z,X,ee,J,M,he,te,K,H,ie,oe,W,$],encapsulation:2})};var Co=()=>({"min-width":"50rem"}),br=()=>[5,10,20],vr=()=>["nom"],Cr=()=>({width:"40rem"}),_r=()=>({"1199px":"75vw","575px":"90vw"});function yr(o,n){if(o&1){let e=y();t(0,"div",27)(1,"p-button",28),g("onClick",function(){d(e);let s=h();return f(s.openSaveObjet())}),i(),t(2,"p-iconfield",29)(3,"p-inputicon"),p(4,"i",30),i(),t(5,"input",31,4),g("input",function(){d(e);let s=T(6);h();let c=T(4);return f(c.filterGlobal(s.value,"contains"))}),i()()()}}function Sr(o,n){o&1&&(t(0,"tr")(1,"th"),a(2,"Num\xE9ro"),i(),t(3,"th"),a(4,"Localisation"),i(),t(5,"th"),a(6,"Cat\xE9gorie"),i(),t(7,"th"),a(8,"Etat"),i(),t(9,"th"),a(10,"Actions"),i()())}function xr(o,n){if(o&1){let e=y();t(0,"tr")(1,"td",32),a(2),i(),t(3,"td"),a(4),i(),t(5,"td"),p(6,"p-tag",33),i(),t(7,"td"),p(8,"p-tag",34),i(),t(9,"td")(10,"div",35)(11,"p-button",36),g("onClick",function(){let s=d(e).$implicit,c=h();return f(c.openUpdateObjet(s))}),i(),t(12,"p-button",37),g("onClick",function(){let s=d(e).$implicit,c=h();return f(c.deleteObjet(s))}),i()()()()}if(o&2){let e=n.$implicit;l(2),C(e.numero),l(2),C(e.localisation),l(2),m("value",e.categorie.nom),l(2),m("icon",e.statut.nom=="Propre"?"pi pi-check":e.statut.nom=="En cours"?"pi pi-exclamation-triangle":"pi pi-info-circle")("severity",e.statut.nom=="Propre"?"success":e.statut.nom=="En cours"?"warn":"info")("value",e.statut.nom=="Propre"?"Propre":e.statut.nom=="En cours"?"En cours de nettoyage":e.statut.nom),l(3),m("rounded",!0)("text",!0),l(),m("rounded",!0)("text",!0)}}function Er(o,n){o&1&&(t(0,"div",38),p(1,"img",39),t(2,"h3",40),a(3,"Aucune chambre inscrite pour le moment"),i()())}var Vt=class o{constructor(n,e,r,s){this.fb=n;this.messageService=e;this.confirmationService=r;this.store=s;this.formGroup=this.fb.group({id:[null],numero:[null,P.required],localisation:[null,P.required],categorie:[null,P.required],statut:[null,P.required]})}unsubscribe$=new A;dataList;objetToUpdate;formGroup;openObjetDialog=!1;categories;statuts;satutSelected;ngOnInit(){this.store.dispatch(_t()),this.store.select(It).subscribe(n=>this.dataList=n),this.store.select(De).subscribe(n=>this.categories=n),this.store.select(Oe).subscribe(n=>this.statuts=n)}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}openUpdateObjet(n){this.objetToUpdate=n,this.formGroup.patchValue({id:n.id,numero:n.numero,localisation:n.localisation,categorie:n.categorie?.nom,statut:n.statut?.nom}),this.openObjetDialog=!0}openSaveObjet(){this.formGroup.reset(),this.objetToUpdate=void 0,this.openObjetDialog=!0}onSave(){this.objetToUpdate?.id!=null?this.store.dispatch(Pn({credentials:this.formGroup.value})):this.store.dispatch(In({credentials:this.formGroup.value})),this.openObjetDialog=!1,this.formGroup.reset()}deleteObjet(n){this.confirmationService.confirm({message:"Voulez-vous supprimer cette chambre ?",header:"Confirmez la suppression",icon:"pi pi-info-circle",acceptButtonStyleClass:"p-button-danger p-button-text",rejectButtonStyleClass:"p-button-text p-button-text",acceptIcon:"none",rejectIcon:"none",accept:()=>{this.store.dispatch(Tn({id:n.id}))},reject:()=>{this.messageService.add({severity:"error",summary:"Reject\xE9",detail:"Action annul\xE9e!"})}})}static \u0275fac=function(e){return new(e||o)(_(ae),_(N),_(B),_(q))};static \u0275cmp=F({type:o,selectors:[["app-chambres"]],standalone:!1,decls:56,vars:29,consts:[["dt","","gFilter",""],["caption",""],["header",""],["body",""],["myInput",""],["id","chambre-table",1,"card"],["paginatorPosition","bottom","selectionMode","single",3,"value","tableStyle","paginator","rows","rowsPerPageOptions","globalFilterFields"],["class","flex justify-content-between align-content-center contenu-empty",4,"ngIf"],["id","dialogue-user",3,"visibleChange","header","modal","visible","breakpoints","maximizable"],["autocomplete","off","novalidate","","role","form",1,"w-full",3,"formGroup"],[1,"mb-1"],[1,"w-full"],["name","numero","id","numero","pInputText","","type","text","formControlName","numero","autocomplete","off",1,"w-full"],["htmlFor","numero",1,"form-label","font-bold"],[1,"mb-1","mt-3"],["name","localisation","id","localisation","pInputText","","type","text","formControlName","localisation","autocomplete","off",1,"w-full"],["htmlFor","localisation",1,"form-label","font-bold"],["id","custom-input-select",1,"w-full"],[1,"w-full","md:w-56"],["filterBy","nom","placeholder","S\xE9lectionnez une cat\xE9gorie","formControlName","categorie","inputId","categorie","optionLabel","nom","optionValue","nom","styleClass","w-full",1,"w-full",3,"filter","showClear","options"],["htmlFor","categorie"],["id","categorie-help",1,"opacity-50"],["filterBy","nom","placeholder","S\xE9lectionnez un \xE9tat","formControlName","statut","inputId","statut","optionLabel","nom","optionValue","nom","styleClass","w-full",1,"w-full",3,"filter","showClear","options"],["htmlFor","statut"],["id","statut-help",1,"opacity-50"],[1,"button-submit","mt-3"],["pTooltip","Enr\xE9gistrer une chambre","tooltipPosition","right","label","Enr\xE9gistrer","severity","info",3,"onClick","disabled"],[1,"flex","justify-content-between"],["icon","pi pi-plus","severity","info","label","Ajouter",3,"onClick"],["iconPosition","left",1,"ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Recherche",3,"input"],[1,"font-bold","color-blue"],["severity","info",3,"value"],[3,"icon","severity","value"],[1,"button_action"],["pTooltip","Modifier la chambre","tooltipPosition","left","icon","pi pi-user-edit","severity","primary",3,"onClick","rounded","text"],["pTooltip","Supprimer la chambre","tooltipPosition","right","icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],[1,"flex","justify-content-between","align-content-center","contenu-empty"],["src","../../../../assets/images/empty.svg","alt","Aucun objet pour le moment",1,"aucun-objet"],[1,"p-2","text-center"]],template:function(e,r){if(e&1){let s=y();p(0,"p-confirmDialog"),t(1,"div",5)(2,"p-table",6,0),b(5,yr,7,0,"ng-template",null,1,S)(7,Sr,11,0,"ng-template",null,2,S)(9,xr,13,10,"ng-template",null,3,S),i(),b(11,Er,4,0,"div",7),i(),t(12,"p-dialog",8),D("visibleChange",function(u){return d(s),V(r.openObjetDialog,u)||(r.openObjetDialog=u),f(u)}),t(13,"form",9),w(14),t(15,"div",10)(16,"label"),a(17,"Num\xE9ro de la chambre"),i()(),t(18,"div",11)(19,"p-iftalabel"),p(20,"input",12),t(21,"label",13),a(22,"Numero"),i()()(),I(),w(23),t(24,"div",14)(25,"label"),a(26,"Localisation de la chambre"),i()(),t(27,"div",11)(28,"p-iftalabel"),p(29,"input",15),t(30,"label",16),a(31,"Localisation"),i()()(),I(),w(32),t(33,"div",14)(34,"label"),a(35,"Cat\xE9gorie de la chambre"),i()(),t(36,"div",17)(37,"p-iftalabel",18),p(38,"p-select",19),t(39,"label",20),a(40,"Cat\xE9gorie"),i()()(),t(41,"small",21),a(42,"Choisissez la cat\xE9gorie de la chambre"),i(),I(),w(43),t(44,"div",14)(45,"label"),a(46,"Etat de la chambre"),i()(),t(47,"div",17)(48,"p-iftalabel",18),p(49,"p-select",22),t(50,"label",23),a(51,"Etat"),i()()(),t(52,"small",24),a(53,"Choisissez l'\xE9tat de la chambre"),i(),I(),t(54,"div",25)(55,"p-button",26),g("onClick",function(){return d(s),f(r.onSave())}),i()()()()}e&2&&(l(2),m("value",r.dataList)("tableStyle",v(23,Co))("paginator",!0)("rows",10)("tableStyle",v(24,Co))("rowsPerPageOptions",v(25,br))("globalFilterFields",v(26,vr)),l(9),m("ngIf",r.dataList.length==0),l(),Q(v(27,Cr)),Y("header",r.objetToUpdate!=null&&r.objetToUpdate.id?"MISE A JOUR":"ENREGISTREMENT"),m("modal",!0),O("visible",r.openObjetDialog),m("breakpoints",v(28,_r))("maximizable",!0),l(),m("formGroup",r.formGroup),l(25),m("filter",!0)("showClear",!0)("options",r.categories),l(11),m("filter",!0)("showClear",!0)("options",r.statuts),l(6),m("disabled",!r.formGroup.valid&&(r.objetToUpdate==null?null:r.objetToUpdate.id)==null))},dependencies:[k,me,L,R,G,z,X,ee,J,M,te,K,H,ie,ge,oe,W,$],encapsulation:2})};var _o=()=>({"min-width":"50rem"}),wr=()=>[5,10,20],Ir=()=>["nom"],Pr=()=>({width:"40rem"}),Tr=()=>({"1199px":"75vw","575px":"90vw"});function jr(o,n){if(o&1){let e=y();t(0,"div",24)(1,"p-button",25),g("onClick",function(){d(e);let s=h();return f(s.openSaveObjet())}),i(),t(2,"p-iconfield",26)(3,"p-inputicon"),p(4,"i",27),i(),t(5,"input",28,4),g("input",function(){d(e);let s=T(6);h();let c=T(4);return f(c.filterGlobal(s.value,"contains"))}),i()()()}}function Fr(o,n){o&1&&(t(0,"tr")(1,"th"),a(2,"Num\xE9ro"),i(),t(3,"th"),a(4,"Description"),i(),t(5,"th"),a(6,"Etat"),i(),t(7,"th"),a(8,"Actions"),i()())}function Or(o,n){if(o&1){let e=y();t(0,"tr")(1,"td",29),a(2),i(),t(3,"td"),a(4),i(),t(5,"td"),p(6,"p-tag",30),i(),t(7,"td")(8,"div",31)(9,"p-button",32),g("onClick",function(){let s=d(e).$implicit,c=h();return f(c.openUpdateObjet(s))}),i(),t(10,"p-button",33),g("onClick",function(){let s=d(e).$implicit,c=h();return f(c.deleteObjet(s))}),i()()()()}if(o&2){let e=n.$implicit;l(2),C(e.numero),l(2),C(e.description),l(2),m("icon",e.statut.nom=="Propre"?"pi pi-check":e.statut.nom=="En cours"?"pi pi-exclamation-triangle":"pi pi-info-circle")("severity",e.statut.nom=="Propre"?"success":e.statut.nom=="En cours"?"warn":"info")("value",e.statut.nom=="Propre"?"Propre":e.statut.nom=="En cours"?"En cours de nettoyage":e.statut.nom),l(3),m("rounded",!0)("text",!0),l(),m("rounded",!0)("text",!0)}}function Vr(o,n){o&1&&(t(0,"div",34),p(1,"img",35),t(2,"h3",36),a(3,"Aucune salle inscrite pour le moment"),i()())}var Dt=class o{constructor(n,e,r,s){this.fb=n;this.messageService=e;this.confirmationService=r;this.store=s;this.formGroup=this.fb.group({id:[null],numero:[null,P.required],description:[null,P.required],statut:[null,P.required]})}unsubscribe$=new A;dataList;objetToUpdate;formGroup;openObjetDialog=!1;statuts;ngOnInit(){this.store.dispatch(yt()),this.store.select(Tt).subscribe(n=>this.dataList=n),this.store.select(Oe).subscribe(n=>this.statuts=n)}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}openUpdateObjet(n){this.objetToUpdate=n,this.formGroup.patchValue({id:n.id,numero:n.numero,description:n.description,statut:n.statut?.nom}),this.openObjetDialog=!0}openSaveObjet(){this.formGroup.reset(),this.objetToUpdate=void 0,this.openObjetDialog=!0}onSave(){this.objetToUpdate?.id!=null?this.store.dispatch(Fn({credentials:this.formGroup.value})):this.store.dispatch(jn({credentials:this.formGroup.value})),this.openObjetDialog=!1,this.formGroup.reset()}deleteObjet(n){this.confirmationService.confirm({message:"Voulez-vous supprimer cette salle ?",header:"Confirmez la suppression",icon:"pi pi-info-circle",acceptButtonStyleClass:"p-button-danger p-button-text",rejectButtonStyleClass:"p-button-text p-button-text",acceptIcon:"none",rejectIcon:"none",accept:()=>{this.store.dispatch(On({id:n.id}))},reject:()=>{this.messageService.add({severity:"error",summary:"Reject\xE9",detail:"Action annul\xE9e!"})}})}static \u0275fac=function(e){return new(e||o)(_(ae),_(N),_(B),_(q))};static \u0275cmp=F({type:o,selectors:[["app-salles"]],standalone:!1,decls:45,vars:26,consts:[["dt","","gFilter",""],["caption",""],["header",""],["body",""],["myInput",""],[1,"card"],["paginatorPosition","bottom","selectionMode","single",3,"value","tableStyle","paginator","rows","rowsPerPageOptions","globalFilterFields"],["class","flex justify-content-between align-content-center contenu-empty",4,"ngIf"],["id","dialogue-user",3,"visibleChange","header","modal","visible","breakpoints","maximizable"],["autocomplete","off","novalidate","","role","form",1,"w-full",3,"formGroup"],[1,"mb-1"],[1,"w-full"],["name","numero","id","numero","pInputText","","type","text","formControlName","numero","autocomplete","off",1,"w-full"],["htmlFor","numero",1,"form-label","font-bold"],[1,"mb-1","mt-3"],["name","description","id","description","pInputText","","type","text","formControlName","description","autocomplete","off",1,"w-full"],["htmlFor","description",1,"form-label","font-bold"],["id","custom-input-select",1,"w-full"],[1,"w-full","md:w-56"],["filterBy","nom","placeholder","S\xE9lectionnez un \xE9tat","formControlName","statut","inputId","statut","optionLabel","nom","optionValue","nom","styleClass","w-full",1,"w-full",3,"filter","showClear","options"],["htmlFor","statut"],["id","statut-help",1,"opacity-50"],[1,"button-submit","mt-3"],["pTooltip","Enr\xE9gistrer une salle","tooltipPosition","right","label","Enr\xE9gistrer","severity","info",3,"onClick","disabled"],[1,"flex","justify-content-between"],["icon","pi pi-plus","severity","info","label","Ajouter",3,"onClick"],["iconPosition","left",1,"ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Recherche",3,"input"],[1,"font-bold","text-lg","color-blue"],[3,"icon","severity","value"],[1,"button_action"],["pTooltip","Modifier la salle","tooltipPosition","left","icon","pi pi-user-edit","severity","primary",3,"onClick","rounded","text"],["pTooltip","Supprimer la salle","tooltipPosition","right","icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],[1,"flex","justify-content-between","align-content-center","contenu-empty"],["src","../../../../assets/images/empty.svg","alt","Aucun objet pour le moment",1,"aucun-objet"],[1,"p-2","text-center"]],template:function(e,r){if(e&1){let s=y();p(0,"p-confirmDialog"),t(1,"div",5)(2,"p-table",6,0),b(5,jr,7,0,"ng-template",null,1,S)(7,Fr,9,0,"ng-template",null,2,S)(9,Or,11,9,"ng-template",null,3,S),i(),b(11,Vr,4,0,"div",7),i(),t(12,"p-dialog",8),D("visibleChange",function(u){return d(s),V(r.openObjetDialog,u)||(r.openObjetDialog=u),f(u)}),t(13,"form",9),w(14),t(15,"div",10)(16,"label"),a(17,"Num\xE9ro de la salle"),i()(),t(18,"div",11)(19,"p-iftalabel"),p(20,"input",12),t(21,"label",13),a(22,"Numero"),i()()(),I(),w(23),t(24,"div",14)(25,"label"),a(26,"Description de la salle"),i()(),t(27,"div",11)(28,"p-iftalabel"),p(29,"input",15),t(30,"label",16),a(31,"Description"),i()()(),I(),w(32),t(33,"div",14)(34,"label"),a(35,"Etat de la salle"),i()(),t(36,"div",17)(37,"p-iftalabel",18),p(38,"p-select",19),t(39,"label",20),a(40,"Etat"),i()()(),t(41,"small",21),a(42,"Choisissez l'\xE9tat de la salle"),i(),I(),t(43,"div",22)(44,"p-button",23),g("onClick",function(){return d(s),f(r.onSave())}),i()()()()}e&2&&(l(2),m("value",r.dataList)("tableStyle",v(20,_o))("paginator",!0)("rows",10)("tableStyle",v(21,_o))("rowsPerPageOptions",v(22,wr))("globalFilterFields",v(23,Ir)),l(9),m("ngIf",r.dataList.length==0),l(),Q(v(24,Pr)),Y("header",r.objetToUpdate!=null&&r.objetToUpdate.id?"MISE A JOUR":"ENREGISTREMENT"),m("modal",!0),O("visible",r.openObjetDialog),m("breakpoints",v(25,Tr))("maximizable",!0),l(),m("formGroup",r.formGroup),l(25),m("filter",!0)("showClear",!0)("options",r.statuts),l(6),m("disabled",!r.formGroup.valid&&(r.objetToUpdate==null?null:r.objetToUpdate.id)==null))},dependencies:[k,me,L,R,G,z,X,ee,J,M,te,K,H,ie,ge,oe,W,$],encapsulation:2})};var yo=Z("nettoyage"),So=Z("nettoyageChoisie"),kt=E(yo,o=>o.result),Om=E(yo,o=>o.nettoyage),Vm=E(So,o=>o.nettoyageChoisie),Dm=E(So,o=>o.result);var xo=()=>({"min-width":"50rem"}),Dr=()=>[5,10,20],kr=()=>["action","categorie.nom"],Mr=()=>({width:"40rem"}),Ar=()=>({"1199px":"75vw","575px":"90vw"});function Nr(o,n){if(o&1){let e=y();t(0,"div",24)(1,"p-button",25),g("onClick",function(){d(e);let s=h();return f(s.openSaveObjet())}),i(),t(2,"p-iconfield",26)(3,"p-inputicon"),p(4,"i",27),i(),t(5,"input",28,4),g("input",function(){d(e);let s=T(6);h();let c=T(15);return f(c.filterGlobal(s.value,"contains"))}),i()()()}}function qr(o,n){o&1&&(t(0,"tr")(1,"th"),a(2,"Action du nettoyage"),i(),t(3,"th"),a(4,"Cat\xE9gorie"),i(),t(5,"th"),a(6,"Actions"),i()())}function Ur(o,n){if(o&1){let e=y();t(0,"tr")(1,"td"),a(2),i(),t(3,"td"),a(4),i(),t(5,"td")(6,"div",29)(7,"p-button",30),g("onClick",function(){let s=d(e).$implicit,c=h();return f(c.openUpdateObjet(s))}),i(),t(8,"p-button",31),g("onClick",function(){let s=d(e).$implicit,c=h();return f(c.deleteObjet(s))}),i()()()()}if(o&2){let e=n.$implicit;l(2),C(e.action),l(2),C(e.categorie.nom),l(3),m("rounded",!0)("text",!0),l(),m("rounded",!0)("text",!0)}}function Gr(o,n){o&1&&(t(0,"div",32),p(1,"img",33),t(2,"h3",34),a(3,"Aucun nettoyage inscrit pour le moment"),i()())}var Mt=class o{constructor(n,e,r,s){this.fb=n;this.messageService=e;this.confirmationService=r;this.store=s;this.formGroup=this.fb.group({id:[null],action:[null,P.required],categorie:[null,P.required]})}unsubscribe$=new A;dataList;objetToUpdate;formGroup;openObjetDialog=!1;categories;ngOnInit(){this.store.dispatch(St()),this.store.select(kt).subscribe(n=>this.dataList=n),this.store.select(De).subscribe(n=>this.categories=n)}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}openUpdateObjet(n){this.objetToUpdate=n,this.formGroup.patchValue({id:n.id,action:n.action,type:n.categorie?.nom}),this.openObjetDialog=!0}openSaveObjet(){this.formGroup.reset(),this.objetToUpdate=void 0,this.openObjetDialog=!0}onSave(){this.objetToUpdate?.id!=null?this.store.dispatch(Dn({inputdata:this.formGroup.value})):this.store.dispatch(Vn({credential:this.formGroup.value})),this.openObjetDialog=!1,this.formGroup.reset()}deleteObjet(n){this.confirmationService.confirm({message:"Voulez-vous supprimer ce nettoyage ?",header:"Confirmez la suppression",icon:"pi pi-info-circle",acceptButtonStyleClass:"p-button-danger p-button-text",rejectButtonStyleClass:"p-button-text p-button-text",acceptIcon:"none",rejectIcon:"none",accept:()=>{this.store.dispatch(kn({id:n.id}))},reject:()=>{this.messageService.add({severity:"error",summary:"Reject\xE9",detail:"Action annul\xE9e!"})}})}static \u0275fac=function(e){return new(e||o)(_(ae),_(N),_(B),_(q))};static \u0275cmp=F({type:o,selectors:[["app-nettoyages"]],standalone:!1,decls:47,vars:26,consts:[["dt","","gFilter",""],["caption",""],["header",""],["body",""],["myInput",""],["header","Consignes"],[1,"m-0"],[1,"card"],["paginatorPosition","bottom","selectionMode","single",3,"value","tableStyle","paginator","rows","rowsPerPageOptions","globalFilterFields"],["class","flex justify-content-between align-content-center contenu-empty",4,"ngIf"],["id","dialogue-user",3,"visibleChange","header","modal","visible","breakpoints","maximizable"],["autocomplete","off","novalidate","","role","form",1,"w-full",3,"formGroup"],[1,"mb-1"],[1,"w-full"],["name","action","id","action","pInputText","","type","text","formControlName","action","autocomplete","off",1,"w-full"],["htmlFor","action",1,"form-label","font-bold"],[1,"mb-1","mt-3"],["id","custom-input-select",1,"w-full"],[1,"w-full","md:w-56"],["filterBy","nom","placeholder","S\xE9lectionnez une cat\xE9gorie","formControlName","categorie","inputId","nom","optionLabel","nom","optionValue","nom","styleClass","w-full",1,"w-full",3,"filter","showClear","options"],["htmlFor","nom"],["id","type-help",1,"opacity-50"],[1,"button-submit","mt-3"],["pTooltip","Enr\xE9gistrer un nettoyage","tooltipPosition","right","label","Enr\xE9gistrer","severity","info",3,"onClick","disabled"],[1,"flex","justify-content-between"],["icon","pi pi-plus","severity","info","label","Ajouter",3,"onClick"],["iconPosition","left",1,"ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Recherche",3,"input"],[1,"button_action"],["pTooltip","Modifier le nettoyage","tooltipPosition","left","icon","pi pi-user-edit","severity","primary",3,"onClick","rounded","text"],["pTooltip","Supprimer le nettoyage","tooltipPosition","right","icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],[1,"flex","justify-content-between","align-content-center","contenu-empty"],["src","../../../../assets/images/empty.svg","alt","Aucun objet pour le moment",1,"aucun-objet"],[1,"p-2","text-center"]],template:function(e,r){if(e&1){let s=y();p(0,"p-confirmDialog"),t(1,"p-card",5)(2,"p",6),a(3," Seront consid\xE9r\xE9es comme des nettoyages toutes les actions effectu\xE9es sur des objets ou des \xE9quipements, telles que : "),t(4,"b"),a(5,"Plinthes, Bouche a\xE9ration, Siphon Lavabo, Encadrement fen\xEAtre, etc."),i(),p(6,"br"),a(7," Si le nettoyage fait partie de la cat\xE9gorie "),t(8,"b"),a(9,"'Petit Ponctuel' ou 'Nettoyage P\xE9riodique'"),i(),a(10,", vous choisirez cette cat\xE9gorie lors de la cr\xE9ation du nettoyage. "),p(11,"br"),i()(),t(12,"div",7)(13,"p-table",8,0),b(16,Nr,7,0,"ng-template",null,1,S)(18,qr,7,0,"ng-template",null,2,S)(20,Ur,9,6,"ng-template",null,3,S),i(),b(22,Gr,4,0,"div",9),i(),t(23,"p-dialog",10),D("visibleChange",function(u){return d(s),V(r.openObjetDialog,u)||(r.openObjetDialog=u),f(u)}),t(24,"form",11),w(25),t(26,"div",12)(27,"label"),a(28,"Action du nettoyage"),i()(),t(29,"div",13)(30,"p-iftalabel"),p(31,"input",14),t(32,"label",15),a(33,"Action"),i()()(),I(),w(34),t(35,"div",16)(36,"label"),a(37,"Cat\xE9gorie"),i()(),t(38,"div",17)(39,"p-iftalabel",18),p(40,"p-select",19),t(41,"label",20),a(42,"Associez une cat\xE9gorie \xE0 cette action"),i()()(),t(43,"small",21),a(44,"Choisissez une cat\xE9gorie"),i(),I(),t(45,"div",22)(46,"p-button",23),g("onClick",function(){return d(s),f(r.onSave())}),i()()()()}e&2&&(l(13),m("value",r.dataList)("tableStyle",v(20,xo))("paginator",!0)("rows",10)("tableStyle",v(21,xo))("rowsPerPageOptions",v(22,Dr))("globalFilterFields",v(23,kr)),l(9),m("ngIf",r.dataList.length==0),l(),Q(v(24,Mr)),Y("header",r.objetToUpdate!=null&&r.objetToUpdate.id?"MISE A JOUR":"ENREGISTREMENT"),m("modal",!0),O("visible",r.openObjetDialog),m("breakpoints",v(25,Ar))("maximizable",!0),l(),m("formGroup",r.formGroup),l(16),m("filter",!0)("showClear",!0)("options",r.categories),l(6),m("disabled",!r.formGroup.valid&&(r.objetToUpdate==null?null:r.objetToUpdate.id)==null))},dependencies:[k,me,L,R,G,z,X,ee,J,M,he,te,K,H,ie,oe,W,$],encapsulation:2})};var Eo=Z("tache"),wo=Z("tacheChoisie"),At=E(Eo,o=>o.result),Lm=E(Eo,o=>o.tache),Wm=E(wo,o=>o.tacheChoisie),$m=E(wo,o=>o.result);var Io=()=>({"min-width":"50rem"}),Br=()=>[5,10,20],Rr=()=>["action","categorie.nom","sous_categorie.nom"],zr=()=>({width:"40rem"}),Lr=()=>({"1199px":"75vw","575px":"90vw"});function Wr(o,n){if(o&1){let e=y();t(0,"div",25)(1,"p-button",26),g("onClick",function(){d(e);let s=h();return f(s.openSaveObjet())}),i(),t(2,"p-iconfield",27)(3,"p-inputicon"),p(4,"i",28),i(),t(5,"input",29,4),g("input",function(){d(e);let s=T(6);h();let c=T(28);return f(c.filterGlobal(s.value,"contains"))}),i()()()}}function $r(o,n){o&1&&(t(0,"tr")(1,"th"),a(2,"Action de la t\xE2che"),i(),t(3,"th"),a(4,"Cat\xE9gorie"),i(),t(5,"th"),a(6,"Sous Cat\xE9gorie"),i(),t(7,"th"),a(8,"Actions"),i()())}function Jr(o,n){if(o&1){let e=y();t(0,"tr")(1,"td"),a(2),i(),t(3,"td"),a(4),i(),t(5,"td"),a(6),i(),t(7,"td")(8,"div",30)(9,"p-button",31),g("onClick",function(){let s=d(e).$implicit,c=h();return f(c.openUpdateObjet(s))}),i(),t(10,"p-button",32),g("onClick",function(){let s=d(e).$implicit,c=h();return f(c.deleteObjet(s))}),i()()()()}if(o&2){let e=n.$implicit;l(2),C(e.action),l(2),C(e.categorie.nom),l(2),C(e.sous_categorie==null?null:e.sous_categorie.nom),l(3),m("rounded",!0)("text",!0),l(),m("rounded",!0)("text",!0)}}function Hr(o,n){o&1&&(t(0,"div",33),p(1,"img",34),t(2,"h3",35),a(3,"Aucune t\xE2che inscrite pour le moment"),i()())}var Nt=class o{constructor(n,e,r,s){this.fb=n;this.messageService=e;this.confirmationService=r;this.store=s;this.formGroup=this.fb.group({id:[null],action:[null,P.required],categorie:[null,P.required],sous_categorie:[null]})}unsubscribe$=new A;dataList;objetToUpdate;formGroup;openObjetDialog=!1;categories;ngOnInit(){this.store.dispatch(xt()),this.store.select(At).subscribe(n=>this.dataList=n),this.store.select(De).subscribe(n=>this.categories=n)}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}openUpdateObjet(n){this.objetToUpdate=n,this.formGroup.patchValue({id:n.id,action:n.action,categorie:n.categorie?.nom,sous_categorie:n.sous_categorie?.nom}),this.openObjetDialog=!0}openSaveObjet(){this.formGroup.reset(),this.objetToUpdate=void 0,this.openObjetDialog=!0}onSave(){this.objetToUpdate?.id!=null?this.store.dispatch(An({inputdata:this.formGroup.value})):this.store.dispatch(Mn({credential:this.formGroup.value})),this.openObjetDialog=!1,this.formGroup.reset()}deleteObjet(n){this.confirmationService.confirm({message:"Voulez-vous supprimer cette t\xE2che ?",header:"Confirmez la suppression",icon:"pi pi-info-circle",acceptButtonStyleClass:"p-button-danger p-button-text",rejectButtonStyleClass:"p-button-text p-button-text",acceptIcon:"none",rejectIcon:"none",accept:()=>{this.store.dispatch(Nn({id:n.id}))},reject:()=>{this.messageService.add({severity:"error",summary:"Reject\xE9",detail:"Action annul\xE9e!"})}})}static \u0275fac=function(e){return new(e||o)(_(ae),_(N),_(B),_(q))};static \u0275cmp=F({type:o,selectors:[["app-taches"]],standalone:!1,decls:71,vars:29,consts:[["dt","","gFilter",""],["caption",""],["header",""],["body",""],["myInput",""],["header","Consignes"],[1,"m-0"],[1,"card"],["paginatorPosition","bottom","selectionMode","single",3,"value","tableStyle","paginator","rows","rowsPerPageOptions","globalFilterFields"],["class","flex justify-content-between align-content-center contenu-empty",4,"ngIf"],["id","dialogue-user",3,"visibleChange","header","modal","visible","breakpoints","maximizable"],["autocomplete","off","novalidate","","role","form",1,"w-full",3,"formGroup"],[1,"mb-1"],[1,"w-full"],["name","action","id","action","pInputText","","type","text","formControlName","action","autocomplete","off",1,"w-full"],["htmlFor","action",1,"form-label","font-bold"],[1,"mb-1","mt-3"],["id","custom-input-select",1,"w-full"],[1,"w-full","md:w-56"],["filterBy","nom","placeholder","S\xE9lectionnez une cat\xE9gorie","formControlName","categorie","inputId","nom","optionLabel","nom","optionValue","nom","styleClass","w-full",1,"w-full",3,"filter","showClear","options"],["htmlFor","nom"],["id","type-help",1,"opacity-50"],["filterBy","nom","placeholder","S\xE9lectionnez une sous cat\xE9gorie","formControlName","sous_categorie","inputId","nom","optionLabel","nom","optionValue","nom","styleClass","w-full",1,"w-full",3,"filter","showClear","options"],[1,"button-submit","mt-3"],["pTooltip","Enr\xE9gistrer une t\xE2che","tooltipPosition","right","label","Enr\xE9gistrer","severity","info",3,"onClick","disabled"],[1,"flex","justify-content-between"],["icon","pi pi-plus","severity","info","label","Ajouter",3,"onClick"],["iconPosition","left",1,"ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Recherche",3,"input"],[1,"button_action"],["pTooltip","Modifier la t\xE2che","tooltipPosition","left","icon","pi pi-user-edit","severity","primary",3,"onClick","rounded","text"],["pTooltip","Supprimer la t\xE2che","tooltipPosition","right","icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],[1,"flex","justify-content-between","align-content-center","contenu-empty"],["src","../../../../assets/images/empty.svg","alt","Aucun objet pour le moment",1,"aucun-objet"],[1,"p-2","text-center"]],template:function(e,r){if(e&1){let s=y();p(0,"p-confirmDialog"),t(1,"p-card",5)(2,"p",6),a(3," Seront consid\xE9r\xE9es comme des t\xE2ches toutes les actions effectu\xE9es, telles que : "),t(4,"b"),a(5,"ouvrir la fen\xEAtre, enlever les draps sales, v\xE9rifier l'al\xE8ze (poils), faire le lit, etc."),i(),p(6,"br"),a(7," Si la t\xE2che fait partie de la cat\xE9gorie "),t(8,"b"),a(9,"'Travaux Journaliers'"),i(),a(10,", vous choisirez cette cat\xE9gorie lors de la cr\xE9ation de la t\xE2che. "),p(11,"br"),a(12," Si l'action de la t\xE2che \xE0 cr\xE9er est effectu\xE9e dans une "),t(13,"b"),a(14,"Chambre"),i(),a(15," ou une "),t(16,"b"),a(17,"Salle de bain"),i(),a(18,", vous choisirez la sous-cat\xE9gorie appropri\xE9e : "),t(19,"b"),a(20,"Chambre"),i(),a(21," ou "),t(22,"b"),a(23,"Salle de bain"),i(),a(24,". "),i()(),t(25,"div",7)(26,"p-table",8,0),b(29,Wr,7,0,"ng-template",null,1,S)(31,$r,9,0,"ng-template",null,2,S)(33,Jr,11,7,"ng-template",null,3,S),i(),b(35,Hr,4,0,"div",9),i(),t(36,"p-dialog",10),D("visibleChange",function(u){return d(s),V(r.openObjetDialog,u)||(r.openObjetDialog=u),f(u)}),t(37,"form",11),w(38),t(39,"div",12)(40,"label"),a(41,"Action de la t\xE2che"),i()(),t(42,"div",13)(43,"p-iftalabel"),p(44,"input",14),t(45,"label",15),a(46,"Action"),i()()(),I(),w(47),t(48,"div",16)(49,"label"),a(50,"Cat\xE9gorie"),i()(),t(51,"div",17)(52,"p-iftalabel",18),p(53,"p-select",19),t(54,"label",20),a(55,"Associez cette t\xE2che \xE0 une cat\xE9gorie"),i()()(),t(56,"small",21),a(57,"Choisissez une cat\xE9gorie"),i(),I(),w(58),t(59,"div",16)(60,"label"),a(61,"Sous cat\xE9gorie"),i()(),t(62,"div",17)(63,"p-iftalabel",18),p(64,"p-select",22),t(65,"label",20),a(66,"S\xE9lectionnez une sous cat\xE9gorie"),i()()(),t(67,"small",21),a(68,"Choisissez une sous cat\xE9gorie"),i(),I(),t(69,"div",23)(70,"p-button",24),g("onClick",function(){return d(s),f(r.onSave())}),i()()()()}e&2&&(l(26),m("value",r.dataList)("tableStyle",v(23,Io))("paginator",!0)("rows",10)("tableStyle",v(24,Io))("rowsPerPageOptions",v(25,Br))("globalFilterFields",v(26,Rr)),l(9),m("ngIf",r.dataList.length==0),l(),Q(v(27,zr)),Y("header",r.objetToUpdate!=null&&r.objetToUpdate.id?"MISE A JOUR":"ENREGISTREMENT"),m("modal",!0),O("visible",r.openObjetDialog),m("breakpoints",v(28,Lr))("maximizable",!0),l(),m("formGroup",r.formGroup),l(16),m("filter",!0)("showClear",!0)("options",r.categories),l(11),m("filter",!0)("showClear",!0)("options",r.categories),l(6),m("disabled",!r.formGroup.valid&&(r.objetToUpdate==null?null:r.objetToUpdate.id)==null))},dependencies:[k,me,L,R,G,z,X,ee,J,M,he,te,K,H,ie,oe,W,$],encapsulation:2})};var Po=()=>({"min-width":"50rem"}),Zr=()=>[5,10,20],Kr=()=>["id","agent.nom","statut.nom","dateNettoyage"],Xr=()=>({width:"50rem"}),ea=()=>({"1199px":"75vw","575px":"100%"});function ta(o,n){if(o&1){let e=y();t(0,"div",15)(1,"p-button",16),g("onClick",function(){d(e);let s=h();return f(s.openSavePasse())}),i(),t(2,"p-iconfield",17)(3,"p-inputicon"),p(4,"i",18),i(),t(5,"input",19,6),g("input",function(){d(e);let s=T(6);h();let c=T(4);return f(c.filterGlobal(s.value,"contains"))}),i()()()}}function ia(o,n){o&1&&(t(0,"tr"),p(1,"th",20),t(2,"th"),a(3,"N\xB0 du Passe"),i(),t(4,"th"),a(5,"Nom de la femme de chambre"),i(),t(6,"th"),a(7,"Nom de la gouvernante"),i(),t(8,"th"),a(9,"Etat du passe"),i(),t(10,"th"),a(11,"Date de passage"),i(),t(12,"th"),a(13,"Actions"),i()())}function na(o,n){if(o&1){let e=y();t(0,"tr")(1,"td"),p(2,"p-button",21),i(),t(3,"td"),a(4),i(),t(5,"td"),a(6),i(),t(7,"td"),a(8),i(),t(9,"td"),p(10,"p-tag",22),i(),t(11,"td"),a(12),i(),t(13,"td")(14,"div",23)(15,"p-button",24),g("onClick",function(){let s=d(e).$implicit,c=h();return f(c.openUpdatePasse(s))}),i(),t(16,"p-button",25),g("onClick",function(){let s=d(e).$implicit,c=h();return f(c.deletePasse(s))}),i()()()()}if(o&2){let e=n.$implicit,r=n.expanded;l(2),m("pRowToggler",e)("text",!0)("rounded",!0)("plain",!0)("icon",r?"pi pi-chevron-down":"pi pi-chevron-right"),l(2),C(e.id),l(2),C(e.agent.nom),l(2),C(e.gouvernante.nom),l(2),m("rounded",!0)("icon",e.statut.nom=="Termin\xE9"?"pi pi-check":e.statut.nom=="Nouveau"?"pi pi-info-circle":"pi pi-exclamation-triangle")("severity",e.statut.nom=="Termin\xE9"?"success":e.statut.nom=="Nouveau"?"info":"warn")("value",e.statut.nom=="Termin\xE9"?"Termin\xE9":e.statut.nom=="Nouveau"?"Nouveau":"En cours"),l(2),C(e.dateNettoyage),l(3),m("rounded",!0)("text",!0),l(),m("rounded",!0)("text",!0)}}function oa(o,n){o&1&&(t(0,"tr")(1,"th"),a(2,"Action"),i(),t(3,"th"),a(4,"Cat\xE9gorie"),i()())}function ra(o,n){if(o&1&&(t(0,"tr")(1,"td"),a(2),i(),t(3,"td"),a(4),i()()),o&2){let e=n.$implicit;l(2),C((e.nettoyage==null?null:e.nettoyage.action)||"Non sp\xE9cifi\xE9"),l(2),C((e.nettoyage==null||e.nettoyage.categorie==null?null:e.nettoyage.categorie.nom)||"Non sp\xE9cifi\xE9")}}function aa(o,n){if(o&1&&(t(0,"tr")(1,"td",27)(2,"p-table",28),b(3,oa,5,0,"ng-template",29)(4,ra,5,2,"ng-template",null,3,S),i()()()),o&2){let e=h().$implicit;l(2),m("value",e==null?null:e.nettoyageChoisie)}}function la(o,n){o&1&&(t(0,"tr")(1,"th"),a(2,"Chambres"),i(),t(3,"th"),a(4,"Etat"),i(),t(5,"th"),a(6,"Heure de d\xE9but"),i(),t(7,"th"),a(8,"Heure de fin"),i(),t(9,"th"),a(10,"Dur\xE9e de nettoyage"),i(),t(11,"th"),a(12,"Nombre de pannes"),i(),t(13,"th"),a(14,"Nombre d'objets"),i()())}function sa(o,n){if(o&1&&(t(0,"tr")(1,"td"),a(2),i(),t(3,"td"),p(4,"p-tag",22),i(),t(5,"td"),a(6),i(),t(7,"td"),a(8),i(),t(9,"td"),a(10),i(),t(11,"td"),p(12,"p-tag",22),i(),t(13,"td"),p(14,"p-tag",22),i()()),o&2){let e=n.$implicit;l(2),C(e.chambre.numero),l(2),m("rounded",!0)("icon",e.chambre.statut.nom=="Propre"?"pi pi-check":e.chambre.statut.nom=="En cours"?"pi pi-exclamation-triangle":"pi pi-info-circle")("severity",e.chambre.statut.nom=="Propre"?"success":e.chambre.statut.nom=="En cours"?"warn":"info")("value",e.chambre.statut.nom=="Propre"?"Propre":e.chambre.statut.nom=="En cours"?"En cours de nettoyage":e.chambre.statut.nom),l(2),C(e.heureDebut),l(2),C(e.heureFin),l(2),C(e.duree),l(2),m("rounded",!0)("icon",e.panne.length==0?"pi pi-check":"pi pi-exclamation-triangle")("severity",e.panne.length==0?"success":"warn")("value",e.panne.length),l(2),m("rounded",!0)("icon",e.objet.length==0?"pi pi-check":"pi pi-exclamation-triangle")("severity",e.objet.length==0?"success":"warn")("value",e.objet.length)}}function ma(o,n){if(o&1&&(t(0,"tr")(1,"td",30)(2,"p-table",28),b(3,la,15,0,"ng-template",null,2,S)(5,sa,15,16,"ng-template",null,3,S),i()()()),o&2){let e=h().$implicit;l(2),m("value",e.chambreChoisie)}}function pa(o,n){o&1&&(t(0,"tr")(1,"th"),a(2,"Salles"),i(),t(3,"th"),a(4,"Etat"),i(),t(5,"th"),a(6,"Heure de d\xE9but"),i(),t(7,"th"),a(8,"Heure de fin"),i(),t(9,"th"),a(10,"Dur\xE9e de nettoyage"),i(),t(11,"th"),a(12,"Nombre de pannes"),i(),t(13,"th"),a(14,"Nombre d'objets"),i()())}function ca(o,n){if(o&1&&(t(0,"tr")(1,"td"),a(2),i(),t(3,"td"),p(4,"p-tag",22),i(),t(5,"td"),a(6),i(),t(7,"td"),a(8),i(),t(9,"td"),a(10),i(),t(11,"td"),p(12,"p-tag",22),i(),t(13,"td"),p(14,"p-tag",22),i()()),o&2){let e=n.$implicit;l(2),C(e.salle.numero),l(2),m("rounded",!0)("icon",e.salle.statut.nom=="Propre"?"pi pi-check":e.salle.statut.nom=="En cours"?"pi pi-exclamation-triangle":"pi pi-info-circle")("severity",e.salle.statut.nom=="Propre"?"success":e.salle.statut.nom=="En cours"?"warn":"info")("value",e.salle.statut.nom=="Propre"?"Propre":e.salle.statut.nom=="En cours"?"En cours de nettoyage":e.salle.statut.nom),l(2),C(e.heureDebut),l(2),C(e.heureFin),l(2),C(e.duree),l(2),m("rounded",!0)("icon",e.panne.length==0?"pi pi-check":"pi pi-exclamation-triangle")("severity",e.panne.length==0?"success":"warn")("value",e.panne.length),l(2),m("rounded",!0)("icon",e.objet.length==0?"pi pi-check":"pi pi-exclamation-triangle")("severity",e.objet.length==0?"success":"warn")("value",e.objet.length)}}function ua(o,n){if(o&1&&(t(0,"tr")(1,"td",30)(2,"p-table",28),b(3,pa,15,0,"ng-template",null,2,S)(5,ca,15,16,"ng-template",null,3,S),i()()()),o&2){let e=h().$implicit;l(2),m("value",e.salleChoisie)}}function da(o,n){if(o&1&&b(0,aa,6,1,"tr",26)(1,ma,7,1,"tr",26)(2,ua,7,1,"tr",26),o&2){let e=n.$implicit;m("ngIf",e==null||e.nettoyageChoisie==null?null:e.nettoyageChoisie.length),l(),m("ngIf",e==null||e.chambreChoisie==null?null:e.chambreChoisie.length),l(),m("ngIf",e==null||e.salleChoisie==null?null:e.salleChoisie.length)}}function fa(o,n){o&1&&(t(0,"div",31),p(1,"img",32),t(2,"h3",33),a(3,"Aucun passe inscrit pour le moment"),i()())}function ha(o,n){if(o&1){let e=y();t(0,"p",34),a(1,"Chambres ou Salles \xE0 nettoyer"),i(),t(2,"div",35)(3,"p"),a(4,'Indiquez les n\xB0 de Chambres a nettoyer et si celles-ci sont en "D\xE9part" ou en "Recouche". Indiquez aussi le n\xB0 de salles \xE0 nettoyer.'),i(),w(5),t(6,"div",36)(7,"label"),a(8,"Choisissez les chambres en D\xE9part"),i()(),t(9,"div",37)(10,"p-iftalabel",38),p(11,"p-multiselect",39),t(12,"label",40),a(13,"Chambres en d\xE9part"),i()()(),t(14,"small",41),a(15,"S\xE9lectionnez les chambres en D\xE9part"),i(),I(),w(16),t(17,"div",36)(18,"label"),a(19,"Choisissez les chambres en Recouche"),i()(),t(20,"div",37)(21,"p-iftalabel",38),p(22,"p-multiselect",42),t(23,"label",43),a(24,"Chambres en d\xE9part"),i()()(),t(25,"small",41),a(26,"S\xE9lectionnez les chambres en Recouche"),i(),I(),w(27),t(28,"div",36)(29,"label"),a(30,"Choisissez les salles"),i()(),t(31,"div",37)(32,"p-iftalabel",38),p(33,"p-multiselect",44),t(34,"label",45),a(35,"Salles"),i()()(),t(36,"small",41),a(37,"S\xE9lectionnez les salles \xE0 nettoyer"),i(),I(),i(),t(38,"div",46)(39,"p-button",47),g("onClick",function(){let s=d(e).activateCallback;return f(s(2))}),i()()}if(o&2){let e=h();l(11),m("filter",!0)("options",e.chambreDepart)("showClear",!0),l(11),m("filter",!0)("showClear",!0)("options",e.chambreRecouche),l(11),m("filter",!0)("showClear",!0)("options",e.salles)}}function ga(o,n){if(o&1){let e=y();t(0,"p",34),a(1,"Travaux journaliers"),i(),t(2,"div",35),w(3),t(4,"p"),a(5,"S\xE9lectionnez, parmi les diff\xE9rentes t\xE2ches affich\xE9es, celles qui seront effectu\xE9es comme "),t(6,"b"),a(7,"travaux journaliers"),i(),a(8,". Vous pouvez tout cocher pour prendre en consid\xE9ration toutes les t\xE2ches. "),i(),t(9,"p"),a(10,"Travaux journaliers devant \xEAtre appliqu\xE9s \xE0 l'ensemble des chambres"),i(),t(11,"div",36)(12,"label"),a(13,"S\xE9lectionnez les diff\xE9rentes t\xE2ches"),i()(),t(14,"div",37)(15,"p-iftalabel",38),p(16,"p-multiselect",48),t(17,"label",49),a(18,"Tavaux journaliers"),i()()(),t(19,"small",41),a(20,"S\xE9lectionnez les diff\xE9rentes t\xE2ches"),i(),I(),i(),t(21,"div",50)(22,"p-button",51),g("onClick",function(){let s=d(e).activateCallback;return f(s(1))}),i(),t(23,"p-button",47),g("onClick",function(){let s=d(e).activateCallback;return f(s(3))}),i()()}if(o&2){let e=h();l(16),m("filter",!0)("showClear",!0)("options",e.travauxJournaliers)}}function ba(o,n){if(o&1){let e=y();t(0,"p",34),a(1,"Auto contr\xF4le \xE0 r\xE9aliser"),i(),t(2,"div",35),w(3),t(4,"p"),a(5,"S\xE9lectionnez, parmi les diff\xE9rentes t\xE2ches affich\xE9es, celles qui seront effectu\xE9es comme "),t(6,"b"),a(7,"Auto contr\xF4le \xE0 r\xE9aliser"),i(),a(8,". Vous pouvez tout cocher pour prendre en consid\xE9ration toutes les t\xE2ches. "),i(),t(9,"div",36)(10,"label"),a(11,"S\xE9lectionnez les diff\xE9rentes actions"),i()(),t(12,"div",37)(13,"p-iftalabel",38),p(14,"p-multiselect",52),t(15,"label",53),a(16,"Auto cont\xF4rle \xE0 r\xE9aliser"),i()()(),t(17,"small",41),a(18,"S\xE9lectionnez les diff\xE9rentes actions"),i(),I(),i(),t(19,"div",50)(20,"p-button",51),g("onClick",function(){let s=d(e).activateCallback;return f(s(2))}),i(),t(21,"p-button",47),g("onClick",function(){let s=d(e).activateCallback;return f(s(4))}),i()()}if(o&2){let e=h();l(14),m("filter",!0)("showClear",!0)("options",e.autoControle)}}function va(o,n){if(o&1){let e=y();t(0,"p",34),a(1,"Petit Ponctuel"),i(),t(2,"div",35),w(3),t(4,"p"),a(5,"S\xE9lectionnez, parmi les diff\xE9rentes t\xE2ches affich\xE9es, celles qui seront effectu\xE9es comme "),t(6,"b"),a(7,"Petit Ponctuel du Jour"),i(),a(8,". Vous pouvez tout cocher pour prendre en consid\xE9ration toutes les t\xE2ches. "),i(),t(9,"p"),a(10,"Indiquez le(s) petit(s) ponctuel(s) du jour, qui sera appliqu\xE9 \xE0 l'ensemble des chambres list\xE9es"),i(),t(11,"div",36)(12,"label"),a(13,"S\xE9lectionnez les diff\xE9rentes actions"),i()(),t(14,"div",37)(15,"p-iftalabel",38),p(16,"p-multiselect",54),t(17,"label",55),a(18,"Petits ponctuels du jour"),i()()(),t(19,"small",41),a(20,"S\xE9lectionnez les petits ponctuels du jour"),i(),I(),i(),t(21,"div",50)(22,"p-button",51),g("onClick",function(){let s=d(e).activateCallback;return f(s(3))}),i(),t(23,"p-button",47),g("onClick",function(){let s=d(e).activateCallback;return f(s(5))}),i()()}if(o&2){let e=h();l(16),m("filter",!0)("showClear",!0)("options",e.petitPonctuel)}}function Ca(o,n){if(o&1){let e=y();t(0,"p",34),a(1,"Nettoyage P\xE9riodique"),i(),t(2,"div",35),w(3),t(4,"p"),a(5,"S\xE9lectionnez, parmi les diff\xE9rentes actions affich\xE9es, celles qui seront effectu\xE9es comme "),t(6,"b"),a(7,"Nettoyage p\xE9riodique"),i(),a(8,". Vous pouvez tout cocher pour prendre en consid\xE9ration toutes les actions. "),i(),t(9,"p"),a(10,"Indiquez les actions li\xE9es aux nettoyages p\xE9riodiques planifi\xE9s"),i(),t(11,"div",36)(12,"label"),a(13,"S\xE9lectionnez Les nettoyages p\xE9riodiques"),i()(),t(14,"div",37)(15,"p-iftalabel",38),p(16,"p-multiselect",56),t(17,"label",57),a(18,"Nettoyages p\xE9riodiques"),i()()(),t(19,"small",41),a(20,"S\xE9lectionnez les nettoyages p\xE9riodiques"),i(),I(),i(),t(21,"div",50)(22,"p-button",51),g("onClick",function(){let s=d(e).activateCallback;return f(s(4))}),i(),t(23,"p-button",47),g("onClick",function(){let s=d(e).activateCallback;return f(s(6))}),i()()}if(o&2){let e=h();l(16),m("filter",!0)("showClear",!0)("options",e.nettoyagePeriodique)}}function _a(o,n){if(o&1){let e=y();t(0,"p",34),a(1,"Agent et Date de nettoyage"),i(),t(2,"div",58),w(3),t(4,"p"),a(5,"S\xE9lectionnez, parmi les diff\xE9rents agents celui \xE0 qui sera attribu\xE9 le passe en cours. "),i(),t(6,"div",36)(7,"label"),a(8,"S\xE9lectionnez un agent de chambre"),i()(),t(9,"div",37)(10,"p-iftalabel",38),p(11,"p-select",59),t(12,"label",60),a(13,"Nom des agents"),i()()(),t(14,"small",41),a(15,"S\xE9lectionnez un agent de chambre"),i(),I(),w(16),t(17,"div",36)(18,"p"),a(19,"S\xE9lectionnez la date du jour"),i()(),t(20,"div",61)(21,"p-iftalabel"),p(22,"p-datepicker",62),t(23,"label",63),a(24,"Date du jour"),i()()(),t(25,"small",41),a(26,"Date de passage"),i(),I(),w(27),t(28,"div",36)(29,"p"),a(30,"Vous devez laisser un commentaire pour l'agent de chambre"),i(),t(31,"label"),a(32,"Commentaire"),i()(),t(33,"p-iftalabel"),p(34,"textarea",64),t(35,"label",65),a(36,"Commentaire pour l'agent de chambre"),i()(),I(),i(),t(37,"div",50)(38,"p-button",51),g("onClick",function(){let s=d(e).activateCallback;return f(s(5))}),i(),t(39,"p-button",66),g("onClick",function(){d(e);let s=h();return f(s.onSave())}),i()()}if(o&2){let e=h();l(11),m("showClear",!0)("options",e.agents)}}var qt=class o{constructor(n,e,r,s,c,u,x,ne,j,U){this.fb=n;this.messageService=e;this.confirmationService=r;this.store=s;this.datepipe=c;this.passeService=u;this.chambreChoisieService=x;this.salleChoisieService=ne;this.nettoyageChoisieService=j;this.tacheChoisieService=U}unsubscribe$=new A;passes;passeForUpdate;openPasseDialog=!1;chambreDepart;chambreRecouche;travauxJournaliers;autoControle;petitPonctuel;nettoyagePeriodique;agents;salles;nettoyages;taches;activeIndex=0;expandedRows={};departOld;recoucheOld;sallesOld;travauxjournaliersOld;petitponctuelOld;nettoyageperiodiqueOld;autocontroleOld;passeForm=new Ae({id:new re(0),depart:new re([]),recouche:new re([]),travauxjournaliers:new re([]),salles:new re([]),autocontrole:new re([]),petitponctuel:new re([]),nettoyageperiodique:new re([]),agent:new re("",P.required),dateNettoyage:new re("",P.required),commentaire:new re("")});ngOnInit(){this.store.dispatch(ti()),this.store.select(so).subscribe(n=>this.passes=n),this.store.dispatch(_t()),this.store.select(It).subscribe(n=>{this.chambreDepart=n.filter(e=>e.statut?.nom==="D\xE9part"),this.chambreRecouche=n.filter(e=>e.statut?.nom==="Recouche")}),this.store.dispatch(xt()),this.store.select(At).subscribe(n=>{this.travauxJournaliers=n.filter(e=>e.categorie?.nom==="Travail Journalier"),this.autoControle=n.filter(e=>e.categorie?.nom==="Auto Contr\xF4le")}),this.store.dispatch(St()),this.store.select(kt).subscribe(n=>{this.petitPonctuel=n.filter(e=>e.categorie?.nom==="Petit Ponctuel"),this.nettoyagePeriodique=n.filter(e=>e.categorie?.nom==="Nettoyage P\xE9riodique")}),this.store.dispatch(yt()),this.store.select(Tt).subscribe(n=>{this.salles=n}),this.store.dispatch(Re()),this.store.select(ze).subscribe(n=>{this.agents=n.filter(e=>e.role==="Agent")})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}openUpdatePasse(n){this.store.dispatch(ft({id:n.id})),this.store.select(He).subscribe(e=>{let r=(j,U,se)=>j?.filter(U).map(se)||[],s=(j,U,se)=>r(j,Ve=>Ve?.[se]?.categorie?.nom===U,Ve=>Ve?.[se]?.action),c=(j,U)=>r(j,se=>se?.chambre?.statut?.nom===U,se=>se?.chambre?.numero),u=(j,U)=>j?.filter(U)||[],x=(j,U,se)=>u(j,Ve=>Ve?.[se]?.categorie?.nom===U),ne=(j,U)=>u(j,se=>se?.chambre?.statut?.nom===U);this.openPasseDialog=!0,this.passeForm.setValue({id:n.id,depart:c(e.chambreChoisie,"D\xE9part"),recouche:c(e.chambreChoisie,"Recouche"),autocontrole:s(e.tacheChoisie,"Auto Contr\xF4le","tache"),travauxjournaliers:s(e.tacheChoisie,"Travail Journalier","tache"),nettoyageperiodique:s(e.nettoyageChoisie,"Nettoyage p\xE9riodique","nettoyage"),petitponctuel:s(e.nettoyageChoisie,"Petit Ponctuel","nettoyage"),salles:r(e.salleChoisie,()=>!0,j=>j.salle?.numero),agent:e.agent?.nom||"",dateNettoyage:e.dateNettoyage||"",commentaire:e.commentaire||""}),this.passeForUpdate=e,this.departOld=ne(e.chambreChoisie,"D\xE9part"),this.recoucheOld=ne(e.chambreChoisie,"Recouche"),this.autocontroleOld=x(e.tacheChoisie,"Auto Contr\xF4le","tache"),this.travauxjournaliersOld=x(e.tacheChoisie,"Travail Journalier","tache"),this.nettoyageperiodiqueOld=x(e.nettoyageChoisie,"Nettoyage p\xE9riodique","nettoyage"),this.petitponctuelOld=x(e.nettoyageChoisie,"Petit Ponctuel","nettoyage"),this.sallesOld=u(e.salleChoisie,()=>!0)})}deletePasse(n){this.confirmationService.confirm({message:"Voulez-vous supprimer ce passe ?",header:"Confirmez la suppression",icon:"pi pi-info-circle",acceptButtonStyleClass:"p-button-danger p-button-text",rejectButtonStyleClass:"p-button-text p-button-text",acceptIcon:"none",rejectIcon:"none",accept:()=>{this.store.dispatch($i({id:n.id}))},reject:()=>{this.messageService.add({severity:"error",summary:"Reject\xE9",detail:"Action annul\xE9e!"})}})}openSavePasse(){this.openPasseDialog=!0,this.passeForUpdate=void 0}mergeArrays(n,e){return[...n||[],...e||[]]}onSave(){let{depart:n=[],recouche:e=[],travauxjournaliers:r=[],autocontrole:s=[],petitponctuel:c=[],nettoyageperiodique:u=[],salles:x=[],agent:ne="",dateNettoyage:j,commentaire:U=""}=this.passeForm.value||{};if(!this.validateForm(ne,j))return;let se=this.formatDate(j),Ve=this.mergeArrays(n,e),pi=this.mergeArrays(r,s),ci=this.mergeArrays(c,u),ui=x,di={id:this.passeForUpdate?.id,agent:ne,dateNettoyage:se,statut:"Nouveau",commentaire:U};this.passeForUpdate?.id?this.passeService.Update(di).subscribe({next:()=>{this.processUpdateEntities(this.passeForUpdate?.id,Ve,pi,ci,ui)},error:Ke=>this.handleError(Ke)}):this.passeService.Create(di).subscribe({next:Ke=>this.processSubEntities(Ke.id,Ve,pi,ci,ui),error:Ke=>this.handleError(Ke)})}validateForm(n,e){if(!n||!e){let r=n?"La date du jour est manquante.":"Vous devez choisir une femme de chambre.";return this.messageService.add({severity:"error",summary:"Oups !",detail:r,life:1e4}),!1}return!0}formatDate(n){return n.length===10?n:this.datepipe.transform(n,"dd-MM-yyyy")}processSubEntities(n,e,r,s,c){let u=[...this.createEntities(e,n,this.chambreChoisieService,"numero"),...this.createEntities(r,n,this.tacheChoisieService,"action"),...this.createEntities(s,n,this.nettoyageChoisieService,"action"),...this.createEntities(c,n,this.salleChoisieService,"numero")];Qt(u).subscribe({complete:()=>this.finalizeSave(),error:x=>this.handleError(x)})}createEntities(n,e,r,s){return n.map(c=>r.Create({passeId:e,[s]:c}))}finalizeSave(){this.messageService.add({severity:"success",summary:"Succ\xE8s !",detail:"Nouveau passe ajout\xE9!"}),this.resetForm(),this.store.dispatch(ti())}handleError(n){this.messageService.add({severity:"error",summary:"Oups !",detail:n.error?.message||"Une erreur est survenue.",life:1e4})}resetForm(){this.passeForm.reset({id:0,depart:[],recouche:[],travauxjournaliers:[],autocontrole:[],petitponctuel:[],nettoyageperiodique:[],salles:[],agent:"",dateNettoyage:"",commentaire:""}),this.openPasseDialog=!1}processUpdateEntities(n,e,r,s,c){let u=[...this.deleteEntities(this.departOld||[],x=>this.chambreChoisieService.Delete(x)),...this.deleteEntities(this.recoucheOld||[],x=>this.chambreChoisieService.Delete(x)),...this.deleteEntities(this.travauxjournaliersOld||[],x=>this.tacheChoisieService.Delete(x)),...this.deleteEntities(this.autocontroleOld||[],x=>this.tacheChoisieService.Delete(x)),...this.deleteEntities(this.nettoyageperiodiqueOld||[],x=>this.nettoyageChoisieService.Delete(x)),...this.deleteEntities(this.petitponctuelOld||[],x=>this.nettoyageChoisieService.Delete(x)),...this.deleteEntities(this.sallesOld||[],x=>this.salleChoisieService.Delete(x))];Qt(u).subscribe({complete:()=>{this.processSubEntities(n,e,r,s,c)},error:x=>this.handleError(x)})}deleteEntities(n,e){return!n||n.length===0?(console.warn("Aucune entit\xE9 \xE0 supprimer."),[]):n.map(r=>{let s=r.id;return s?e(s):(console.error("L'entit\xE9 ne contient pas de champ ID :",r),fi)})}onRowExpand(n){}onRowCollapse(n){}static \u0275fac=function(e){return new(e||o)(_(ae),_(N),_(B),_(q),_(Pi),_(qn),_(Un),_(Gn),_(Bn),_(Rn))};static \u0275cmp=F({type:o,selectors:[["app-passe"]],standalone:!1,decls:45,vars:37,consts:[["dt","","gFilter",""],["caption",""],["header",""],["body",""],["rowexpansion",""],["content",""],["myInput",""],[1,"card"],["dataKey","id","paginatorPosition","bottom","selectionMode","single",3,"onRowExpand","onRowCollapse","value","tableStyle","paginator","rows","rowsPerPageOptions","globalFilterFields","expandedRowKeys"],["class","flex justify-content-between align-content-center contenu-empty",4,"ngIf"],["id","dialogue-user",3,"visibleChange","header","modal","visible","breakpoints","maximizable"],["autocomplete","false","novalidate","","role","form",1,"w-full",3,"formGroup"],[1,""],[1,"basis-[50rem]",3,"value","linear"],[3,"value"],[1,"flex","justify-content-between"],["icon","pi pi-plus","severity","info","label","Ajouter",3,"onClick"],["iconPosition","left",1,"ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Recherche",3,"input"],[2,"width","5rem"],["type","button","pRipple","",3,"pRowToggler","text","rounded","plain","icon"],[3,"rounded","icon","severity","value"],[1,"button_action"],["icon","pi pi-user-edit","severity","primary",3,"onClick","rounded","text"],["icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],[4,"ngIf"],["colspan","3"],["dataKey","id",3,"value"],["pTemplate","header"],["colspan","6"],[1,"flex","justify-content-between","align-content-center","contenu-empty"],["src","../../../../assets/images/empty.svg","alt","Aucun objet pour le moment",1,"aucun-objet"],[1,"p-2","text-center"],[1,"text-blue","text-xl","font-bold","leading-4","rounded-md","mb-2"],["id","box-select",1,"marge-5px"],[1,"mb-1","mt-3"],[1,"w-full"],[1,"w-full","md:w-56"],["variant","filled","filterBy","numero","placeholder","S\xE9lectionnez des chambres","formControlName","depart","inputId","depart","optionLabel","numero","optionValue","numero","styleClass","w-full",1,"w-full",3,"filter","options","showClear"],["htmlFor","depart"],["id","categorie-help",1,"opacity-50"],["variant","filled","filterBy","numero","placeholder","S\xE9lectionnez des chambres","formControlName","recouche","inputId","recouche","optionLabel","numero","optionValue","numero","styleClass","w-full",1,"w-full",3,"filter","showClear","options"],["htmlFor","recouche"],["variant","filled","filterBy","numero","placeholder","S\xE9lectionnez des salles","formControlName","salles","inputId","salle","optionLabel","numero","optionValue","numero","styleClass","w-full",1,"w-full",3,"filter","showClear","options"],["htmlFor","salle"],[1,"py-2"],["label","Suivant","severity","info",3,"onClick"],["variant","filled","filterBy","action","placeholder","S\xE9lectionnez des t\xE2ches","formControlName","travauxjournaliers","inputId","travauxjournaliers","optionLabel","action","optionValue","action","styleClass","w-full",1,"w-full",3,"filter","showClear","options"],["htmlFor","travauxjournaliers"],[1,"flex","py-6","gap-2"],["label","Pr\xE9c\xE9dent","severity","secondary",3,"onClick"],["variant","filled","filterBy","nom","placeholder","S\xE9lectionnez des actions","formControlName","autocontrole","inputId","autocontrole","optionLabel","action","optionValue","action","styleClass","w-full",1,"w-full",3,"filter","showClear","options"],["htmlFor","autocontrole"],["filterBy","action","placeholder","Choisissez le ou les petits ponctuels","formControlName","petitponctuel","inputId","petitponctuel","optionLabel","action","optionValue","action","styleClass","w-full",1,"w-full",3,"filter","showClear","options"],["htmlFor","petitponctuel"],["filterBy","action","placeholder","Choisissez une ou plusieurs actions","formControlName","nettoyageperiodique","inputId","nettoyageperiodique","optionLabel","action","optionValue","action","styleClass","w-full",1,"w-full",3,"filter","showClear","options"],["htmlFor","nettoyageperiodique"],[1,"marge-5px"],["formControlName","agent","filterBy","nom","variant","filled","optionLabel","nom","optionValue","nom","placeholder","Choisissez un nom",1,"w-full","md:w-56",3,"showClear","options"],["htmlFor","nomAgent"],[1,"w-full","date-input"],["formControlName","dateNettoyage","inputId","dateNettoyage","dateFormat","dd-mm-yy","showIcon","","iconDisplay","input"],["htmlFor","dateNettoyage"],["pTextarea","","id","commentaire","formControlName","commentaire","pSize","small","placeholder","Le commentaire peut contenir des informations sur les chambres auxquelles les actions du nettoyage p\xE9riodique seront appliqu\xE9es","pStyleClass","w-full"],["htmlFor","commentaire"],["label","Enr\xE9gistr\xE9",3,"onClick"]],template:function(e,r){if(e&1){let s=y();p(0,"p-confirmDialog"),t(1,"div",7)(2,"p-table",8,0),g("onRowExpand",function(u){return d(s),f(r.onRowExpand(u))})("onRowCollapse",function(u){return d(s),f(r.onRowCollapse(u))}),b(5,ta,7,0,"ng-template",null,1,S)(7,ia,14,0,"ng-template",null,2,S)(9,na,17,17,"ng-template",null,3,S)(11,da,3,3,"ng-template",null,4,S),i(),b(13,fa,4,0,"div",9),i(),t(14,"p-dialog",10),D("visibleChange",function(u){return d(s),V(r.openPasseDialog,u)||(r.openPasseDialog=u),f(u)}),t(15,"form",11)(16,"p",12),a(17,"Choisissez les chambres en fonction du statut"),i(),t(18,"p-stepper",13)(19,"p-step-list"),p(20,"p-step",14)(21,"p-step",14)(22,"p-step",14)(23,"p-step",14)(24,"p-step",14)(25,"p-step",14),i(),t(26,"p-step-panels")(27,"p-step-panel",14),b(28,ha,40,9,"ng-template",null,5,S),i(),t(30,"p-step-panel",14),b(31,ga,24,3,"ng-template",null,5,S),i(),t(33,"p-step-panel",14),b(34,ba,22,3,"ng-template",null,5,S),i(),t(36,"p-step-panel",14),b(37,va,24,3,"ng-template",null,5,S),i(),t(39,"p-step-panel",14),b(40,Ca,24,3,"ng-template",null,5,S),i(),t(42,"p-step-panel",14),b(43,_a,40,2,"ng-template",null,5,S),i()()()()()}e&2&&(l(2),m("value",r.passes)("tableStyle",v(31,Po))("paginator",!0)("rows",10)("tableStyle",v(32,Po))("rowsPerPageOptions",v(33,Zr))("globalFilterFields",v(34,Kr))("expandedRowKeys",r.expandedRows),l(11),m("ngIf",r.passes.length==0),l(),Q(v(35,Xr)),Y("header",r.passeForUpdate!=null&&r.passeForUpdate.id?"Mise \xE0 jour du passe":"Cr\xE9ation de passe"),m("modal",!0),O("visible",r.openPasseDialog),m("breakpoints",v(36,ea))("maximizable",!0),l(),m("formGroup",r.passeForm),l(3),m("value",1)("linear",!0),l(2),m("value",1),l(),m("value",2),l(),m("value",3),l(),m("value",4),l(),m("value",5),l(),m("value",6),l(2),m("value",1),l(3),m("value",2),l(3),m("value",3),l(3),m("value",4),l(3),m("value",5),l(3),m("value",6))},dependencies:[k,me,Oi,nn,Ki,tn,en,Xi,L,R,G,z,X,ee,J,M,te,K,H,vt,ln,Le,ie,pn,ge,W,$,gt,ut],styles:[".marge-5px[_ngcontent-%COMP%]{padding-top:10px!important}"]})};var si=Z("objet"),To=E(si,o=>o.objetsByStateOther),Pp=E(si,o=>o.objet),jo=E(si,o=>o.globalObjets);var Fo=()=>({"min-width":"50rem"}),Sa=()=>[5,10,20],xa=()=>["nom","lesObjets.chambreChoisie.chambre.numero","lesObjets.salleChoisie.salle.numero","creationDate"],Ea=()=>({width:"50rem"}),wa=()=>({"1199px":"75vw","575px":"90vw"});function Ia(o,n){if(o&1){let e=y();t(0,"div",22)(1,"p-iconfield",23)(2,"p-inputicon"),p(3,"i",24),i(),t(4,"input",25,4),g("input",function(){d(e);let s=T(5);h();let c=T(4);return f(c.filterGlobal(s.value,"contains"))}),i()()()}}function Pa(o,n){o&1&&(t(0,"tr")(1,"th"),a(2,"Photo de l'objet trouv\xE9"),i(),t(3,"th"),a(4,"Description"),i(),t(5,"th"),a(6,"Numero de chambre"),i(),t(7,"th"),a(8,"Numero de salle"),i(),t(9,"th"),a(10,"Etat de l'objet"),i(),t(11,"th"),a(12,"Date d'enr\xE9gistrement"),i(),t(13,"th"),a(14,"Action"),i()())}function Ta(o,n){if(o&1){let e=y();t(0,"tr")(1,"td",26),p(2,"p-image",27),i(),t(3,"td"),a(4),i(),t(5,"td"),a(6),i(),t(7,"td"),a(8),i(),t(9,"td"),p(10,"p-tag",28),i(),t(11,"td"),a(12),i(),t(13,"td")(14,"p-button",29),g("onClick",function(){let s=d(e).$implicit,c=h();return f(c.updateObjet(s))}),i(),t(15,"p-button",30),g("onClick",function(){let s=d(e).$implicit,c=h();return f(c.deleteObjet(s))}),i()()()}if(o&2){let e=n.$implicit;l(2),m("src","https://api.sindevstat.com/uploads/"+(e==null?null:e.photo))("preview",!0),l(2),C(e==null?null:e.description),l(2),C(e==null||e.chambreChoisie==null?null:e.chambreChoisie.chambre.numero),l(2),C(e==null||e.salleChosie==null?null:e.salleChosie.salle.numero),l(2),m("value",e.statut.nom),l(2),C(e.creationDate),l(2),m("rounded",!0)("text",!0),l(),m("rounded",!0)("text",!0)}}function ja(o,n){o&1&&(t(0,"div",31),p(1,"img",32),t(2,"h3",33),a(3,"Aucun objet inscrit pour le moment"),i()())}var Ut=class o{constructor(n,e,r,s){this.fb=n;this.store=e;this.messageService=r;this.confirmationService=s;this.objetFormGroup=this.fb.group({id:[null],description:[null,P.required],statut:[null,P.required]})}destroy$=new A;lesObjets;selectedObjet;statuts;objetFormGroup;objetVisibility=!1;ngOnInit(){this.store.dispatch($n()),this.store.select(jo).subscribe({next:n=>{this.lesObjets=n}}),this.store.dispatch($e()),this.store.select(Oe).subscribe(n=>this.statuts=n)}updateObjet(n){this.objetFormGroup.patchValue({id:n.id,description:n.description,statut:n.statut?.nom}),this.objetVisibility=!0}onSave(){if(this.objetFormGroup.valid){let n={id:this.objetFormGroup.value.id,description:this.objetFormGroup.value.description,statut:this.objetFormGroup.value.statut};this.store.dispatch(Ln({credentials:n})),this.objetVisibility=!1}}deleteObjet(n){this.confirmationService.confirm({message:"Voulez-vous supprimer cet \xE9l\xE9ment ?",header:"Confirmez la suppression",icon:"pi pi-info-circle",acceptButtonStyleClass:"p-button-danger p-button-text",rejectButtonStyleClass:"p-button-text p-button-text",acceptIcon:"none",rejectIcon:"none",accept:()=>{this.store.dispatch(Et({id:n.id}))},reject:()=>{this.messageService.add({severity:"error",summary:"Rejected",detail:"Action annul\xE9e!"})}})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}static \u0275fac=function(e){return new(e||o)(_(ae),_(q),_(N),_(B))};static \u0275cmp=F({type:o,selectors:[["app-objets"]],standalone:!1,decls:36,vars:26,consts:[["dt","","gFilter",""],["caption",""],["header",""],["body",""],["myInput",""],[1,"card"],["paginatorPosition","bottom","selectionMode","single",3,"selectionChange","value","tableStyle","paginator","rows","rowsPerPageOptions","globalFilterFields","selection"],["class","flex justify-content-between align-content-center contenu-empty",4,"ngIf"],["header","Mise \xE0 jour de l'objet trouv\xE9",3,"visibleChange","modal","visible","breakpoints","maximizable"],["autocomplete","off","novalidate","","role","form",1,"w-full",3,"formGroup"],[1,"mb-1"],[1,"w-full"],["name","description","id","description","pInputText","","type","text","formControlName","description","autocomplete","off",1,"w-full"],["htmlFor","description",1,"form-label","font-bold"],[1,"mb-1","mt-3"],["id","custom-input-select",1,"w-full"],[1,"w-full","md:w-56"],["filterBy","nom","placeholder","S\xE9lectionnez un \xE9tat","formControlName","statut","inputId","statut","optionLabel","nom","optionValue","nom","styleClass","w-full",1,"w-full",3,"filter","showClear","options"],["htmlFor","statut"],["id","statut-help",1,"opacity-50"],[1,"button-submit","mt-3"],["pTooltip","Enr\xE9gistrer les modifications","tooltipPosition","right","label","Enr\xE9gistrer","severity","info",3,"onClick","disabled"],[1,"flex","justify-content-between"],["iconPosition","left",1,"ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Recherche",3,"input"],[1,"image-illustrative"],["alt","Photo du probl\xE8me technique","width","250","pTooltip","Agrandir l'image","tooltipPosition","bottom",3,"src","preview"],["severity","info",3,"value"],["pTooltip","Modifier l'objet","tooltipPosition","bottom","icon","pi pi-pencil","severity","info",3,"onClick","rounded","text"],["pTooltip","Supprimer l'objet","tooltipPosition","bottom","icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],[1,"flex","justify-content-between","align-content-center","contenu-empty"],["src","../../../../assets/images/empty.svg","alt","Aucun objet pour le moment",1,"aucun-objet"],[1,"p-2","text-center"]],template:function(e,r){if(e&1){let s=y();p(0,"p-confirmDialog"),t(1,"div",5)(2,"p-table",6,0),D("selectionChange",function(u){return d(s),V(r.selectedObjet,u)||(r.selectedObjet=u),f(u)}),b(5,Ia,6,0,"ng-template",null,1,S)(7,Pa,15,0,"ng-template",null,2,S)(9,Ta,16,11,"ng-template",null,3,S),i(),b(11,ja,4,0,"div",7),i(),t(12,"p-dialog",8),D("visibleChange",function(u){return d(s),V(r.objetVisibility,u)||(r.objetVisibility=u),f(u)}),t(13,"form",9),w(14),t(15,"div",10)(16,"label"),a(17,"Description de l'objet"),i()(),t(18,"div",11)(19,"p-iftalabel"),p(20,"input",12),t(21,"label",13),a(22,"Description"),i()()(),I(),w(23),t(24,"div",14)(25,"label"),a(26,"Etat de l'ojet"),i()(),t(27,"div",15)(28,"p-iftalabel",16),p(29,"p-select",17),t(30,"label",18),a(31,"Etat"),i()()(),t(32,"small",19),a(33,"Modifiez l'\xE9tat de l'objet"),i(),I(),t(34,"div",20)(35,"p-button",21),g("onClick",function(){return d(s),f(r.onSave())}),i()()()()}e&2&&(l(2),m("value",r.lesObjets)("tableStyle",v(20,Fo))("paginator",!0)("rows",10)("tableStyle",v(21,Fo))("rowsPerPageOptions",v(22,Sa))("globalFilterFields",v(23,xa)),O("selection",r.selectedObjet),l(9),m("ngIf",r.lesObjets.length==0),l(),Q(v(24,Ea)),m("modal",!0),O("visible",r.objetVisibility),m("breakpoints",v(25,wa))("maximizable",!0),l(),m("formGroup",r.objetFormGroup),l(16),m("filter",!0)("showClear",!0)("options",r.statuts),l(6),m("disabled",!r.objetFormGroup.valid))},dependencies:[k,me,L,R,G,z,X,ee,J,M,te,K,bt,H,ie,ge,oe,W,$],encapsulation:2})};var Oo=Z("marque"),Ze=E(Oo,o=>o.result),Up=E(Oo,o=>o.marque);var Vo=()=>({"min-width":"50rem"}),Fa=()=>[5,10,20],Oa=()=>["nomEquipement","marqueEquipement","chambreChoisie.chambre.numero","salleChoisie.salle.numero","creationDate"],Va=()=>({width:"50rem"}),Da=()=>({"1199px":"75vw","575px":"90vw"});function ka(o,n){if(o&1){let e=y();t(0,"div",26)(1,"p-iconfield",27)(2,"p-inputicon"),p(3,"i",28),i(),t(4,"input",29,4),g("input",function(){d(e);let s=T(5);h();let c=T(4);return f(c.filterGlobal(s.value,"contains"))}),i()()()}}function Ma(o,n){o&1&&(t(0,"tr")(1,"th"),a(2,"Photo de l'appareil en panne"),i(),t(3,"th"),a(4,"Nom"),i(),t(5,"th"),a(6,"Marque"),i(),t(7,"th"),a(8,"Description"),i(),t(9,"th"),a(10,"Numero de chambre"),i(),t(11,"th"),a(12,"Etat"),i(),t(13,"th"),a(14,"Date d'enr\xE9gistrement"),i(),t(15,"th"),a(16,"Action"),i()())}function Aa(o,n){if(o&1&&p(0,"p-tag",36),o&2){let e=h().$implicit;m("value",e.marqueEquipement.nom)}}function Na(o,n){if(o&1){let e=y();t(0,"tr")(1,"td",30),p(2,"p-image",31),i(),t(3,"td"),a(4),i(),t(5,"td"),b(6,Aa,1,1,"p-tag",32),i(),t(7,"td"),a(8),i(),t(9,"td"),a(10),i(),t(11,"td"),p(12,"p-tag",33),i(),t(13,"td"),a(14),i(),t(15,"td")(16,"p-button",34),g("onClick",function(){let s=d(e).$implicit,c=h();return f(c.updatePanne(s))}),i(),t(17,"p-button",35),g("onClick",function(){let s=d(e).$implicit,c=h();return f(c.deletePanne(s))}),i()()()}if(o&2){let e=n.$implicit;l(2),m("src","https://api.sindevstat.com/uploads/"+(e==null?null:e.photo))("preview",!0),l(2),C(e.nomEquipement),l(2),m("ngIf",e.marqueEquipement),l(2),C(e.description),l(2),C(e==null||e.chambreChoisie==null?null:e.chambreChoisie.chambre.numero),l(2),m("value",e.statut.nom),l(2),C(e.creationDate),l(2),m("rounded",!0)("text",!0),l(),m("rounded",!0)("text",!0)}}function qa(o,n){o&1&&(t(0,"div",37),p(1,"img",38),t(2,"h3",39),a(3,"Aucune panne inscrite pour le moment"),i()())}var Gt=class o{constructor(n,e,r,s){this.fb=n;this.store=e;this.messageService=r;this.confirmationService=s;this.panneFormGroup=this.fb.group({id:[null],description:[null,P.required],nomEquipement:[null,P.required],marqueEquipement:[null,P.required],statut:[null,P.required]})}destroy$=new A;nosMarques;lesPannes;selectedPanne;statuts;panneFormGroup;panneVisibility=!1;ngOnInit(){this.store.dispatch(ot()),this.store.select(wt).subscribe(n=>this.lesPannes=n),this.store.dispatch(Je()),this.store.select(Ze).subscribe(n=>{this.nosMarques=n}),this.store.dispatch($e()),this.store.select(Oe).subscribe(n=>this.statuts=n)}updatePanne(n){this.panneFormGroup.patchValue({id:n.id,description:n.description,nomEquipement:n.nomEquipement,marqueEquipement:n.marqueEquipement?.nom,statut:n.statut?.nom}),this.panneVisibility=!0}deletePanne(n){this.confirmationService.confirm({message:"Voulez-vous supprimer cet \xE9l\xE9ment ?",header:"Confirmez la suppression",icon:"pi pi-info-circle",acceptButtonStyleClass:"p-button-danger p-button-text",rejectButtonStyleClass:"p-button-text p-button-text",acceptIcon:"none",rejectIcon:"none",accept:()=>{this.store.dispatch(Ct({id:n.id}))},reject:()=>{this.messageService.add({severity:"error",summary:"Rejected",detail:"Action annul\xE9e!"})}})}onSave(){if(this.panneFormGroup.valid){let n={id:this.panneFormGroup.value.id,description:this.panneFormGroup.value.description,marqueEquipement:this.panneFormGroup.value.marqueEquipement,nomEquipement:this.panneFormGroup.value.nomEquipement,statut:this.panneFormGroup.value.statut};this.store.dispatch(Cn({credentials:n})),this.panneVisibility=!1}}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}static \u0275fac=function(e){return new(e||o)(_(ae),_(q),_(N),_(B))};static \u0275cmp=F({type:o,selectors:[["app-pannes"]],standalone:!1,decls:54,vars:28,consts:[["dt","","gFilter",""],["caption",""],["header",""],["body",""],["myInput",""],[1,"card"],["paginatorPosition","bottom","selectionMode","single",3,"selectionChange","value","tableStyle","paginator","rows","rowsPerPageOptions","globalFilterFields","selection"],["class","flex justify-content-between align-content-center contenu-empty",4,"ngIf"],["header","Mise \xE0 jour des informations du probl\xE8me technique",3,"visibleChange","modal","visible","breakpoints","maximizable"],["autocomplete","off","novalidate","","role","form",1,"w-full",3,"formGroup"],[1,"mb-1"],[1,"w-full"],["name","nomEquipement","id","nomEquipement","pInputText","","type","text","formControlName","nomEquipement","autocomplete","off",1,"w-full"],["htmlFor","nomEquipement",1,"form-label","font-bold"],[1,"mb-1","mt-3"],["formControlName","marqueEquipement","placeholder","S\xE9lectionnez une marque","optionLabel","nom","optionValue","nom",1,"w-full","md:w-56",3,"options","editable"],["htmlFor","marqueEquipement",1,"form-label","font-bold"],["name","description","id","description","pInputText","","type","text","formControlName","description","autocomplete","off",1,"w-full"],["htmlFor","description",1,"form-label","font-bold"],["id","custom-input-select",1,"w-full"],[1,"w-full","md:w-56"],["filterBy","nom","placeholder","S\xE9lectionnez un \xE9tat","formControlName","statut","inputId","statut","optionLabel","nom","optionValue","nom","styleClass","w-full",1,"w-full",3,"filter","showClear","options"],["htmlFor","statut"],["id","statut-help",1,"opacity-50"],[1,"button-submit","mt-3"],["pTooltip","Enr\xE9gistrer les modifications","tooltipPosition","right","label","Enr\xE9gistrer","severity","info",3,"onClick","disabled"],[1,"flex","justify-content-between"],["iconPosition","left",1,"ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Recherche",3,"input"],[1,"image-illustrative"],["alt","Photo du probl\xE8me technique","width","250","pTooltip","Agrandir l'image","tooltipPosition","bottom",3,"src","preview"],["icon","pi pi-exclamation-triangle","severity","warn",3,"value",4,"ngIf"],["severity","info",3,"value"],["pTooltip","Modifier les informations sur la panne","tooltipPosition","bottom","icon","pi pi-pencil","severity","info",3,"onClick","rounded","text"],["pTooltip","Supprimer la panne","tooltipPosition","bottom","icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],["icon","pi pi-exclamation-triangle","severity","warn",3,"value"],[1,"flex","justify-content-between","align-content-center","contenu-empty"],["src","../../../../assets/images/empty.svg","alt","Aucun objet pour le moment",1,"aucun-objet"],[1,"p-2","text-center"]],template:function(e,r){if(e&1){let s=y();p(0,"p-confirmDialog"),t(1,"div",5)(2,"p-table",6,0),D("selectionChange",function(u){return d(s),V(r.selectedPanne,u)||(r.selectedPanne=u),f(u)}),b(5,ka,6,0,"ng-template",null,1,S)(7,Ma,17,0,"ng-template",null,2,S)(9,Na,18,12,"ng-template",null,3,S),i(),b(11,qa,4,0,"div",7),i(),t(12,"p-dialog",8),D("visibleChange",function(u){return d(s),V(r.panneVisibility,u)||(r.panneVisibility=u),f(u)}),t(13,"form",9),w(14),t(15,"div",10)(16,"label"),a(17,"Nom de l'\xE9quipement trouv\xE9"),i()(),t(18,"div",11)(19,"p-iftalabel"),p(20,"input",12),t(21,"label",13),a(22,"Nom de l'\xE9quipement en panne"),i()()(),I(),w(23),t(24,"div",14)(25,"label"),a(26,"Marque de l'\xE9quipement en panne"),i()(),t(27,"div",11)(28,"p-iftalabel"),p(29,"p-select",15),t(30,"label",16),a(31,"Marque de l'\xE9quipement en panne"),i()()(),I(),w(32),t(33,"div",14)(34,"label"),a(35,"Description de l'\xE9quipement"),i()(),t(36,"div",11)(37,"p-iftalabel"),p(38,"input",17),t(39,"label",18),a(40,"Description"),i()()(),I(),w(41),t(42,"div",14)(43,"label"),a(44,"Etat de l'\xE9quipement"),i()(),t(45,"div",19)(46,"p-iftalabel",20),p(47,"p-select",21),t(48,"label",22),a(49,"Etat"),i()()(),t(50,"small",23),a(51,"Modifiez l'\xE9tat de l'\xE9quipement"),i(),I(),t(52,"div",24)(53,"p-button",25),g("onClick",function(){return d(s),f(r.onSave())}),i()()()()}e&2&&(l(2),m("value",r.lesPannes)("tableStyle",v(22,Vo))("paginator",!0)("rows",10)("tableStyle",v(23,Vo))("rowsPerPageOptions",v(24,Fa))("globalFilterFields",v(25,Oa)),O("selection",r.selectedPanne),l(9),m("ngIf",r.lesPannes.length==0),l(),Q(v(26,Va)),m("modal",!0),O("visible",r.panneVisibility),m("breakpoints",v(27,Da))("maximizable",!0),l(),m("formGroup",r.panneFormGroup),l(16),m("options",r.nosMarques)("editable",!0),l(18),m("filter",!0)("showClear",!0)("options",r.statuts),l(6),m("disabled",!r.panneFormGroup.valid))},dependencies:[k,me,L,R,G,z,X,ee,J,M,te,K,bt,H,ie,ge,oe,W,$],encapsulation:2})};var Do=()=>({"min-width":"50rem"}),Ga=()=>[5,10,20],Ba=()=>["nom","email","role.description"],Ra=()=>({width:"40rem"}),za=()=>({"1199px":"75vw","575px":"90vw"});function La(o,n){if(o&1){let e=y();t(0,"div",29)(1,"p-button",30),g("onClick",function(){d(e);let s=h();return f(s.openSaveUser())}),i(),t(2,"p-iconfield",31)(3,"p-inputicon"),p(4,"i",32),i(),t(5,"input",33,4),g("input",function(){d(e);let s=T(6);h();let c=T(4);return f(c.filterGlobal(s.value,"contains"))}),i()()()}}function Wa(o,n){o&1&&(t(0,"tr")(1,"th"),a(2,"Photo"),i(),t(3,"th"),a(4,"Nom"),i(),t(5,"th"),a(6,"Email"),i(),t(7,"th"),a(8,"R\xF4le"),i(),t(9,"th"),a(10,"Connect\xE9 ?"),i(),t(11,"th"),a(12,"Actions"),i()())}function $a(o,n){if(o&1&&p(0,"img",39),o&2){let e=h().$implicit;m("src",e.photo,_e)}}function Ja(o,n){if(o&1){let e=y();t(0,"tr")(1,"td"),b(2,$a,1,1,"img",34),i(),t(3,"td"),a(4),i(),t(5,"td"),a(6),i(),t(7,"td"),a(8),i(),t(9,"td"),p(10,"p-tag",35),i(),t(11,"td")(12,"div",36)(13,"p-button",37),g("onClick",function(){let s=d(e).$implicit,c=h();return f(c.openUpdateUser(s))}),i(),t(14,"p-button",38),g("onClick",function(){let s=d(e).$implicit,c=h();return f(c.deleteUser(s))}),i()()()()}if(o&2){let e=n.$implicit;l(2),m("ngIf",e.photo),l(2),C(e.nom),l(2),C(e.email),l(2),C(e.role=="Agent"?"Femme de chambre":e.role),l(2),m("icon",e.connected?"pi pi-check":"pi pi-times")("severity",e.connected?"success":"danger")("value",e.connected?"Oui":"Non"),l(3),m("rounded",!0)("text",!0),l(),m("rounded",!0)("text",!0)}}function Ha(o,n){o&1&&(t(0,"div",40),p(1,"img",41),t(2,"h3",42),a(3,"Aucun utilisateur inscrit pour le moment"),i()())}var Bt=class o{constructor(n,e,r,s){this.fb=n;this.messageService=e;this.confirmationService=r;this.store=s;this.formGroup=this.fb.group({id:[null],nom:[null,P.required],email:[null,[P.required,P.email]],password:[null,[P.required,P.minLength(3)]],role:[null,P.required]})}destroy$=new A;utilisateurs;userConnected;roles;selectedRole;formGroup;searchValue;openUtilisateurDialog=!1;userToUpdated;dropdownList=[];selectedUtilisateurs;ngOnInit(){this.store.dispatch(Re()),this.store.select(ze).subscribe(n=>this.utilisateurs=n),this.store.select(je).subscribe(n=>{this.userConnected=n}),this.roles=[{name:"Femme de chambre",code:"Agent"},{name:"Admin",code:"Admin"},{name:"Manager",code:"Manager"},{name:"Gouvernante",code:"Gouvernante"}]}openUpdateUser(n){this.userToUpdated=n,this.formGroup.patchValue({id:n.id,nom:n.nom,email:n.email,role:n.role,password:""}),this.openUtilisateurDialog=!0}openSaveUser(){this.formGroup.reset(),this.userToUpdated=void 0,this.openUtilisateurDialog=!0}onSave(){this.userToUpdated?.id!=null?this.userConnected.id===this.userToUpdated?.id?this.messageService.add({severity:"error",summary:"Action interdite",detail:"Vous ne pouvez pas effectuer cette action!",life:1e4}):this.store.dispatch(Mi({credentials:this.formGroup.value})):this.store.dispatch(Vi({userdata:this.formGroup.value})),this.openUtilisateurDialog=!1,this.formGroup.reset()}deleteUser(n){this.confirmationService.confirm({message:"Voulez-vous supprimer cet utilisateur ?",header:"Confirmez la suppression",icon:"pi pi-info-circle",acceptButtonStyleClass:"p-button-danger p-button-text",rejectButtonStyleClass:"p-button-text p-button-text",acceptIcon:"none",rejectIcon:"none",accept:()=>{this.userConnected.id===n.id?this.messageService.add({severity:"error",summary:"Action interdite",detail:"Vous ne pouvez pas supprimer cet utilisateur!",life:1e4}):this.store.dispatch(Di({id:n.id}))},reject:()=>{this.messageService.add({severity:"error",summary:"Reject\xE9",detail:"Action annul\xE9e!"})}})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}static \u0275fac=function(e){return new(e||o)(_(ae),_(N),_(B),_(q))};static \u0275cmp=F({type:o,selectors:[["app-utilisateurs"]],standalone:!1,decls:60,vars:27,consts:[["dt","","gFilter",""],["caption",""],["header",""],["body",""],["myInput",""],[1,"card"],["paginatorPosition","bottom","selectionMode","single",3,"selectionChange","value","tableStyle","paginator","rows","rowsPerPageOptions","globalFilterFields","selection"],["class","flex justify-content-between align-content-center contenu-empty",4,"ngIf"],["id","dialogue-user",3,"visibleChange","header","modal","visible","breakpoints","maximizable"],["autocomplete","off","novalidate","","role","form",1,"w-full",3,"formGroup"],[1,"mb-1"],[1,"w-full"],["name","nom","id","nom","pInputText","","type","text","formControlName","nom","autocomplete","off",1,"w-full"],["htmlFor","nom",1,"form-label","font-bold"],["id","nom-help",1,"opacity-50"],[1,"mb-1","mt-3"],["name","email","id","email","pInputText","","type","email","formControlName","email","autocomplete","new-email",1,"w-full"],["htmlFor","email",1,"form-label","font-bold"],["id","email-help",1,"opacity-50"],["name","password","id","password","type","password","formControlName","password","autocomplete","new-password",1,"w-full",3,"toggleMask"],["htmlFor","password"],["id","password-help",1,"opacity-50"],["id","custom-input-select",1,"w-full"],[1,"w-full","md:w-56"],["formControlName","role","inputId","role","optionLabel","name","optionValue","code","styleClass","w-full",1,"w-full",3,"options"],["htmlFor","role"],["id","role-help",1,"opacity-50"],[1,"button-submit","mt-3"],["pTooltip","Enr\xE9gistrer l'utilisateur","tooltipPosition","right","label","Enr\xE9gistrer","severity","info",3,"onClick","disabled"],[1,"flex","justify-content-between"],["icon","pi pi-plus","severity","info","label","Ajouter",3,"onClick"],["iconPosition","left",1,"ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Recherche",3,"input"],["class","photo-agent","alt","Photo de l'agent",3,"src",4,"ngIf"],[3,"icon","severity","value"],[1,"button_action"],["icon","pi pi-user-edit","severity","primary",3,"onClick","rounded","text"],["icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],["alt","Photo de l'agent",1,"photo-agent",3,"src"],[1,"flex","justify-content-between","align-content-center","contenu-empty"],["src","../../../../assets/images/empty.svg","alt","Aucun objet pour le moment",1,"aucun-objet"],[1,"p-2","text-center"]],template:function(e,r){if(e&1){let s=y();p(0,"p-confirmDialog"),t(1,"div",5)(2,"p-table",6,0),D("selectionChange",function(u){return d(s),V(r.selectedUtilisateurs,u)||(r.selectedUtilisateurs=u),f(u)}),b(5,La,7,0,"ng-template",null,1,S)(7,Wa,13,0,"ng-template",null,2,S)(9,Ja,15,11,"ng-template",null,3,S),i(),b(11,Ha,4,0,"div",7),i(),t(12,"p-dialog",8),D("visibleChange",function(u){return d(s),V(r.openUtilisateurDialog,u)||(r.openUtilisateurDialog=u),f(u)}),t(13,"form",9),w(14),t(15,"div",10)(16,"label"),a(17,"Nom de l'agent"),i()(),t(18,"div",11)(19,"p-iftalabel"),p(20,"input",12),t(21,"label",13),a(22,"Nom"),i()(),t(23,"small",14),a(24,"Entrez le nom de l'utilisateur (Le nom doit \xEAtre unique)"),i()(),I(),w(25),t(26,"div",15)(27,"label"),a(28,"Email de l'agent"),i()(),t(29,"div",11)(30,"p-iftalabel"),p(31,"input",16),t(32,"label",17),a(33,"Email"),i()(),t(34,"small",18),a(35),i()(),I(),w(36),t(37,"div",15)(38,"label"),a(39,"Mot de passe de l'agent"),i()(),t(40,"div",11)(41,"p-iftalabel"),p(42,"p-password",19),t(43,"label",20),a(44,"Mot de passe"),i()(),t(45,"small",21),a(46,"Veuillez saisir le mot de passe pour l'utilisateur (L'utilisateur pourra changer le mot de passe lorsqu'il se connectera)"),i()(),I(),w(47),t(48,"div",15)(49,"label"),a(50,"R\xF4le de l'agent"),i()(),t(51,"div",22)(52,"p-iftalabel",23),p(53,"p-select",24),t(54,"label",25),a(55,"R\xF4le"),i()()(),t(56,"small",26),a(57,"Choisissez le r\xF4le de l'agent"),i(),I(),t(58,"div",27)(59,"p-button",28),g("onClick",function(){return d(s),f(r.onSave())}),i()()()()}e&2&&(l(2),m("value",r.utilisateurs)("tableStyle",v(21,Do))("paginator",!0)("rows",10)("tableStyle",v(22,Do))("rowsPerPageOptions",v(23,Ga))("globalFilterFields",v(24,Ba)),O("selection",r.selectedUtilisateurs),l(9),m("ngIf",r.utilisateurs.length==0),l(),Q(v(25,Ra)),Y("header",r.userToUpdated!=null&&r.userToUpdated.id?"MISE A JOUR":"ENREGISTREMENT"),m("modal",!0),O("visible",r.openUtilisateurDialog),m("breakpoints",v(26,za))("maximizable",!0),l(),m("formGroup",r.formGroup),l(22),C("Veuillez saisir l'adresse mail (nom@sra-hotel.com)"),l(7),m("toggleMask",!0),l(11),m("options",r.roles),l(6),m("disabled",!r.formGroup.valid&&(r.userToUpdated==null?null:r.userToUpdated.id)==null))},dependencies:[k,me,L,R,G,z,X,ee,J,M,te,K,H,ht,ie,ge,oe,W,$],encapsulation:2})};function Qa(o,n){if(o&1&&p(0,"img",27),o&2){let e=h(2);Y("alt",e.user.nom),m("src",e.user.photo,_e)}}function Ya(o,n){if(o&1&&p(0,"img",27),o&2){let e=h(2);Y("alt",e.user.nom),m("src",e.url,_e)}}function Za(o,n){if(o&1&&b(0,Qa,1,2,"img",27)(1,Ya,1,2,"img",27),o&2){let e=h();le(e.url==""?0:1)}}function Ka(o,n){o&1&&p(0,"i",28)}function Xa(o,n){if(o&1&&p(0,"img",27),o&2){let e=h(2);Y("alt",e.user.nom),m("src",e.url,_e)}}function el(o,n){if(o&1&&b(0,Ka,1,0,"i",28)(1,Xa,1,2,"img",27),o&2){let e=h();le(e.url==""?0:1)}}var Rt=class o{constructor(n,e,r){this.store=n;this.messageService=e;this.fb=r}unsubscribe$=new A;user;url="";objetImage;onselectFile(n){if(n.target.files&&n.target.files[0]){let e=n.target.files[0];if(!e.type.startsWith("image/")){alert("Veuillez s\xE9lectionner un fichier image.");return}let r=new FileReader;r.onload=s=>Ht(this,null,function*(){let c=yield this.resizeImage(s.target.result,100,100);this.url=c.base64,this.objetImage=c.blob}),r.readAsDataURL(e)}}resizeImage(n,e,r){return Ht(this,null,function*(){let s=new Image;return new Promise((c,u)=>{s.onload=()=>{let x=document.createElement("canvas"),ne=x.getContext("2d"),j=Math.min(e/s.width,r/s.height);x.width=s.width*j,x.height=s.height*j,ne.drawImage(s,0,0,x.width,x.height);let U=x.toDataURL("image/jpeg",.8);fetch(U).then(se=>se.blob()).then(se=>{c({base64:U,blob:se})}).catch(u)},s.onerror=u,s.src=n})})}profilForm=new Ae({nom:new re(""),email:new re(""),newPassword:new re(""),photo:new re});ngOnInit(){this.store.select(je).subscribe(n=>{this.user=n,this.profilForm.patchValue({nom:n.nom,email:n.email,newPassword:"",photo:n.photo})})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onSubmitFormProfil(){let n={id:this.user.id,nom:this.profilForm.value.nom,email:this.profilForm.value.email,newPassword:this.profilForm.value.newPassword,photo:this.url};this.url!==""&&this.objetImage.size>1e6?this.messageService.add({severity:"error",summary:"Oups !",detail:"L'image que vous avez choisit est tr\xE8s grande. Merci de choisir une image dont le poid est inf\xE9rieur \xE0 1 Mo !",life:3e4}):n.newPassword!==""&&n.newPassword.length>2||this.url!==""&&this.objetImage.size<=1e6?this.store.dispatch(ki({credentials:n})):n.newPassword!==""&&n.newPassword.length<3&&this.messageService.add({severity:"error",summary:"Oups !",detail:"Le mot de passe doit \xEAtre sup\xE9rieur \xE0 2 caract\xE8res !",life:3e4})}static \u0275fac=function(e){return new(e||o)(_(q),_(N),_(Zi))};static \u0275cmp=F({type:o,selectors:[["app-profil"]],standalone:!1,decls:83,vars:3,consts:[["profil",""],[1,"card","profil-form","flex","justify-content-center"],["autocomplete","false","novalidate","",1,"",3,"formGroup"],[1,""],[1,"icon-user","bloc-sup"],[1,"new-picture"],["for","profil",1,"pick-image"],[1,"pi","pi-video",2,"font-size","1.5rem"],["hidden","","formControlName","photo","name","bannerHidden","type","text"],["id","profil","hidden","","type","file",3,"change"],[1,"profil_input"],[1,"flex","flex-column","gap-1","disabled","mb-4"],["pInputText","","id","nom","aria-describedby","nom-help","formControlName","nom",1,"w-full","disabled"],["for","username"],["id","nom-help"],["pInputText","","id","email","aria-describedby","email-help","formControlName","email","autocomplete","off",1,"w-full","disabled"],["for","email"],["id","email-help"],[1,"flex","flex-column","gap-2"],[1,"pi","pi-envelope"],["formControlName","newPassword","inputId","password-reset","styleClass","w-full","autocomplete","current-password",3,"toggleMask"],["htmlFor","password-reset"],["id","newPassword-help"],[1,"button-submit","mt-4"],["label","Mettre \xE0 jour","type","submit","severity","info",3,"click"],[1,"profil-description"],[1,"color-red-transparent"],[3,"src","alt"],[1,"pi","pi-user",2,"font-size","1.2rem"]],template:function(e,r){if(e&1){let s=y();t(0,"div",1)(1,"form",2)(2,"div",3)(3,"p"),a(4,"Cliquez sur la photo de profil pour la changer"),i(),t(5,"div",4),b(6,Za,2,1)(7,el,2,1),t(8,"span",5)(9,"label",6),p(10,"i",7),i(),p(11,"input",8),t(12,"input",9,0),g("change",function(u){return d(s),f(r.onselectFile(u))}),i()()(),t(14,"h3",3),a(15,"Profil"),i()(),t(16,"div",10)(17,"div",11)(18,"p-iftalabel"),p(19,"input",12),t(20,"label",13),a(21,"Nom"),i()(),t(22,"small",14),a(23,"Votre nom ne peut \xEAtre modifier."),i()(),t(24,"div",11)(25,"p-iftalabel"),p(26,"input",15),t(27,"label",16),a(28,"Email"),i()(),t(29,"small",17),a(30,"Votre email ne peut \xEAtre modifier."),i()(),t(31,"div",18)(32,"p-iftalabel")(33,"p-iconfield"),p(34,"p-inputicon",19)(35,"p-password",20),i(),t(36,"label",21),a(37,"Nouveau mot de passe"),i()(),t(38,"small",22),a(39,"Vous pouvez saisir un nouveau mot de passe. Le mot de passe doit \xEAtre sup\xE9rieur \xE0 2 caract\xE8res."),i()()(),t(40,"div",23)(41,"p-button",24),g("click",function(){return d(s),f(r.onSubmitFormProfil())}),i()()(),t(42,"div",25)(43,"h3"),a(44,"Vous pouvez modifier votre profil selon votre convenance"),i(),t(45,"p"),a(46,"Vous ne pourrez modifier seulement que votre "),t(47,"b"),a(48,"Mot de passe"),i(),a(49," et votre "),t(50,"b"),a(51,"Photo"),i(),p(52,"br"),a(53," Les autres informations telles que le "),t(54,"b"),a(55,"Nom"),i(),a(56," et l'"),t(57,"b"),a(58,"Email"),i(),a(59," ne peuvent \xEAtre modifi\xE9es parce qu'elles permettent de vous identifier de fa\xE7on unique. "),p(60,"br"),a(61," Si vous constatez une erreur sur vos informations ou si vous voulez modifier votre nom ou votre email, merci de contacter la gouvernante qui se chargera de le faire. "),p(62,"br"),a(63," Le "),t(64,"b"),a(65,"Mot de passe "),i(),a(66," doit contenir au minimum 3 caract\xE8res, faute de quoi, un message vous est envoy\xE9: "),t(67,"b",26),a(68,"Le mot de passe doit \xEAtre sup\xE9rieur \xE0 2 caract\xE8res !"),i(),p(69,"br"),a(70," Si vous ne choisissez aucune "),t(71,"b"),a(72,"Photo"),i(),a(73," ou n'entrez aucun "),t(74,"b"),a(75,"Mot de passe"),i(),a(76," modifi\xE9, le bouton de soumission n'a aucun effet. "),p(77,"br"),a(78," La photo de profil que vous choisirez devra \xEAtre inf\xE9rieur \xE0 1 Mo (M\xE9ga Octet) en terme de poid, parce que l'image de profil ne s'affiche que de fa\xE7on tr\xE8s petite. "),p(79,"br"),a(80," Si vous choisissez une image qui est volumineuse, un message d'erreur vous sera envoy\xE9, vous indiquant que "),t(81,"b",26),a(82,"L'image que vous avez choisit est tr\xE8s grande. Merci de choisir une image dont le poid est inf\xE9rieur \xE0 1 Mo !"),i()()()()}e&2&&(l(),m("formGroup",r.profilForm),l(5),le(r.user.photo?6:7),l(29),m("toggleMask",!0))},dependencies:[L,R,G,z,X,ee,J,M,H,ht,W,$],styles:['.profil-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-right:30px}.bloc-sup[_ngcontent-%COMP%]   i.pi-user[_ngcontent-%COMP%]{font-size:40px!important;height:70px;width:70px;background:linear-gradient(45deg,#dbdbdb,transparent);border-radius:50px;display:flex;align-items:center;justify-content:center;margin-bottom:20px;color:#fff}.icon-user.bloc-sup[_ngcontent-%COMP%]{position:relative;width:70px;height:70px;overflow:hidden}.new-picture[_ngcontent-%COMP%]{position:absolute;top:100px;left:50%;transform:translate(-50%,-50%);z-index:0;transition:.4s ease;cursor:pointer}.pick-image[_ngcontent-%COMP%]{cursor:pointer}.icon-user.bloc-sup[_ngcontent-%COMP%]:hover   .new-picture[_ngcontent-%COMP%]{top:50%;width:100%;text-align:center;height:50px;background:#3838385e;color:#fff;display:flex;align-items:center;justify-content:center;border-radius:20px}.bloc-sup[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:70px;width:70px;object-fit:cover;border-radius:50%}.profil_input[_ngcontent-%COMP%]{width:400px}.disabled[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;top:0;width:100%;height:100%;background:#ffffff1f;z-index:1}.profil-form[_ngcontent-%COMP%]{padding:5%}.disabled[_ngcontent-%COMP%]{position:relative}.profil-description[_ngcontent-%COMP%]{background-color:#eeeeee48;padding:3%;border-radius:5px}@media (max-width: 1300px){.profil-form[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse}.profil-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;padding:3%}.profil_input[_ngcontent-%COMP%]{width:100%}}']})};var tl=["video"],il=["canvas"];function nl(o,n){if(o&1){let e=y();t(0,"div",6),g("click",function(){d(e);let s=h();return f(s.rotateVideoInput(!0))}),i()}}var mi=class o{constructor(n,e,r){this._mimeType=null,this._imageAsBase64=null,this._imageAsDataUrl=null,this._imageData=null,this._mimeType=e,this._imageAsDataUrl=n,this._imageData=r}static getDataFromDataUrl(n,e){return n.replace(`data:${e};base64,`,"")}get imageAsBase64(){return this._imageAsBase64?this._imageAsBase64:this._imageAsBase64=o.getDataFromDataUrl(this._imageAsDataUrl,this._mimeType)}get imageAsDataUrl(){return this._imageAsDataUrl}get imageData(){return this._imageData}},lt=class{static getAvailableVideoInputs(){return!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices?Promise.reject("enumerateDevices() not supported."):new Promise((n,e)=>{navigator.mediaDevices.enumerateDevices().then(r=>{n(r.filter(s=>s.kind==="videoinput"))}).catch(r=>{e(r.message||r)})})}},ko=(()=>{class o{constructor(){this.width=640,this.height=480,this.videoOptions=o.DEFAULT_VIDEO_OPTIONS,this.allowCameraSwitch=!0,this.captureImageData=!1,this.imageType=o.DEFAULT_IMAGE_TYPE,this.imageQuality=o.DEFAULT_IMAGE_QUALITY,this.imageCapture=new Me,this.initError=new Me,this.imageClick=new Me,this.cameraSwitched=new Me,this.availableVideoInputs=[],this.videoInitialized=!1,this.activeVideoInputIndex=-1,this.mediaStream=null,this.activeVideoSettings=null}set trigger(e){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.triggerSubscription=e.subscribe(()=>{this.takeSnapshot()})}set switchCamera(e){this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe(),this.switchCameraSubscription=e.subscribe(r=>{typeof r=="string"?this.switchToVideoInput(r):this.rotateVideoInput(r!==!1)})}static getMediaConstraintsForDevice(e,r){let s=r||this.DEFAULT_VIDEO_OPTIONS;return e&&(s.deviceId={exact:e}),s}static getDeviceIdFromMediaStreamTrack(e){if(e.getSettings&&e.getSettings()&&e.getSettings().deviceId)return e.getSettings().deviceId;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().deviceId){let r=e.getConstraints().deviceId;return o.getValueFromConstrainDOMString(r)}}static getFacingModeFromMediaStreamTrack(e){if(e){if(e.getSettings&&e.getSettings()&&e.getSettings().facingMode)return e.getSettings().facingMode;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().facingMode){let r=e.getConstraints().facingMode;return o.getValueFromConstrainDOMString(r)}}}static isUserFacing(e){let r=o.getFacingModeFromMediaStreamTrack(e);return r?r.toLowerCase()==="user":!1}static getValueFromConstrainDOMString(e){if(e){if(e instanceof String)return String(e);if(Array.isArray(e)&&Array(e).length>0)return String(e[0]);if(typeof e=="object"){if(e.exact)return String(e.exact);if(e.ideal)return String(e.ideal)}}return null}ngAfterViewInit(){this.detectAvailableDevices().then(()=>{this.switchToVideoInput(null)}).catch(e=>{this.initError.next({message:e}),this.switchToVideoInput(null)})}ngOnDestroy(){this.stopMediaTracks(),this.unsubscribeFromSubscriptions()}takeSnapshot(){let e=this.nativeVideoElement,r={width:this.width,height:this.height};e.videoWidth&&(r.width=e.videoWidth,r.height=e.videoHeight);let s=this.canvas.nativeElement;s.width=r.width,s.height=r.height;let c=s.getContext("2d");c.drawImage(e,0,0);let u=this.imageType?this.imageType:o.DEFAULT_IMAGE_TYPE,x=this.imageQuality?this.imageQuality:o.DEFAULT_IMAGE_QUALITY,ne=s.toDataURL(u,x),j=null;this.captureImageData&&(j=c.getImageData(0,0,s.width,s.height)),this.imageCapture.next(new mi(ne,u,j))}rotateVideoInput(e){if(this.availableVideoInputs&&this.availableVideoInputs.length>1){let r=e?1:this.availableVideoInputs.length-1,s=(this.activeVideoInputIndex+r)%this.availableVideoInputs.length;this.switchToVideoInput(this.availableVideoInputs[s].deviceId)}}switchToVideoInput(e){this.videoInitialized=!1,this.stopMediaTracks(),this.initWebcam(e,this.videoOptions)}videoResize(){}get videoWidth(){let e=this.getVideoAspectRatio();return Math.min(this.width,this.height*e)}get videoHeight(){let e=this.getVideoAspectRatio();return Math.min(this.height,this.width/e)}get videoStyleClasses(){let e="";return this.isMirrorImage()&&(e+="mirrored "),e.trim()}get nativeVideoElement(){return this.video.nativeElement}getVideoAspectRatio(){let e=this.nativeVideoElement;return e.videoWidth&&e.videoWidth>0&&e.videoHeight&&e.videoHeight>0?e.videoWidth/e.videoHeight:this.width/this.height}initWebcam(e,r){let s=this.nativeVideoElement;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){let c=o.getMediaConstraintsForDevice(e,r);navigator.mediaDevices.getUserMedia({video:c}).then(u=>{this.mediaStream=u,s.srcObject=u,s.play(),this.activeVideoSettings=u.getVideoTracks()[0].getSettings();let x=o.getDeviceIdFromMediaStreamTrack(u.getVideoTracks()[0]);this.cameraSwitched.next(x),this.detectAvailableDevices().then(()=>{this.activeVideoInputIndex=x?this.availableVideoInputs.findIndex(ne=>ne.deviceId===x):-1,this.videoInitialized=!0}).catch(()=>{this.activeVideoInputIndex=-1,this.videoInitialized=!0})}).catch(u=>{this.initError.next({message:u.message,mediaStreamError:u})})}else this.initError.next({message:"Cannot read UserMedia from MediaDevices."})}getActiveVideoTrack(){return this.mediaStream?this.mediaStream.getVideoTracks()[0]:null}isMirrorImage(){if(!this.getActiveVideoTrack())return!1;{let e="auto";switch(this.mirrorImage&&(typeof this.mirrorImage=="string"?e=String(this.mirrorImage).toLowerCase():this.mirrorImage.x&&(e=this.mirrorImage.x.toLowerCase())),e){case"always":return!0;case"never":return!1}}return o.isUserFacing(this.getActiveVideoTrack())}stopMediaTracks(){this.mediaStream&&this.mediaStream.getTracks&&(this.nativeVideoElement.pause(),this.mediaStream.getTracks().forEach(e=>e.stop()))}unsubscribeFromSubscriptions(){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe()}detectAvailableDevices(){return new Promise((e,r)=>{lt.getAvailableVideoInputs().then(s=>{this.availableVideoInputs=s,e(s)}).catch(s=>{this.availableVideoInputs=[],r(s)})})}}return o.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"},o.DEFAULT_IMAGE_TYPE="image/jpeg",o.DEFAULT_IMAGE_QUALITY=.92,o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=F({type:o,selectors:[["webcam"]],viewQuery:function(e,r){if(e&1&&(tt(tl,7),tt(il,7)),e&2){let s;it(s=nt())&&(r.video=s.first),it(s=nt())&&(r.canvas=s.first)}},inputs:{width:"width",height:"height",videoOptions:"videoOptions",allowCameraSwitch:"allowCameraSwitch",mirrorImage:"mirrorImage",captureImageData:"captureImageData",imageType:"imageType",imageQuality:"imageQuality",trigger:"trigger",switchCamera:"switchCamera"},outputs:{imageCapture:"imageCapture",initError:"initError",imageClick:"imageClick",cameraSwitched:"cameraSwitched"},standalone:!1,decls:6,vars:7,consts:[["video",""],["canvas",""],[1,"webcam-wrapper",3,"click"],["autoplay","","muted","","playsinline","",3,"resize","width","height"],["class","camera-switch",3,"click",4,"ngIf"],[3,"width","height"],[1,"camera-switch",3,"click"]],template:function(e,r){if(e&1){let s=y();t(0,"div",2),g("click",function(){return d(s),f(r.imageClick.next())}),t(1,"video",3,0),g("resize",function(){return d(s),f(r.videoResize())}),i(),b(3,nl,1,0,"div",4),p(4,"canvas",5,1),i()}e&2&&(l(),st(r.videoStyleClasses),m("width",r.videoWidth)("height",r.videoHeight),l(2),m("ngIf",r.allowCameraSwitch&&r.availableVideoInputs.length>1&&r.videoInitialized),l(),m("width",r.width)("height",r.height))},dependencies:[k],styles:[".webcam-wrapper[_ngcontent-%COMP%]{display:inline-block;position:relative;line-height:0}.webcam-wrapper[_ngcontent-%COMP%]   video.mirrored[_ngcontent-%COMP%]{transform:scaleX(-1)}.webcam-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]{background-color:#0000001a;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC);background-repeat:no-repeat;border-radius:5px;position:absolute;right:13px;top:10px;height:48px;width:48px;background-size:80%;cursor:pointer;background-position:center;transition:background-color .2s ease}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]:hover{background-color:#0000002e}"]}),o})();var Mo=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=Ge({type:o}),o.\u0275inj=Ue({imports:[[ct]]}),o})();function rl(o,n){if(o&1){let e=y();t(0,"webcam",12),g("imageCapture",function(s){d(e);let c=h(2);return f(c.handleImage(s))}),i()}if(o&2){let e=h(2);m("trigger",e.triggerObservable)("switchCamera",e.nextWebcamObservable)}}function al(o,n){if(o&1&&(t(0,"ul")(1,"li"),a(2),Ei(3,"json"),i()()),o&2){let e=n.$implicit;l(2),C(wi(3,1,e))}}function ll(o,n){if(o&1&&(t(0,"div")(1,"h4"),a(2,"Messages d'erreur"),i(),b(3,al,4,3,"ul",13),i()),o&2){let e=h(2);l(3),m("ngForOf",e.errors)}}function sl(o,n){if(o&1){let e=y();t(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"p-button",7),g("click",function(){d(e);let s=h();return f(s.takeSnapshot())}),p(5,"img",8),i(),t(6,"p-button",7),g("click",function(){d(e);let s=h();return f(s.changeWebcam(!0))}),p(7,"img",9),i()()(),b(8,rl,1,2,"webcam",10),i(),b(9,ll,4,1,"div",11),i()}if(o&2){let e=h();l(4),m("outlined",!0)("rounded",!0)("text",!0),l(2),m("outlined",!0)("rounded",!0)("text",!0),l(2),m("ngIf",e.showWebcam),l(),m("ngIf",e.errors.length>0)}}function ml(o,n){o&1&&a(0,` Appareil photo non disponible
`)}var zt=class o{getPicture=new Me;showWebcam=!0;isCameraExist=!0;errors=[];trigger=new A;nextWebcam=new A;ngOnInit(){lt.getAvailableVideoInputs().then(n=>{this.isCameraExist=n&&n.length>0})}takeSnapshot(){this.trigger.next()}onOffWebcame(){this.showWebcam=!this.showWebcam}handleInitError(n){this.errors.push(n)}changeWebcam(n){this.nextWebcam.next(n)}handleImage(n){this.getPicture.emit(n),this.showWebcam=!1}get triggerObservable(){return this.trigger.asObservable()}get nextWebcamObservable(){return this.nextWebcam.asObservable()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=F({type:o,selectors:[["app-camera"]],outputs:{getPicture:"getPicture"},standalone:!1,decls:4,vars:2,consts:[["noCameraExist",""],[1,"container","h-full"],["class","h-full",4,"ngIf","ngIfElse"],[1,"h-full"],[1,"text-center","bouton-photo","h-full"],[1,"mention-buttons","h-full"],[1,"btn-group","h-full"],[3,"click","outlined","rounded","text"],["src","../../../../assets/images/camera.svg","alt","Prendre une photo"],["src","../../../../assets/images/change-cam.svg","alt","Changer de camera"],["class","webcam",3,"trigger","switchCamera","imageCapture",4,"ngIf"],[4,"ngIf"],[1,"webcam",3,"imageCapture","trigger","switchCamera"],[4,"ngFor","ngForOf"]],template:function(e,r){if(e&1&&(t(0,"div",1),b(1,sl,10,8,"div",2),i(),b(2,ml,1,0,"ng-template",null,0,S)),e&2){let s=T(3);l(),m("ngIf",r.isCameraExist)("ngIfElse",s)}},dependencies:[ko,pt,k,M,Ti],styles:[".btn-group[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto;width:35px}.bouton-photo[_ngcontent-%COMP%]{position:relative}"]})};var Ao=()=>({width:"30rem"}),No=()=>({"1199px":"75vw","575px":"90vw"});function cl(o,n){if(o&1&&(t(0,"p-card",38)(1,"p",39),a(2),i()()),o&2){let e=h();l(2),Be(" ",e.monPasse.commentaire," ")}}function ul(o,n){if(o&1&&(p(0,"p-checkbox",41),t(1,"label",42),a(2),i()),o&2){let e=h().$implicit;m("inputId",e.tache==null?null:e.tache.id)("name",e.tache==null?null:e.tache.id)("value",e.tache==null?null:e.tache.action),l(),m("for",e.tache==null?null:e.tache.id),l(),C(e.tache==null?null:e.tache.action)}}function dl(o,n){if(o&1&&(t(0,"div",40),b(1,ul,3,5),i()),o&2){let e=n.$implicit;l(),le((e.tache==null||e.tache.categorie==null?null:e.tache.categorie.nom)=="Travail Journalier"&&(e.tache==null||e.tache.sous_categorie==null?null:e.tache.sous_categorie.nom)=="Chambre"?1:-1)}}function fl(o,n){if(o&1&&(p(0,"p-checkbox",41),t(1,"label",42),a(2),i()),o&2){let e=h().$implicit;m("inputId",e.tache==null?null:e.tache.id)("name",e.tache==null?null:e.tache.id)("value",e.tache==null?null:e.tache.action),l(),m("for",e.tache==null?null:e.tache.id),l(),C(e.tache==null?null:e.tache.action)}}function hl(o,n){if(o&1&&(t(0,"div",40),b(1,fl,3,5),i()),o&2){let e=n.$implicit;l(),le((e.tache==null||e.tache.categorie==null?null:e.tache.categorie.nom)=="Travail Journalier"&&(e.tache==null||e.tache.sous_categorie==null?null:e.tache.sous_categorie.nom)=="Salle de bain"?1:-1)}}function gl(o,n){if(o&1&&(p(0,"p-checkbox",41),t(1,"label",42),a(2),i()),o&2){let e=h().$implicit;m("inputId",e.tache==null?null:e.tache.id)("name",e.tache==null?null:e.tache.id)("value",e.tache==null?null:e.tache.action),l(),m("for",e.tache==null?null:e.tache.id),l(),C(e.tache==null?null:e.tache.action)}}function bl(o,n){if(o&1&&(t(0,"div",40),b(1,gl,3,5),i()),o&2){let e=n.$implicit;l(),le((e.tache==null||e.tache.categorie==null?null:e.tache.categorie.nom)=="Auto Contr\xF4le"?1:-1)}}function vl(o,n){if(o&1&&(p(0,"p-checkbox",41),t(1,"label",42),a(2),i()),o&2){let e=h().$implicit;m("inputId",e.nettoyage==null?null:e.nettoyage.id)("name",e.nettoyage==null?null:e.nettoyage.id)("value",e.nettoyage==null?null:e.nettoyage.action),l(),m("for",e.nettoyage==null?null:e.nettoyage.id),l(),C(e.nettoyage==null?null:e.nettoyage.action)}}function Cl(o,n){if(o&1&&(t(0,"div",40),b(1,vl,3,5),i()),o&2){let e=n.$implicit;l(),le((e.nettoyage==null||e.nettoyage.categorie==null?null:e.nettoyage.categorie.nom)=="Petit Ponctuel"?1:-1)}}function _l(o,n){if(o&1&&(p(0,"p-checkbox",41),t(1,"label",42),a(2),i()),o&2){let e=h().$implicit;m("inputId",e.nettoyage==null?null:e.nettoyage.id)("name",e.nettoyage==null?null:e.nettoyage.id)("value",e.nettoyage==null?null:e.nettoyage.action),l(),m("for",e.nettoyage==null?null:e.nettoyage.id),l(),C(e.nettoyage==null?null:e.nettoyage.action)}}function yl(o,n){if(o&1&&(t(0,"div",40),b(1,_l,3,5),i()),o&2){let e=n.$implicit;l(),le((e.nettoyage==null||e.nettoyage.categorie==null?null:e.nettoyage.categorie.nom)=="Nettoyage P\xE9riodique"?1:-1)}}function Sl(o,n){if(o&1){let e=y();t(0,"div",43)(1,"app-camera",44),g("getPicture",function(s){d(e);let c=h();return f(c.handleImage(s))}),i()()}}function xl(o,n){if(o&1&&(t(0,"div",45),p(1,"img",46),i()),o&2){let e=h();l(),m("src",e.webcamAffiche.imageAsDataUrl,_e)}}function El(o,n){if(o&1){let e=y();t(0,"div",43)(1,"app-camera",44),g("getPicture",function(s){d(e);let c=h();return f(c.handleImage(s))}),i()()}}function wl(o,n){if(o&1&&(t(0,"div",45),p(1,"img",46),i()),o&2){let e=h();l(),m("src",e.webcamAffiche.imageAsDataUrl,_e)}}var Lt=class o{constructor(n,e){this.store=n;this.messageService=e}value=0;objetModalShow=!1;loading=!0;panneModalShow=!1;isPanneLoading=!0;userConnected;monPasse;maChambreChoisie;TacheBain;TacheChambre;controles;nosMarques;selectedTaches=[];webcamImage;webcamAffiche;handleImage(n){this.webcamAffiche=n;let e=n.imageAsBase64;this.getBase64Size(e)/1024>500?this.compressImage(e,800,800,.8).then(c=>{this.webcamImage=c}):this.webcamImage=n.imageAsDataUrl}getBase64Size(n){let e=n.length-(n.indexOf(",")+1);return 4*Math.ceil(e/3)*.5624896334383812}compressImage(n,e,r,s){return new Promise(c=>{let u=new Image;u.src=`data:image/jpeg;base64,${n}`,u.onload=()=>{let x=document.createElement("canvas"),ne=x.getContext("2d"),j=u.width,U=u.height;(j>e||U>r)&&(j/U>e/r?(U=U*e/j,j=e):(j=j*r/U,U=r)),x.width=j,x.height=U,ne.drawImage(u,0,0,j,U),c(x.toDataURL("image/jpeg",s).split(",")[1])}})}ngOnInit(){this.store.dispatch(Je()),this.store.select(Ze).subscribe(n=>{this.nosMarques=n}),this.store.select(je).subscribe(n=>{this.userConnected=n}),this.store.select(Pt).subscribe(n=>{this.maChambreChoisie=n}),this.store.select(He).subscribe(n=>{this.monPasse=n})}objetForm=new Ae({description:new re("",P.required)});panneForm=new Ae({nomEquipement:new re("",P.required),description:new re("",P.required),marqueEquipement:new re("")});showDialogObjet(){this.loading=!1,this.objetModalShow=!0,this.webcamImage=void 0,this.webcamAffiche=void 0}showDialogPanne(){this.loading=!1,this.panneModalShow=!0,this.webcamImage=void 0,this.webcamAffiche=void 0}onSubmitObjet(){if(this.webcamAffiche===void 0)this.messageService.add({severity:"error",summary:"Oups !",detail:"Veuillez prendre une photo de l'objet",life:3e4});else if(!this.objetForm.valid)this.messageService.add({severity:"error",summary:"Oups !",detail:"Veuillez v\xE9rifier le nom et la description de l'objet trouv\xE9",life:3e4});else{let n={id:this.maChambreChoisie.id,description:this.objetForm.value.description,imageBase64:this.webcamImage,statut:"Nouveau"};this.store.dispatch(zn({credentials:n})),this.objetModalShow=!1,this.webcamImage=void 0,this.webcamAffiche=void 0,this.objetForm.reset()}}onSubmitPanne(){if(this.webcamImage===void 0)this.messageService.add({severity:"error",summary:"Oups !",detail:"Veuillez prendre une photo de l'appareil en panne!",life:3e4});else if(!this.panneForm.valid)this.messageService.add({severity:"error",summary:"Oups !",detail:"Veuillez v\xE9rifier la description de l'appareil trouv\xE9 en panne",life:3e4});else{let n=We(),e={id:this.maChambreChoisie.id,description:this.panneForm.value.description,nomEquipement:this.panneForm.value.nomEquipement,date:n,marqueEquipement:this.panneForm.value.marqueEquipement,imageBase64:this.webcamImage,statut:"Nouveau"};this.store.dispatch(vn({credentials:e})),this.panneModalShow=!1,this.webcamImage=void 0,this.webcamAffiche=void 0,this.panneForm.reset()}}static \u0275fac=function(e){return new(e||o)(_(q),_(N))};static \u0275cmp=F({type:o,selectors:[["app-checker"]],standalone:!1,decls:87,vars:42,consts:[["header","Commentaire",4,"ngIf"],[1,"checker-card"],[1,"flex","mb-2","gap-2","justify-content-end"],["rounded","true","styleClass","w-8 h-8 p-0 button-head","label","1",3,"onClick","outlined"],["rounded","true","styleClass","w-8 h-8 p-0 button-head","label","2",3,"onClick","outlined"],["rounded","true","styleClass","w-8 h-8 p-0 button-head","label","3",3,"onClick","outlined"],[3,"value"],[1,"travaux-bloc"],[1,"text-lg","font-bold","my-3"],["class","flex align-items-center",4,"ngFor","ngForOf"],[1,"panne-objet"],[1,"card"],["label","Objet trouv\xE9 ?","severity","info",1,"mb-2",3,"onClick"],["label","Panne constat\xE9e ?","severity","info",3,"onClick"],["id","objet-panne","header","Objet trouv\xE9 ?",3,"visibleChange","modal","visible","breakpoints","maximizable"],["novalidate","","autocomplete","off","enctype","multipart/form-data",3,"ngSubmit","formGroup"],[1,"probleme-technique"],[1,"form-picture"],[1,"pt-input","card"],[1,"flex","flex-column","gap-2"],["for","descriptionObjet"],["pTextarea","","id","description","formControlName","description","rows","2",2,"resize","none","width","100%"],["for","description"],["id","descriptionObjet-help"],[1,"pt-image"],[1,"card","flex","justify-center","flex-col","items-center"],["class","w-full",4,"ngIf"],["class","webcam-image w-full",4,"ngIf"],[1,"mt-5","text-center"],["type","submit","severity","info",3,"loading"],["id","objet-panne","header","Probl\xE8me technique ?",3,"visibleChange","modal","visible","breakpoints","maximizable"],[1,"probleme-technique","pannes"],["for","nomPanne"],["pInputText","","id","nomPanne","aria-describedby","nomPanne-help","formControlName","nomEquipement"],["for","descriptionPanne"],["id","custom-input-select",1,"flex","flex-column","gap-2"],["formControlName","marqueEquipement","placeholder","S\xE9lectionnez une marque","optionLabel","nom","optionValue","nom",1,"w-full","md:w-56",3,"options","editable"],["type","submit",3,"loading"],["header","Commentaire"],[1,"m-0"],[1,"flex","align-items-center"],[3,"inputId","name","value"],[1,"ml-2","custom-label",3,"for"],[1,"w-full"],[3,"getPicture"],[1,"webcam-image","w-full"],["alt","Image captur\xE9e",3,"src"]],template:function(e,r){e&1&&(p(0,"p-confirmDialog"),b(1,cl,3,1,"p-card",0),t(2,"div",1)(3,"div",2)(4,"p-button",3),g("onClick",function(){return r.value=0}),i(),t(5,"p-button",4),g("onClick",function(){return r.value=1}),i(),t(6,"p-button",5),g("onClick",function(){return r.value=2}),i()(),t(7,"p-tabs",6)(8,"p-tablist")(9,"p-tab",6),a(10,"Travaux journaliers"),i(),t(11,"p-tab",6),a(12,"Contr\xF4les"),i(),t(13,"p-tab",6),a(14,"Objet / Probl\xE8me technique"),i()(),t(15,"p-tabpanels")(16,"p-tabpanel",6)(17,"div",7)(18,"div")(19,"p",8),a(20,"Chambre"),i(),b(21,dl,2,1,"div",9),i(),t(22,"div")(23,"p",8),a(24,"Salle de bain"),i(),b(25,hl,2,1,"div",9),i()()(),t(26,"p-tabpanel",6)(27,"p",8),a(28,"Auto contr\xF4le journalier"),i(),b(29,bl,2,1,"div",9),t(30,"p",8),a(31,"Petit Ponctuel du jour"),i(),b(32,Cl,2,1,"div",9),t(33,"p",8),a(34,"Nettoyage P\xE9riodique"),i(),b(35,yl,2,1,"div",9),i(),t(36,"p-tabpanel",6)(37,"div",10)(38,"div",11),a(39," Si vous constatez une panne ou un objet oubli\xE9 par un client, merci de cliquer sur le bouton correspondant et suivez toutes les instructions. "),i(),t(40,"p-button",12),g("onClick",function(){return r.showDialogObjet()}),i(),t(41,"p-button",13),g("onClick",function(){return r.showDialogPanne()}),i()()()()()(),t(42,"p-dialog",14),D("visibleChange",function(c){return V(r.objetModalShow,c)||(r.objetModalShow=c),c}),t(43,"form",15),g("ngSubmit",function(){return r.onSubmitObjet()}),t(44,"div",16)(45,"div",17)(46,"div",18)(47,"div",19)(48,"label",20),a(49,"Description de l'objet"),i(),t(50,"p-iftalabel"),p(51,"textarea",21),t(52,"label",22),a(53,"Description"),i()(),t(54,"small",23),a(55," Ajoutez une description pour d\xE9tailler l'objet d\xE9couvert. "),i()()()(),t(56,"div",24)(57,"div",25),b(58,Sl,2,0,"div",26)(59,xl,2,1,"div",27),i()()(),t(60,"div",28)(61,"p-button",29),a(62,"Enr\xE9gistrer"),i()()()(),t(63,"p-dialog",30),D("visibleChange",function(c){return V(r.panneModalShow,c)||(r.panneModalShow=c),c}),t(64,"form",15),g("ngSubmit",function(){return r.onSubmitPanne()}),t(65,"div",31)(66,"div",17)(67,"div",18)(68,"div",19)(69,"label",32),a(70,"Nom de l'\xE9quipement"),i(),p(71,"input",33),i(),t(72,"div",19)(73,"label",34),a(74,"D\xE9crivez l'\xE9quipement"),i(),p(75,"textarea",21),i(),t(76,"div",35)(77,"label",34),a(78,"Marque de l'\xE9quipement"),i(),p(79,"p-select",36),i()()(),t(80,"div",24)(81,"div",25),b(82,El,2,0,"div",26)(83,wl,2,1,"div",27),i()()(),t(84,"div",28)(85,"p-button",37),a(86,"Enr\xE9gistrer"),i()()()()),e&2&&(l(),m("ngIf",r.monPasse.commentaire),l(3),m("outlined",r.value!==0),l(),m("outlined",r.value!==1),l(),m("outlined",r.value!==2),l(),m("value",r.value),l(2),m("value",0),l(2),m("value",1),l(2),m("value",2),l(3),m("value",0),l(5),m("ngForOf",r.monPasse.tacheChoisie),l(4),m("ngForOf",r.monPasse.tacheChoisie),l(),m("value",1),l(3),m("ngForOf",r.monPasse.tacheChoisie),l(3),m("ngForOf",r.monPasse.nettoyageChoisie),l(3),m("ngForOf",r.monPasse.nettoyageChoisie),l(),m("value",2),l(6),Q(v(38,Ao)),m("modal",!0),O("visible",r.objetModalShow),m("breakpoints",v(39,No))("maximizable",!0),l(),m("formGroup",r.objetForm),l(15),m("ngIf",!r.webcamAffiche),l(),m("ngIf",r.webcamAffiche),l(2),m("loading",r.loading),l(2),Q(v(40,Ao)),m("modal",!0),O("visible",r.panneModalShow),m("breakpoints",v(41,No))("maximizable",!0),l(),m("formGroup",r.panneForm),l(15),m("options",r.nosMarques)("editable",!0),l(3),m("ngIf",!r.webcamAffiche),l(),m("ngIf",r.webcamAffiche),l(2),m("loading",r.loading))},dependencies:[pt,k,gn,hn,fn,un,dn,me,L,R,G,z,J,M,he,rn,te,K,H,vt,W,$,zt],styles:[".checker-card[_ngcontent-%COMP%]{padding:5% 20%}.travaux-bloc[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}.panne-objet[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;margin-top:15%}.form-picture[_ngcontent-%COMP%]{display:flex;margin-bottom:10px;flex-direction:column;position:absolute;z-index:99;width:100%;left:0;padding:5%}.form-picture[_ngcontent-%COMP%]   .pt-input[_ngcontent-%COMP%]{width:100%;border-radius:10px;padding:1%}.form-picture[_ngcontent-%COMP%]   .bloc-image-view[_ngcontent-%COMP%]{width:100%;border-radius:10px;height:300px}.webcam-image[_ngcontent-%COMP%]{height:100%}.webcam-no-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain!important}.webcam-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;object-fit:cover;border-radius:10px}.webcam-image[_ngcontent-%COMP%], .w-full[_ngcontent-%COMP%]{width:100%}.btn-group[_ngcontent-%COMP%]{background:red;position:absolute;bottom:0;right:0;display:flex}"]})};function Pl(o,n){o&1&&(t(0,"div",9)(1,"div",10),p(2,"p-skeleton",11)(3,"p-skeleton",12)(4,"p-skeleton",13)(5,"p-skeleton",14)(6,"p-skeleton",15),i()())}function Tl(o,n){o&1&&(t(0,"div",7)(1,"h2"),a(2,"Vous n'avez aucun passe \xE0 ce jour."),i(),p(3,"img",17),i())}function jl(o,n){if(o&1&&b(0,Tl,4,0,"div",16),o&2){let e=h();m("ngIf",!e.loading)}}function Fl(o,n){o&1&&p(0,"p-skeleton",18)(1,"p-skeleton",19)(2,"p-skeleton",20)(3,"p-skeleton",21)(4,"p-skeleton",22)}function Ol(o,n){if(o&1){let e=y();t(0,"a",24),g("click",function(){d(e);let s=h(2).$implicit,c=h().$implicit,u=h(2);return f(u.startVerification(c.id,s))}),p(1,"img",25),t(2,"h3"),a(3),i(),t(4,"div",26)(5,"p")(6,"b"),a(7,"Chambre : "),i(),a(8),i(),t(9,"p")(10,"b"),a(11,"Etat de la chambre : "),i(),t(12,"b"),a(13),i()(),t(14,"p")(15,"b"),a(16,"Localisation : "),i(),a(17),i()()()}if(o&2){let e=h(2).$implicit,r=h().$implicit;l(3),Be("Passe N\xB0 ",r.id,""),l(5),C(e.chambre==null?null:e.chambre.numero),l(5),C(e.chambre==null||e.chambre.statut==null?null:e.chambre.statut.nom),l(4),C(e.chambre==null?null:e.chambre.localisation)}}function Vl(o,n){if(o&1&&b(0,Ol,18,4,"a",23),o&2){let e=h().$implicit;le((e.chambre==null||e.chambre.statut==null?null:e.chambre.statut.nom)!=="Propre"?0:-1)}}function Dl(o,n){if(o&1&&b(0,Fl,5,0)(1,Vl,1,1),o&2){let e=h(3);le(e.loading?0:1)}}function kl(o,n){if(o&1&&Xe(0,Dl,2,1,null,null,mt),o&2){let e=n.$implicit;et(e.chambreChoisie)}}function Ml(o,n){if(o&1&&Xe(0,kl,2,0,null,null,Si),o&2){let e=h();et(e.mesPassesDuJour)}}function Al(o,n){o&1&&p(0,"i",28)}function Nl(o,n){if(o&1&&(t(0,"div",29),p(1,"img",43),i()),o&2){let e=h(2);l(),m("src",e.userConnected.photo,_e)}}function ql(o,n){o&1&&(t(0,"div",40),p(1,"img",44),t(2,"h3",45),a(3,"Aucun Objet trouv\xE9 pour le moment"),i()())}function Ul(o,n){if(o&1){let e=y();t(0,"li",46)(1,"div",47)(2,"div",48)(3,"div",49)(4,"span",50),a(5),i()(),t(6,"a",51),g("dblclick",function(){let s=d(e).$implicit,c=h(3);return f(c.removeObjet(s))}),p(7,"i",52),i()()()()}if(o&2){let e=n.$implicit;l(5),C(e.description)}}function Gl(o,n){if(o&1&&(t(0,"ul",41),Xe(1,Ul,8,1,"li",46,mt),i()),o&2){let e=h(2);l(),et(e.objetsFounded)}}function Bl(o,n){o&1&&(t(0,"div",40),p(1,"img",44),t(2,"h3",45),a(3,"Aucune panne inscrite pour le moment"),i()())}function Rl(o,n){if(o&1){let e=y();t(0,"li",46)(1,"div",47)(2,"div",48)(3,"div",49)(4,"span",53),a(5),i(),t(6,"span",54),a(7),i(),t(8,"span",55),a(9),i()(),t(10,"a",51),g("dblclick",function(){let s=d(e).$implicit,c=h(3);return f(c.removePanne(s))}),p(11,"i",52),i()()()()}if(o&2){let e=n.$implicit;l(5),C(e.nomEquipement),l(2),C(e.description),l(2),C(e.marqueEquipement)}}function zl(o,n){if(o&1&&(t(0,"ul",41),Xe(1,Rl,12,3,"li",46,mt),i()),o&2){let e=h(2);l(),et(e.pannesFounded)}}function Ll(o,n){if(o&1&&(t(0,"div",56),p(1,"i",57),t(2,"p"),a(3),i()()),o&2){let e=n.$implicit;l(),st(e.icon),l(2),C(e.message)}}function Wl(o,n){if(o&1){let e=y();t(0,"div",27),b(1,Al,1,0,"i",28)(2,Nl,2,1,"div",29),t(3,"span",30),a(4),i()(),t(5,"div",31),p(6,"span",32),t(7,"p",33),a(8),i()(),t(9,"div",31),p(10,"span",34),t(11,"p",33),a(12),i()(),t(13,"div",35)(14,"a",36),p(15,"p-badge",37),t(16,"p",38),a(17,"Objet(s)"),i()(),t(18,"div",39),b(19,ql,4,0,"div",40)(20,Gl,3,0,"ul",41),i()(),t(21,"div",35)(22,"a",36),p(23,"p-badge",37),t(24,"p",38),a(25,"Panne(s)"),i()(),t(26,"div",39),b(27,Bl,4,0,"div",40)(28,zl,3,0,"ul",41),i()(),t(29,"p-button",42),g("click",function(s){d(e);let c=h();return f(c.confirm(s))}),i(),t(30,"p-confirmPopup"),b(31,Ll,4,3,"ng-template",null,1,S),i()}if(o&2){let e=h();l(),le(e.userConnected.photo==null||!e.userConnected.photo?1:2),l(3),Be(" ",e.userConnected.nom," "),l(4),C(e.monPasse.dateNettoyage),l(4),Be("Chambre ",e.maChambreChoisie.chambre==null?null:e.maChambreChoisie.chambre.numero,""),l(2),m("hideOnOutsideClick",!0),l(),Y("value",e.objetsFounded.length),m("severity",e.objetsFounded.length>0?"success":"danger"),l(4),le(e.objetsFounded.length==0?19:20),l(3),m("hideOnOutsideClick",!0),l(),Y("value",e.pannesFounded.length),m("severity",e.pannesFounded.length>0?"success":"danger"),l(4),le(e.pannesFounded.length==0?27:28)}}var Wt=class o{constructor(n,e,r){this.store=n;this.messageService=e;this.confirmationService=r}unsubscribe$=new A;viewObjets=!1;loading=!0;objetsFounded;pannesFounded;viewPannes=!1;isPanneLoading=!0;viewTableVerification=!1;mesPassesDuJour;userConnected;monPasse;maChambreChoisie;today=We();ngOnInit(){this.initializeUserAndPasses()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}initializeUserAndPasses(){this.store.select(je).pipe(gi(n=>n.nom!==""),Ci(n=>{this.userConnected=n,this.store.dispatch(Wi({agent:n.nom,date:this.today}))}),vi(()=>this.store.select(mo))).subscribe(n=>{this.mesPassesDuJour=n,this.loading=!1})}startVerification(n,e){this.store.dispatch(ni({id:e.id,credentials:{statut:"En cours"}})),this.store.dispatch(ei({passeId:n,nom:"En cours"})),this.viewTableVerification=!0,this.store.dispatch(ft({id:n})),this.store.dispatch(wn({id:e.id})),this.store.dispatch(Jn({statut:"Nouveau",numero:e.chambre?.numero})),this.store.dispatch(yn({statut:"Nouveau",numero:e.chambre?.numero})),hi([this.store.select(Pt),this.store.select(He),this.store.select(To),this.store.select(Zn)]).subscribe({next:([r,s,c,u])=>{this.maChambreChoisie=r,this.monPasse=s,this.objetsFounded=c,this.pannesFounded=u},error:()=>{this.messageService.add({severity:"error",summary:"Oups !",detail:"Une erreur est survenue.",life:3e4})}})}compterChambresPropres(n){return n.chambreChoisie?.filter(e=>e.chambre?.statut?.nom!=="Propre").length}toggleView(n){n==="Objets"&&(this.viewObjets=!this.viewObjets),n==="Pannes"&&(this.viewPannes=!this.viewPannes)}confirm(n){this.confirmationService.confirm({target:n.target,message:"Avez-vous termin\xE9 votre v\xE9rification ?",icon:"pi pi-exclamation-circle",accept:()=>{this.completeVerification()},reject:()=>{this.messageService.add({severity:"error",summary:"Oups !",detail:"Confirmation annul\xE9e",life:3e3})}})}completeVerification(){this.updateEntities(this.pannesFounded,_n,"Enr\xE9gistr\xE9"),this.updateEntities(this.objetsFounded,Wn,"Enr\xE9gistr\xE9"),this.store.dispatch(ni({id:this.maChambreChoisie.id,credentials:{statut:"Propre"}})),this.compterChambresPropres(this.monPasse)==1&&this.store.dispatch(ei({passeId:this.monPasse.id,nom:"Termin\xE9"})),this.messageService.add({severity:"success",summary:"Succ\xE8s !",detail:"V\xE9rification termin\xE9e",life:3e4}),window.location.reload()}updateEntities(n,e,r){n.forEach(s=>{this.store.dispatch(e({id:s.id,statut:r}))})}removeObjet(n){this.store.dispatch(Et({id:n.id}))}removePanne(n){this.store.dispatch(Ct({id:n.id}))}static \u0275fac=function(e){return new(e||o)(_(q),_(N),_(B))};static \u0275cmp=F({type:o,selectors:[["app-agent"]],standalone:!1,decls:12,vars:4,consts:[["header",""],["content",""],[1,"page-agent"],["header","Liste de tous mes passes du jour"],[1,"m-0"],["class","group-skeleton",4,"ngIf"],[1,"mes-passes-agent","margin-top"],[1,"passe_empty"],["position","full",3,"visibleChange","visible","closable"],[1,"group-skeleton"],[1,"skeleton","p-4"],["styleClass","mb-2","borderRadius","16px"],["width","10rem","styleClass","mb-2","borderRadius","16px"],["width","5rem","styleClass","mb-2","borderRadius","16px"],["height","2rem","styleClass","mb-2","borderRadius","16px"],["width","10rem","height","4rem","borderRadius","16px"],["class","passe_empty",4,"ngIf"],["src","../../../../assets/images/empty.svg","alt","no content",1,"empty-image"],["styleClass","mb-2"],["width","10rem","styleClass","mb-2"],["width","5rem","styleClass","mb-2"],["height","2rem","styleClass","mb-2"],["width","10rem","height","4rem"],[1,"passe-card"],[1,"passe-card",3,"click"],["src","../../../../assets/images/card.svg","alt","card background"],[1,"passe-content"],[1,"image-profil-checker"],[1,"pi","pi-user",2,"font-size","1.2rem"],[1,"image-profil-checker-photo"],[1,"font-semibold","text-xl","ml-2"],[1,"flex-justify","ml-5"],[1,"pi","pi-calendar","design-icon"],[1,"ml-2","font-semibold"],[1,"pi","pi-home","design-icon"],[1,"flex-justify","ml-5","relative"],["pStyleClass","@next","enterFromClass","ng-hidden","enterActiveClass","px-scalein","leaveToClass","ng-hidden","leaveActiveClass","px-fadeout","pRipple","",1,"flex","cursor-pointer",3,"hideOnOutsideClick"],[3,"severity","value"],[1,"ml-2","font-semibold","mb-0"],[1,"liste_objets","ng-hidden","card"],[1,"flex","justify-content-between","align-content-center","contenu-empty"],[1,"list-none","p-0","m-0"],["label","Terminer la v\xE9rification","severity","success",1,"float-right",3,"click"],["alt","photo de profil",3,"src"],["src","../../../../assets/images/empty.svg","alt","Aucun objet pour le moment",1,"aucun-objet"],[1,"p-2","text-center"],[1,"p-1","border-bottom-1","border-100"],[1,"flex","align-items-center"],[1,"flex","ml-3","justify-content-between","align-items-center","flex-1"],[1,"flex","flex-column","mb-1"],[1,"text-sm"],[1,"text-sm","line-height-3","cursor-pointer",3,"dblclick"],[1,"pi","pi-trash","text-red-600"],[1,"font-bold","block","mb-1"],[1,"text-sm","block","mb-1"],[1,"text-sm","font-bold"],[1,"flex","flex-col","items-center","w-full","gap-4","border-b","border-surface-200","dark:border-surface-700","p-4","mb-4","pb-0"],[1,"!text-6xl","text-primary-500"]],template:function(e,r){if(e&1){let s=y();t(0,"div",2)(1,"p-card",3)(2,"p",4),a(3," Les diff\xE9rents passes qui vous sont attribu\xE9s par la gouvernante s'affichent sur cet \xE9cran. Veuillez cliquer sur un passe pour d\xE9buter la v\xE9rification. "),i()(),b(4,Pl,7,0,"div",5),t(5,"div",6),b(6,jl,1,1,"div",7)(7,Ml,2,0),i()(),t(8,"p-drawer",8),D("visibleChange",function(u){return d(s),V(r.viewTableVerification,u)||(r.viewTableVerification=u),f(u)}),b(9,Wl,33,12,"ng-template",null,0,S),p(11,"app-checker"),i()}e&2&&(l(4),m("ngIf",r.loading),l(2),le(r.mesPassesDuJour.length==0?6:7),l(2),O("visible",r.viewTableVerification),m("closable",!1))},dependencies:[k,Ji,M,he,an,Le,mn,Qi,ut,Lt],styles:[".margin-top[_ngcontent-%COMP%]{margin-top:30px}.mes-passes-agent[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;flex-wrap:wrap}.passe_empty[_ngcontent-%COMP%]{text-align:center;margin-top:20px;opacity:.2;height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.passe_empty[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:150px;width:auto}.image-profil-checker-photo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px;width:60px;object-fit:cover;border-radius:50px}.image-profil-checker[_ngcontent-%COMP%]{display:flex;align-items:center}.design-icon[_ngcontent-%COMP%]{background:linear-gradient(45deg,#dedede,transparent);height:40px;width:40px;display:flex;align-items:center;justify-content:center;border-radius:50px}.flex-justify[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.p-sidebar-header[_ngcontent-%COMP%]{justify-content:space-between}.liste_objets[_ngcontent-%COMP%]{position:absolute;z-index:89;width:300px;top:30px;left:0;transition:.4s ease}.liste_objets[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:50px;object-fit:cover}"]})};var qo=()=>({"min-width":"50rem"}),$l=()=>[5,10,20],Jl=()=>["nom"],Hl=()=>({width:"40rem"}),Ql=()=>({"1199px":"75vw","575px":"90vw"});function Yl(o,n){if(o&1){let e=y();t(0,"div",18)(1,"p-button",19),g("onClick",function(){d(e);let s=h();return f(s.openSaveObjet())}),i(),t(2,"p-iconfield",20)(3,"p-inputicon"),p(4,"i",21),i(),t(5,"input",22,4),g("input",function(){d(e);let s=T(6);h();let c=T(7);return f(c.filterGlobal(s.value,"contains"))}),i()()()}}function Zl(o,n){o&1&&(t(0,"tr")(1,"th"),a(2,"Nom des marques"),i(),t(3,"th"),a(4,"Actions"),i()())}function Kl(o,n){if(o&1){let e=y();t(0,"tr")(1,"td"),a(2),i(),t(3,"td")(4,"div",23)(5,"p-button",24),g("onClick",function(){let s=d(e).$implicit,c=h();return f(c.openUpdateObjet(s))}),i(),t(6,"p-button",25),g("onClick",function(){let s=d(e).$implicit,c=h();return f(c.deleteObjet(s))}),i()()()()}if(o&2){let e=n.$implicit;l(2),C(e.nom),l(3),m("rounded",!0)("text",!0),l(),m("rounded",!0)("text",!0)}}function Xl(o,n){o&1&&(t(0,"div",26),p(1,"img",27),t(2,"h3",28),a(3,"Aucune marque inscrite pour le moment"),i()())}var $t=class o{constructor(n,e,r,s){this.fb=n;this.messageService=e;this.confirmationService=r;this.store=s;this.formGroup=this.fb.group({id:[null],nom:[null,P.required]})}unsubscribe$=new A;dataList;objetToUpdate;formGroup;openObjetDialog=!1;ngOnInit(){this.store.dispatch(Je()),this.store.select(Ze).subscribe(n=>this.dataList=n)}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}openUpdateObjet(n){this.objetToUpdate=n,this.formGroup.patchValue({id:n.id,nom:n.nom}),this.openObjetDialog=!0}openSaveObjet(){this.formGroup.reset(),this.objetToUpdate=void 0,this.openObjetDialog=!0}onSave(){this.objetToUpdate?.id!=null?this.store.dispatch(Qn({inputdata:this.formGroup.value})):this.store.dispatch(Hn({credential:this.formGroup.value})),this.openObjetDialog=!1,this.formGroup.reset()}deleteObjet(n){this.confirmationService.confirm({message:"Voulez-vous supprimer cette marque ?",header:"Confirmez la suppression",icon:"pi pi-info-circle",acceptButtonStyleClass:"p-button-danger p-button-text",rejectButtonStyleClass:"p-button-text p-button-text",acceptIcon:"none",rejectIcon:"none",accept:()=>{this.store.dispatch(Yn({id:n.id}))},reject:()=>{this.messageService.add({severity:"error",summary:"Reject\xE9",detail:"Action annul\xE9e!"})}})}static \u0275fac=function(e){return new(e||o)(_(ae),_(N),_(B),_(q))};static \u0275cmp=F({type:o,selectors:[["app-marques"]],standalone:!1,decls:28,vars:23,consts:[["dt","","gFilter",""],["caption",""],["header",""],["body",""],["myInput",""],["header","Consignes"],[1,"m-0"],[1,"card"],["paginatorPosition","bottom","selectionMode","single",3,"value","tableStyle","paginator","rows","rowsPerPageOptions","globalFilterFields"],["class","flex justify-content-between align-content-center contenu-empty",4,"ngIf"],["id","dialogue-user",3,"visibleChange","header","modal","visible","breakpoints","maximizable"],["autocomplete","off","novalidate","","role","form",1,"w-full",3,"formGroup"],[1,"mb-1"],[1,"w-full"],["name","nom","id","nom","pInputText","","type","text","formControlName","nom","autocomplete","off",1,"w-full"],["htmlFor","nom",1,"form-label","font-bold"],[1,"button-submit","mt-3"],["pTooltip","Enr\xE9gistrer une marque","tooltipPosition","right","label","Enr\xE9gistrer","severity","info",3,"onClick","disabled"],[1,"flex","justify-content-between"],["icon","pi pi-plus","severity","info","label","Ajouter",3,"onClick"],["iconPosition","left",1,"ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Recherche",3,"input"],[1,"button_action"],["pTooltip","Modifier la marque","tooltipPosition","left","icon","pi pi-user-edit","severity","primary",3,"onClick","rounded","text"],["pTooltip","Supprimer la marque","tooltipPosition","right","icon","pi pi-trash","severity","danger",3,"onClick","rounded","text"],[1,"flex","justify-content-between","align-content-center","contenu-empty"],["src","../../../../assets/images/empty.svg","alt","Aucun objet pour le moment",1,"aucun-objet"],[1,"p-2","text-center"]],template:function(e,r){if(e&1){let s=y();p(0,"p-confirmDialog"),t(1,"p-card",5)(2,"p",6),a(3," Merci de d\xE9finir les diff\xE9rentes marques des \xE9quipements utilis\xE9s dans votre \xE9tablissement. Ces informations permettront d'identifier, en cas de probl\xE8me technique, les marques les plus susceptibles de rencontrer des pannes. "),i()(),t(4,"div",7)(5,"p-table",8,0),b(8,Yl,7,0,"ng-template",null,1,S)(10,Zl,5,0,"ng-template",null,2,S)(12,Kl,7,5,"ng-template",null,3,S),i(),b(14,Xl,4,0,"div",9),i(),t(15,"p-dialog",10),D("visibleChange",function(u){return d(s),V(r.openObjetDialog,u)||(r.openObjetDialog=u),f(u)}),t(16,"form",11),w(17),t(18,"div",12)(19,"label"),a(20,"Nom de la marque"),i()(),t(21,"div",13)(22,"p-iftalabel"),p(23,"input",14),t(24,"label",15),a(25,"Nom"),i()()(),I(),t(26,"div",16)(27,"p-button",17),g("onClick",function(){return d(s),f(r.onSave())}),i()()()()}e&2&&(l(5),m("value",r.dataList)("tableStyle",v(17,qo))("paginator",!0)("rows",10)("tableStyle",v(18,qo))("rowsPerPageOptions",v(19,$l))("globalFilterFields",v(20,Jl)),l(9),m("ngIf",r.dataList.length==0),l(),Q(v(21,Hl)),Y("header",r.objetToUpdate!=null&&r.objetToUpdate.id?"MISE A JOUR":"ENREGISTREMENT"),m("modal",!0),O("visible",r.openObjetDialog),m("breakpoints",v(22,Ql))("maximizable",!0),l(),m("formGroup",r.formGroup),l(11),m("disabled",!r.formGroup.valid&&(r.objetToUpdate==null?null:r.objetToUpdate.id)==null))},dependencies:[k,L,R,G,z,X,ee,J,M,he,te,K,H,ie,oe,W,$],encapsulation:2})};var es=[{path:"",data:{breadcrumb:"Accueil"},component:jt,canActivate:[ce]},{path:"etats",data:{breadcrumb:"Etats"},component:Ft,canActivate:[ce]},{path:"categories",data:{breadcrumb:"Cat\xE9gories"},component:Ot,canActivate:[ce]},{path:"chambres",data:{breadcrumb:"Chambres"},component:Vt,canActivate:[ce]},{path:"salles",data:{breadcrumb:"Salles"},component:Dt,canActivate:[ce]},{path:"nettoyages",data:{breadcrumb:"Nettoyages"},component:Mt,canActivate:[ce]},{path:"taches",data:{breadcrumb:"T\xE2ches"},component:Nt,canActivate:[ce]},{path:"passes",data:{breadcrumb:"Passes"},component:qt,canActivate:[ce]},{path:"objets",data:{breadcrumb:"Objets trouv\xE9s"},component:Ut,canActivate:[ce]},{path:"pannes",data:{breadcrumb:"Problemes techniques"},component:Gt,canActivate:[ce]},{path:"utilisateur",data:{breadcrumb:"Les utilisateurs"},component:Bt,canActivate:[ce]},{path:"profil",data:{breadcrumb:"Profil"},component:Rt,canActivate:[ce]},{path:"agent",data:{breadcrumb:"Agent"},component:Wt,canActivate:[ce]},{path:"marque",data:{breadcrumb:"Les marques de nos \xE9quipements"},component:$t,canActivate:[ce]},{path:"**",redirectTo:"/notfound"}],Jt=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=Ge({type:o});static \u0275inj=Ue({imports:[Zt.forChild(es),Zt]})};var Uo=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=Ge({type:o});static \u0275inj=Ue({imports:[Mo,ct,bn,Jt,Ni,sn]})};export{Uo as DashboardModule};
